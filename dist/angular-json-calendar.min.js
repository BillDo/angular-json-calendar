!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("angular-json-calendar",[],t):"object"==typeof exports?exports["angular-json-calendar"]=t():e["angular-json-calendar"]=t()}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(3),c=a(4),o=a(11),i=a(12),l=a(13),s=a(14);t["default"]=angular.module("bc.JsonCalendar",[]).provider("bcCalendarConfig",n.bcCalendarConfig).service("bcCalendarService",r.bcCalendarService).directive("bcCalendar",c.bcCalendarDirective).directive("bcYear",o.bcYearDirective).directive("bcMonth",i.bcMonthDirective).directive("bcWeek",l.bcWeekDirective).directive("bcDay",s.bcDayDirective)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.bcCalendarConfig=void 0;var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(2),i=n(o);t.bcCalendarConfig=function(){function e(){"ngInject";var t=this;r(this,e),this.startDate=moment(new Date).startOf("day").format(),this.nestingDepth="month",this.days=30,this.weekdayStyle={letter:["S","M","T","W","T","F","S"],abbreviation:["Sun","Mon","Tue","Wed","Thur","Fri","Sat"],word:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},this.dayTitleFormat="abbreviation",this.showWeekdays=!0,this.dayTemplate=i["default"],this.setDayTemplate=function(e){t.userDayTemplate=e},this.dateFormat="D",this.monthTitleFormat="MMMM",this.showMonthTitles=!0}return c(e,[{key:"$get",value:function(){return this}}]),e}()},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/day.inner.html",n='<time datetime="{{ day.date | date:\'yyyy-MM-dd\' }}" class=bc-calendar__day-time title="{{ day.date }}" data-ng-if=day.date> <span data-ng-bind="$ctrl.formatDate(day.date, $ctrl.dateFormat)"></span> </time>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.bcCalendarService=function(){function e(){"ngInject";a(this,e),this.WEEK_LENGTH=7,this.dayTemplate}return n(e,[{key:"dateIsBeforeToday",value:function(e){var t=moment(new Date).startOf("day").format();return moment(e).isBefore(t)}},{key:"isDayToday",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?moment(new Date).format():arguments[1];return moment(e).isSame(t)}},{key:"integerToArray",value:function(e){var t=void 0,a=[];for(t=0;t<e;t+=1)a.push(t);return a}},{key:"padDaysLeft",value:function(e,t){var a=[],n=this.integerToArray(t);for(var r in n){var c=parseInt(r,10)+1,o=moment(e).subtract(c,"days").toISOString();a.unshift({date:o})}return a}},{key:"padBlankTiles",value:function(e,t){var a=arguments.length<=2||void 0===arguments[2]?"left":arguments[2],n=void 0,r=[];for(n=0;n<t;n+=1)r.push({date:null});return"right"===a?e.concat(r):"left"===a?r.concat(e):void 0}},{key:"chunk",value:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?this.WEEK_LENGTH:arguments[1],a=[],n=0,r=e.length/parseInt(t,10);n<r;)a[n]=e.splice(0,t),n+=1;return a}},{key:"durationInDays",value:function(e,t){var a=moment(e).startOf("day"),n=moment(t).startOf("day").add(1,"days");return n.diff(a,"days")}},{key:"organizeWeeks",value:function(e){var t=moment(e[0].date).day(),a=moment(e[e.length-1].date).day(),n=6,r=0;return t>r&&(e=this.padBlankTiles(e,t,"left")),a<n&&(e=this.padBlankTiles(e,this.WEEK_LENGTH-(a+1),"right")),this.chunk(e)}},{key:"organizeMonths",value:function(e){var t=[],a=6,n=0,r=e,c=void 0,o=moment(r[0].date).date(),i=moment(r[0].date).daysInMonth();if(moment(r[0].date).date()>0){c=r.slice(0,i-(o-1));var l=this.padDaysLeft(c[0].date,o-1);r=l.concat(r)}for(;r.length>0;){o=moment(r[0].date).date(),i=moment(r[0].date).daysInMonth(),c=r.splice(0,i-(o-1));var s=moment(c[0].date).day();s>n&&(c=this.padBlankTiles(c,s,"left"));var d=moment(c[c.length-1].date).day();d<a&&(c=this.padBlankTiles(c,this.WEEK_LENGTH-(d+1),"right")),t.push(this.chunk(c))}return t}},{key:"buildDays",value:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?new Date:arguments[1],a=0,n=[],r=void 0;a<e;)r=moment(t).add(a,"days").toISOString(),n.push({date:r}),a+=1;return n}},{key:"storeDayTemplate",value:function(e){this.dayTemplate=e}},{key:"getDayTemplate",value:function(){return this.dayTemplate}}]),e}()},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";function e(e,a,n,r){r.getTemplateUrl=function(){return t[r.nestingDepth]}}var t={year:s["default"],month:u["default"],week:h["default"],day:f["default"]},a={restrict:"E",scope:{},bindToController:{bcStartDate:"@?",bcEndDate:"@?",bcNestingDepth:"@?",bcDays:"@?",bcDayTitleFormat:"@?",bcMonthTitleFormat:"@?",bcDateSelected:"&",bcShowWeekdays:"=?",bcShowMonthTitles:"=?",bcDayTemplate:"@?",bcDateFormat:"@?"},link:e,templateUrl:i["default"],controller:c.CalendarController,controllerAs:"$ctrl"};return a}Object.defineProperty(t,"__esModule",{value:!0}),t.bcCalendarDirective=r;var c=a(5),o=a(6),i=n(o),l=a(7),s=n(l),d=a(8),u=n(d),y=a(9),h=n(y),b=a(10),f=n(b)},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.CalendarController=function(){function e(t,n,r){"ngInject";a(this,e),this.$templateCache=t,this.bcCalendarConfig=n,this.bcCalendarService=r,this._activate()}return e.$inject=["$templateCache","bcCalendarConfig","bcCalendarService"],n(e,[{key:"_activate",value:function(){if(this.today=moment(new Date).startOf("day"),this.startDate=this.bcStartDate||this.bcCalendarConfig.startDate,this.bcEndDate?this.days=this.bcCalendarService.durationInDays(this.startDate,this.bcEndDate):this.days=parseInt(this.bcDays||this.bcCalendarConfig.days,10),this.nestingDepth=this.bcNestingDepth||this.bcCalendarConfig.nestingDepth,this.weekdays=this.bcDayTitleFormat?this.bcCalendarConfig.weekdayStyle[this.bcDayTitleFormat]:this.bcCalendarConfig.weekdayStyle[this.bcCalendarConfig.dayTitleFormat],this.monthTitleFormat=this.bcMonthTitleFormat||this.bcCalendarConfig.monthTitleFormat,this.showMonthTitles="boolean"==typeof this.bcShowMonthTitles?this.bcShowMonthTitles:this.bcCalendarConfig.showMonthTitles,this.selectedDate=null,this.showWeekdays="boolean"==typeof this.bcShowWeekdays?this.bcShowWeekdays:this.bcCalendarConfig.showWeekdays,this.bcDayTemplate||this.bcCalendarConfig.userDayTemplate){var e="userDayTemplate.html";this.bcDayTemplate&&this.$templateCache.put(e,this.bcDayTemplate),this.bcCalendarConfig.userDayTemplate&&this.$templateCache.put(e,this.bcCalendarConfig.userDayTemplate),this.bcCalendarService.storeDayTemplate(e)}else this.bcCalendarService.storeDayTemplate(this.bcCalendarConfig.dayTemplate);this.dateFormat=this.bcDateFormat||this.bcCalendarConfig.dateFormat;var t=this.bcCalendarService.buildDays(this.days,this.startDate);this._buildCalendar(t,this.nestingDepth)}},{key:"isBeforeToday",value:function(e){return this.bcCalendarService.dateIsBeforeToday(e)}},{key:"isDayToday",value:function(e){return this.bcCalendarService.isDayToday(e,this.startDate)}},{key:"selectDate",value:function(e){this.selectedDate=e,e.date&&this.bcDateSelected&&this.bcDateSelected({date:e.date})}},{key:"formatDate",value:function(e,t){return!!e&&moment(e).format(t)}},{key:"_buildCalendar",value:function(e,t){"month"===t?this.bcCollection=this.bcCalendarService.organizeMonths(e):"week"===t?this.bcCollection=this.bcCalendarService.organizeWeeks(e):"day"===t&&(this.bcCollection=e)}}]),e}()},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/calendar.html",n='<section class=bc-calendar> <span class=bc-calendar__weekdays data-ng-if="$ctrl.showWeekdays && $ctrl.nestingDepth === \'week\'"> <span class="bc-calendar__day bc-calendar__day--weekdays" data-ng-repeat="day in $ctrl.weekdays track by $index"> <strong class=bc-calendar__day-title> {{ day }} </strong> </span> </span> <bc-year data-ng-if="$ctrl.nestingDepth === \'year\'" class=bc-calendar__year-wrapper bc-collection=$ctrl.bcCollection></bc-year> <bc-month data-ng-if="$ctrl.nestingDepth === \'month\'" class=bc-calendar__month-wrapper bc-collection=$ctrl.bcCollection></bc-month> <bc-week data-ng-if="$ctrl.nestingDepth === \'week\'" class=bc-calendar__week-wrapper bc-collection=$ctrl.bcCollection></bc-week> <bc-day data-ng-if="$ctrl.nestingDepth === \'day\'" class=bc-calendar__day-wrapper bc-collection=$ctrl.bcCollection></bc-day> </section>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/year.html",n='<div class=bc-calendar__year data-ng-repeat="year in vm.bcCollection track by $index"> <bc-month bc-collection=year bc-weeks-header=$ctrl.weekdaysHeader class=bc-calendar__month-wrapper></bc-month> </div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/month.html",n='<time class=bc-calendar__month datetime="{{ month[0][month[0].length - 1].date | date:\'yyyy-MM\' }}" data-ng-repeat="month in vm.bcCollection track by $index"> <span class=bc-calendar__month-title data-ng-bind="$ctrl.formatDate(month[0][month[0].length - 1].date, $ctrl.monthTitleFormat)" data-ng-if=$ctrl.showMonthTitles></span> <span class=bc-calendar__weekdays data-ng-if=$ctrl.showWeekdays> <span class="bc-calendar__day bc-calendar__day--weekdays" data-ng-repeat="day in $ctrl.weekdays track by $index"> <strong class=bc-calendar__day-title> {{ day }} </strong> </span> </span> <bc-week bc-collection=month class=bc-calendar__week-wrapper></bc-week> </time>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/week.html",n='<time class=bc-calendar__week datetime="{{ week[week.length - 1].date | date:\'yyyy-ww\' }}" data-ng-repeat="week in vm.bcCollection track by $index"> <bc-day bc-collection=week class=bc-calendar__day-wrapper></bc-day> </time>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/day.html",n="<span class=bc-calendar__day data-ng-class=\"{ 'bc-calendar__day--disabled': $ctrl.isBeforeToday(day.date),\n                   'bc-calendar__day--today': $ctrl.isDayToday(day.date),\n                   'bc-calendar__day--even': $even,\n                   'bc-calendar__day--odd': $odd,\n                   'bc-calendar__day--pad': !day.date,\n                   'bc-calendar__day--valid': day.date,\n                   'bc-calendar__day--selected': day.date === $ctrl.selectedDate.date }\" data-ng-click=$ctrl.selectDate(day) data-ng-repeat=\"day in vm.bcCollection track by $index\" title=day.date> <ng-include src=vm.dayTemplate></ng-include> </span>";window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";var e={restrict:"E",scope:{},bindToController:{bcCollection:"="},templateUrl:o["default"],controller:function(){},controllerAs:"vm"};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.bcYearDirective=r;var c=a(7),o=n(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";var e={restrict:"E",scope:{},bindToController:{bcCollection:"=",bcWeekdaysHeader:"="},templateUrl:o["default"],controller:function(){},controllerAs:"vm"};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.bcMonthDirective=r;var c=a(8),o=n(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";var e={restrict:"E",scope:{},bindToController:{bcCollection:"="},templateUrl:o["default"],controller:function(){},controllerAs:"vm"};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.bcWeekDirective=r;var c=a(9),o=n(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){"ngInject";var t={restrict:"E",scope:{},bindToController:{bcCollection:"="},templateUrl:o["default"],controller:["bcCalendarService",function(e){this.dayTemplate=e.getDayTemplate()}],controllerAs:"vm"};return t}r.$inject=["bcCalendarConfig"],Object.defineProperty(t,"__esModule",{value:!0}),t.bcDayDirective=r;var c=a(10),o=n(c)}])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uPzVjYTYiLCJ3ZWJwYWNrOi8vL2FuZ3VsYXItanNvbi1jYWxlbmRhci5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGYyYTk4MjU5YmQwNTE4MTljZTk2PzNjOGEiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzPzk1NTIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyLnByb3ZpZGVyLmpzPzQ2YjAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RlbXBsYXRlcy9kYXkuaW5uZXIuaHRtbD9lYzZmIiwid2VicGFjazovLy8uL3NyYy9jYWxlbmRhci5zZXJ2aWNlLmpzPzI2MzkiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyLmRpcmVjdGl2ZS5qcz8xNGU3Iiwid2VicGFjazovLy8uL3NyYy9jYWxlbmRhci5jb250cm9sbGVyLmpzPzNlYjgiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RlbXBsYXRlcy9jYWxlbmRhci5odG1sPzIxNDQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RlbXBsYXRlcy95ZWFyLmh0bWw/NTc1OSIsIndlYnBhY2s6Ly8vLi9zcmMvdGVtcGxhdGVzL21vbnRoLmh0bWw/ZWY2MSIsIndlYnBhY2s6Ly8vLi9zcmMvdGVtcGxhdGVzL3dlZWsuaHRtbD80ODA3Iiwid2VicGFjazovLy8uL3NyYy90ZW1wbGF0ZXMvZGF5Lmh0bWw/OTMwNiIsIndlYnBhY2s6Ly8vLi9zcmMveWVhci5kaXJlY3RpdmUuanM/Mjk5YyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9udGguZGlyZWN0aXZlLmpzPzRkN2QiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlZWsuZGlyZWN0aXZlLmpzP2ViNWYiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RheS5kaXJlY3RpdmUuanM/YTNjMSJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX2NhbGVuZGFyIiwiX2NhbGVuZGFyMiIsIl9jYWxlbmRhcjMiLCJfeWVhciIsIl9tb250aCIsIl93ZWVrIiwiX2RheSIsImFuZ3VsYXIiLCJwcm92aWRlciIsImJjQ2FsZW5kYXJDb25maWciLCJzZXJ2aWNlIiwiYmNDYWxlbmRhclNlcnZpY2UiLCJkaXJlY3RpdmUiLCJiY0NhbGVuZGFyRGlyZWN0aXZlIiwiYmNZZWFyRGlyZWN0aXZlIiwiYmNNb250aERpcmVjdGl2ZSIsImJjV2Vla0RpcmVjdGl2ZSIsImJjRGF5RGlyZWN0aXZlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsInVuZGVmaW5lZCIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX2RheUlubmVyIiwiX2RheUlubmVyMiIsIl90aGlzIiwic3RhcnREYXRlIiwibW9tZW50IiwiRGF0ZSIsInN0YXJ0T2YiLCJmb3JtYXQiLCJuZXN0aW5nRGVwdGgiLCJkYXlzIiwid2Vla2RheVN0eWxlIiwibGV0dGVyIiwiYWJicmV2aWF0aW9uIiwid29yZCIsImRheVRpdGxlRm9ybWF0Iiwic2hvd1dlZWtkYXlzIiwiZGF5VGVtcGxhdGUiLCJzZXREYXlUZW1wbGF0ZSIsInRlbXBsYXRlIiwidXNlckRheVRlbXBsYXRlIiwiZGF0ZUZvcm1hdCIsIm1vbnRoVGl0bGVGb3JtYXQiLCJzaG93TW9udGhUaXRsZXMiLCJwYXRoIiwiaHRtbCIsIndpbmRvdyIsInJ1biIsInB1dCIsIldFRUtfTEVOR1RIIiwiZGF0ZSIsInRvZGF5IiwiaXNCZWZvcmUiLCJkYXRlMiIsImFyZ3VtZW50cyIsImlzU2FtZSIsImNvdW50IiwicHVzaCIsInBhZCIsIm1pc3NpbmdEYXlzIiwiaW50ZWdlclRvQXJyYXkiLCJkYXkiLCJzdWJ0cmFjdGlvbiIsInBhcnNlSW50IiwicHJldmlvdXMiLCJzdWJ0cmFjdCIsInRvSVNPU3RyaW5nIiwidW5zaGlmdCIsImNvbGxlY3Rpb24iLCJkaXJlY3Rpb24iLCJjb25jYXQiLCJncm91cCIsImdyb3Vwc2l6ZSIsInNldHMiLCJjaHVua3MiLCJzcGxpY2UiLCJzdGFydCIsImVuZCIsIm5ld1N0YXJ0IiwibmV3RW5kIiwiYWRkIiwiZGlmZiIsImZpcnN0RGF5IiwibGFzdERheSIsIlNBVFVSREFZIiwiU1VOREFZIiwicGFkQmxhbmtUaWxlcyIsImNodW5rIiwiYWxsRGF5cyIsImNhbGVuZGFyIiwibW9udGgiLCJkYXlPZk1vbnRoIiwiZGF5c0luTW9udGgiLCJzbGljZSIsInBhZERheXNMZWZ0IiwibGltaXQiLCJjb3VudGVyIiwibGlua0Z1bmN0aW9uIiwiJHNjb3BlIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCIkY3RybCIsImdldFRlbXBsYXRlVXJsIiwidGVtcGxhdGVzIiwieWVhciIsIl95ZWFyMiIsIl9tb250aDIiLCJ3ZWVrIiwiX3dlZWsyIiwiX2RheTIiLCJyZXN0cmljdCIsInNjb3BlIiwiYmluZFRvQ29udHJvbGxlciIsImJjU3RhcnREYXRlIiwiYmNFbmREYXRlIiwiYmNOZXN0aW5nRGVwdGgiLCJiY0RheXMiLCJiY0RheVRpdGxlRm9ybWF0IiwiYmNNb250aFRpdGxlRm9ybWF0IiwiYmNEYXRlU2VsZWN0ZWQiLCJiY1Nob3dXZWVrZGF5cyIsImJjU2hvd01vbnRoVGl0bGVzIiwiYmNEYXlUZW1wbGF0ZSIsImJjRGF0ZUZvcm1hdCIsImxpbmsiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJDYWxlbmRhckNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCIkdGVtcGxhdGVDYWNoZSIsIl9hY3RpdmF0ZSIsIiRpbmplY3QiLCJkdXJhdGlvbkluRGF5cyIsIndlZWtkYXlzIiwic2VsZWN0ZWREYXRlIiwidGVtcGxhdGVMb2NhdGlvbiIsInN0b3JlRGF5VGVtcGxhdGUiLCJidWlsZERheXMiLCJfYnVpbGRDYWxlbmRhciIsImRhdGVJc0JlZm9yZVRvZGF5IiwiaXNEYXlUb2RheSIsImRlcHRoIiwiYmNDb2xsZWN0aW9uIiwib3JnYW5pemVNb250aHMiLCJvcmdhbml6ZVdlZWtzIiwiYmNXZWVrZGF5c0hlYWRlciIsImdldERheVRlbXBsYXRlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGdCQUFBQyxVQUFBLGdCQUFBQyxRQUNBQSxPQUFBRCxRQUFBRCxJQUNBLGtCQUFBRyxnQkFBQUMsSUFDQUQsT0FBQSwyQkFBQUgsR0FDQSxnQkFBQUMsU0FDQUEsUUFBQSx5QkFBQUQsSUFFQUQsRUFBQSx5QkFBQUMsS0FDQ0ssS0FBQSxXQUNELE1DQWdCLFVBQVVDLEdDTjFCLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBUCxPQUdBLElBQUFDLEdBQUFPLEVBQUFELElBQ0FQLFdBQ0FTLEdBQUFGLEVBQ0FHLFFBQUEsRUFVQSxPQU5BTCxHQUFBRSxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUyxRQUFBLEVBR0FULEVBQUFELFFBdkJBLEdBQUFRLEtBcUNBLE9BVEFGLEdBQUFNLEVBQUFQLEVBR0FDLEVBQUFPLEVBQUFMLEVBR0FGLEVBQUFRLEVBQUEsR0FHQVIsRUFBQSxLRGdCTSxTQUFTTCxFQUFRRCxFQUFTTSxHRXREaEMsWUFFQVMsUUFBT0MsZUFBZWhCLEVBQVMsY0FDM0JpQixPQUFPLEdBSFgsSUFBQUMsR0FBQVos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SixtQkFFekNsQixhQUFjLEtBR2xCLE9BQU94SSxHaEI0NUJWSyxFQUFlc0ksU0FBVyxvQmdCajdCM0IxSixPQUFPQyxlQUFlaEIsRUFBUyxjQUMzQmlCLE9BQU8sSUFFWGpCLEVBSGdCbUMsZ0JBRmhCLElBQUFYLEdBQUFsQixFQUFBLElBU0k2SSxFQUFRL0csRUFBdUJaIiwiZmlsZSI6ImFuZ3VsYXItanNvbi1jYWxlbmRhci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImFuZ3VsYXItanNvbi1jYWxlbmRhclwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJhbmd1bGFyLWpzb24tY2FsZW5kYXJcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiYW5ndWxhci1qc29uLWNhbGVuZGFyXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uXG4gKiovIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJhbmd1bGFyLWpzb24tY2FsZW5kYXJcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYW5ndWxhci1qc29uLWNhbGVuZGFyXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImFuZ3VsYXItanNvbi1jYWxlbmRhclwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY2FsZW5kYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9jYWxlbmRhcjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9jYWxlbmRhcjMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF95ZWFyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX21vbnRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX3dlZWsgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdHZhciBfZGF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBhbmd1bGFyLm1vZHVsZSgnYmMuSnNvbkNhbGVuZGFyJywgW10pLnByb3ZpZGVyKCdiY0NhbGVuZGFyQ29uZmlnJywgX2NhbGVuZGFyLmJjQ2FsZW5kYXJDb25maWcpLnNlcnZpY2UoJ2JjQ2FsZW5kYXJTZXJ2aWNlJywgX2NhbGVuZGFyMi5iY0NhbGVuZGFyU2VydmljZSkuZGlyZWN0aXZlKCdiY0NhbGVuZGFyJywgX2NhbGVuZGFyMy5iY0NhbGVuZGFyRGlyZWN0aXZlKS5kaXJlY3RpdmUoJ2JjWWVhcicsIF95ZWFyLmJjWWVhckRpcmVjdGl2ZSkuZGlyZWN0aXZlKCdiY01vbnRoJywgX21vbnRoLmJjTW9udGhEaXJlY3RpdmUpLmRpcmVjdGl2ZSgnYmNXZWVrJywgX3dlZWsuYmNXZWVrRGlyZWN0aXZlKS5kaXJlY3RpdmUoJ2JjRGF5JywgX2RheS5iY0RheURpcmVjdGl2ZSk7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmJjQ2FsZW5kYXJDb25maWcgPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9kYXlJbm5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2RheUlubmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RheUlubmVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0dmFyIGJjQ2FsZW5kYXJDb25maWcgPSBleHBvcnRzLmJjQ2FsZW5kYXJDb25maWcgPSBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgLy8gRGVmaW5lIGRlZmF1bHRzXG5cdCAgICBmdW5jdGlvbiBiY0NhbGVuZGFyQ29uZmlnKCkge1xuXHQgICAgICAgICduZ0luamVjdCc7XG5cdFxuXHQgICAgICAgIC8vIFRoZSBjYWxlbmRhciB3aWxsIGJlZ2luIHdpdGggdG9kYXlcblx0XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIGJjQ2FsZW5kYXJDb25maWcpO1xuXHRcblx0ICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IG1vbWVudChuZXcgRGF0ZSgpKS5zdGFydE9mKCdkYXknKS5mb3JtYXQoKTtcblx0XG5cdCAgICAgICAgLy8gVGhlIGRlZmF1bHQgaW50ZXJ2YWwgdHlwZSBbZGF5fHdlZWt8bW9udGhdXG5cdCAgICAgICAgdGhpcy5uZXN0aW5nRGVwdGggPSAnbW9udGgnO1xuXHRcblx0ICAgICAgICAvLyBIb3cgbWFueSBkYXlzIHNob3VsZCBiZSBnZW5lcmF0ZWRcblx0ICAgICAgICB0aGlzLmRheXMgPSAzMDtcblx0XG5cdCAgICAgICAgLy8gRGVmaW5lIHRoZSBkaWZmZXJlbnQgcG9zc2libGUgcmVwcmVzZW50YXRpb25zIG9mIHRoZSB3ZWVrZGF5XG5cdCAgICAgICAgdGhpcy53ZWVrZGF5U3R5bGUgPSB7XG5cdCAgICAgICAgICAgIGxldHRlcjogWydTJywgJ00nLCAnVCcsICdXJywgJ1QnLCAnRicsICdTJ10sXG5cdCAgICAgICAgICAgIGFiYnJldmlhdGlvbjogWydTdW4nLCAnTW9uJywgJ1R1ZScsICdXZWQnLCAnVGh1cicsICdGcmknLCAnU2F0J10sXG5cdCAgICAgICAgICAgIHdvcmQ6IFsnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknXVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIC8vIFNldCB0aGUgZGVmYXVsdCB3b3JkIHR5cGUgKE0gdnMgTW9uIHZzIE1vbmRheSlcblx0ICAgICAgICB0aGlzLmRheVRpdGxlRm9ybWF0ID0gJ2FiYnJldmlhdGlvbic7XG5cdFxuXHQgICAgICAgIC8vIFNob3VsZCB0aGUgY2FsZW5kYXIgc2hvdyB0aGUgd2Vla2RheSBuYW1lcyBhYm92ZSBlYWNoIGNvbHVtbj9cblx0ICAgICAgICB0aGlzLnNob3dXZWVrZGF5cyA9IHRydWU7XG5cdFxuXHQgICAgICAgIC8vIERlZmluZSB0aGUgZGVmYXVsdCB0ZW1wbGF0ZSBmb3IgYSBkYXlcblx0ICAgICAgICB0aGlzLmRheVRlbXBsYXRlID0gX2RheUlubmVyMi5kZWZhdWx0O1xuXHRcblx0ICAgICAgICAvLyBBbGxvdyB0aGUgdXNlciB0byBzZXQgYSBjdXN0b20gdGVtcGxhdGVcblx0ICAgICAgICB0aGlzLnNldERheVRlbXBsYXRlID0gZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG5cdCAgICAgICAgICAgIF90aGlzLnVzZXJEYXlUZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIC8vIERlZmluZSB0aGUgZGVmYXVsdCBmb3JtYXQgZm9yIGEgZGF5XG5cdCAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gJ0QnO1xuXHRcblx0ICAgICAgICAvLyBEZWZpbmUgdGhlIGRlZmF1bHQgZm9ybWF0IGZvciBhIG1vbnRoIHRpdGxlXG5cdCAgICAgICAgdGhpcy5tb250aFRpdGxlRm9ybWF0ID0gJ01NTU0nO1xuXHRcblx0ICAgICAgICAvLyBTaG91bGQgbW9udGggdGl0bGVzIGJlIHNob3duIGJ5IGRlZmF1bHQ/XG5cdCAgICAgICAgdGhpcy5zaG93TW9udGhUaXRsZXMgPSB0cnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhiY0NhbGVuZGFyQ29uZmlnLCBbe1xuXHQgICAgICAgIGtleTogJyRnZXQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAkZ2V0KCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIGJjQ2FsZW5kYXJDb25maWc7XG5cdH0oKTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBwYXRoID0gJy9Vc2Vycy9iYy9Db2RlL29wZW4tc291cmNlL2FuZ3VsYXItanNvbi1jYWxlbmRhci9zcmMvdGVtcGxhdGVzL2RheS5pbm5lci5odG1sJztcblx0dmFyIGh0bWwgPSBcIjx0aW1lIGRhdGV0aW1lPVxcXCJ7eyBkYXkuZGF0ZSB8IGRhdGU6J3l5eXktTU0tZGQnIH19XFxcIiBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5LXRpbWUgdGl0bGU9XFxcInt7IGRheS5kYXRlIH19XFxcIiBkYXRhLW5nLWlmPWRheS5kYXRlPiA8c3BhbiBkYXRhLW5nLWJpbmQ9XFxcIiRjdHJsLmZvcm1hdERhdGUoZGF5LmRhdGUsICRjdHJsLmRhdGVGb3JtYXQpXFxcIj48L3NwYW4+IDwvdGltZT5cIjtcblx0d2luZG93LmFuZ3VsYXIubW9kdWxlKCduZycpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oYykgeyBjLnB1dChwYXRoLCBodG1sKSB9XSk7XG5cdG1vZHVsZS5leHBvcnRzID0gcGF0aDtcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBiY0NhbGVuZGFyU2VydmljZSA9IGV4cG9ydHMuYmNDYWxlbmRhclNlcnZpY2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBiY0NhbGVuZGFyU2VydmljZSgpIHtcblx0ICAgICAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgYmNDYWxlbmRhclNlcnZpY2UpO1xuXHRcblx0ICAgICAgICB0aGlzLldFRUtfTEVOR1RIID0gNztcblx0ICAgICAgICB0aGlzLmRheVRlbXBsYXRlO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBkYXkgaXMgcHJpb3IgdG8gdGhlIGN1cnJlbnQgZGF0ZVxuXHQgICAgICogVGhpcyBpcyB1c2VkIHRvIGRpc2FibGUgdGhlIHVuc2VsZWN0YWJsZSBkYXlzXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGVcblx0ICAgICAqIEByZXR1cm4ge0Jvb2x9IGlzQmVmb3JlXG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKGJjQ2FsZW5kYXJTZXJ2aWNlLCBbe1xuXHQgICAgICAgIGtleTogJ2RhdGVJc0JlZm9yZVRvZGF5Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGF0ZUlzQmVmb3JlVG9kYXkoZGF0ZSkge1xuXHQgICAgICAgICAgICB2YXIgdG9kYXkgPSBtb21lbnQobmV3IERhdGUoKSkuc3RhcnRPZignZGF5JykuZm9ybWF0KCk7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmlzQmVmb3JlKHRvZGF5KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENoZWNrIHRvIHNlZSBpZiB0aGUgZGF5IG1hdGNoZXMgdGhlIGN1cnJlbnQgZGF0ZVxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGVcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZTJcblx0ICAgICAgICAgKiBAcmV0dXJuIHtCb29sfSBpc1RvZGF5XG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2lzRGF5VG9kYXknLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0RheVRvZGF5KGRhdGUpIHtcblx0ICAgICAgICAgICAgdmFyIGRhdGUyID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gbW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCgpIDogYXJndW1lbnRzWzFdO1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIG1vbWVudChkYXRlKS5pc1NhbWUoZGF0ZTIpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogVHVybiBhIGludGVnZXIgKGUuZy4gJzYnKSBpbnRvIGFuIGFycmF5OiAnWzEsMiwzLDQsNSw2XSdcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gY291bnRcblx0ICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX0gZGF5c1xuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdpbnRlZ2VyVG9BcnJheScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGludGVnZXJUb0FycmF5KGNvdW50KSB7XG5cdCAgICAgICAgICAgIHZhciBpID0gdm9pZCAwO1xuXHQgICAgICAgICAgICB2YXIgZGF5cyA9IFtdO1xuXHRcblx0ICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyBpICs9IDEpIHtcblx0ICAgICAgICAgICAgICAgIGRheXMucHVzaChpKTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIGRheXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBQYWQgdGhlIGJlZ2lubmluZyBvZiBhIHdlZWtcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdGFydERhdGUgLSBkYXRlIHRvIHRvIHdvcmsgYmFjayBmcm9tXG5cdCAgICAgICAgICogQHBhcmFtIHtBcnJheX0gY291bnQgLSBob3cgbWFueSBkYXlzIHRvIHBhZFxuXHQgICAgICAgICAqIEByZXR1cm4ge0FycmF5fSBwYWRcblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAncGFkRGF5c0xlZnQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwYWREYXlzTGVmdChzdGFydERhdGUsIGNvdW50KSB7XG5cdCAgICAgICAgICAgIHZhciBwYWQgPSBbXTtcblx0ICAgICAgICAgICAgdmFyIG1pc3NpbmdEYXlzID0gdGhpcy5pbnRlZ2VyVG9BcnJheShjb3VudCk7XG5cdFxuXHQgICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggbWlzc2luZyBkYXlzXG5cdCAgICAgICAgICAgIGZvciAodmFyIGRheSBpbiBtaXNzaW5nRGF5cykge1xuXHQgICAgICAgICAgICAgICAgLy8gSG93IG1hbnkgZGF5cyB0byBnbyBiYWNrXG5cdCAgICAgICAgICAgICAgICB2YXIgc3VidHJhY3Rpb24gPSBwYXJzZUludChkYXksIDEwKSArIDE7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gRmluZCB0aGF0IGRheVxuXHQgICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzID0gbW9tZW50KHN0YXJ0RGF0ZSkuc3VidHJhY3Qoc3VidHJhY3Rpb24sICdkYXlzJykudG9JU09TdHJpbmcoKTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBBZGQgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcblx0ICAgICAgICAgICAgICAgIHBhZC51bnNoaWZ0KHtcblx0ICAgICAgICAgICAgICAgICAgICBkYXRlOiBwcmV2aW91c1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBwYWQ7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBQYWQgYSBjb2xsZWN0aW9uIHdpdGggYmxhbmsgdGlsZXNcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGNvbGxlY3Rpb25cblx0ICAgICAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IGNvdW50XG5cdCAgICAgICAgICogQHJldHVybiB7QXJyYXl9IHBhZGRlZENvbGxlY3Rpb25cblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAncGFkQmxhbmtUaWxlcycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBhZEJsYW5rVGlsZXMoY29sbGVjdGlvbiwgY291bnQpIHtcblx0ICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/ICdsZWZ0JyA6IGFyZ3VtZW50c1syXTtcblx0XG5cdCAgICAgICAgICAgIHZhciBpID0gdm9pZCAwO1xuXHQgICAgICAgICAgICB2YXIgZGF5cyA9IFtdO1xuXHRcblx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGFycmF5XG5cdCAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSArPSAxKSB7XG5cdCAgICAgICAgICAgICAgICBkYXlzLnB1c2goe1xuXHQgICAgICAgICAgICAgICAgICAgIGRhdGU6IG51bGxcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAvLyBJZiBkaXJlY3Rpb24gaXMgJ3JpZ2h0J1xuXHQgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBwYWQgdGhlIGVuZFxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb24uY29uY2F0KGRheXMpO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgcGFkIHRoZSBiZWdpbm5pbmdcblx0ICAgICAgICAgICAgICAgIHJldHVybiBkYXlzLmNvbmNhdChjb2xsZWN0aW9uKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogU3BsaXQgYW4gYXJyYXkgaW50byBjaHVua3MgYW5kIHJldHVybiBhbiBhcnJheSBvZiB0aGVzZSBjaHVua3Ncblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGdyb3VwXG5cdCAgICAgICAgICogQHBhcmFtIHtJbnRlZ2VyfSBncm91cHNpemUgLSBDaHVuayBzaXplLiBEZWZhdWx0cyB0byA3IChvbmUgd2VlaykuXG5cdCAgICAgICAgICogQHJldHVybiB7QXJyYXl9IGNodW5rc1xuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjaHVuaycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNodW5rKGdyb3VwKSB7XG5cdCAgICAgICAgICAgIHZhciBncm91cHNpemUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB0aGlzLldFRUtfTEVOR1RIIDogYXJndW1lbnRzWzFdO1xuXHRcblx0ICAgICAgICAgICAgdmFyIHNldHMgPSBbXTtcblx0ICAgICAgICAgICAgdmFyIGkgPSAwO1xuXHQgICAgICAgICAgICB2YXIgY2h1bmtzID0gZ3JvdXAubGVuZ3RoIC8gcGFyc2VJbnQoZ3JvdXBzaXplLCAxMCk7XG5cdFxuXHQgICAgICAgICAgICB3aGlsZSAoaSA8IGNodW5rcykge1xuXHQgICAgICAgICAgICAgICAgc2V0c1tpXSA9IGdyb3VwLnNwbGljZSgwLCBncm91cHNpemUpO1xuXHQgICAgICAgICAgICAgICAgaSA9IGkgKyAxO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gc2V0cztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIEdldCB0aGUgZHVyYXRpb24gaW4gZGF5cyBiZXR3ZWVuIHR3byBkYXRlcyBJTkNMVURJTkcgYm90aCBkYXRlc1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXJ0XG5cdCAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGVuZFxuXHQgICAgICAgICAqIEByZXR1cm4ge0ludGVnZXJ9IGRheXNcblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZHVyYXRpb25JbkRheXMnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkdXJhdGlvbkluRGF5cyhzdGFydCwgZW5kKSB7XG5cdCAgICAgICAgICAgIHZhciBuZXdTdGFydCA9IG1vbWVudChzdGFydCkuc3RhcnRPZignZGF5Jyk7XG5cdCAgICAgICAgICAgIC8vIEFkZCBhIGRheSBzbyB0aGUgZW5kIGRhdGUgaXMgaW5jbHVkZWQgaW4gdGhlIGNhbGN1bGF0aW9uXG5cdCAgICAgICAgICAgIHZhciBuZXdFbmQgPSBtb21lbnQoZW5kKS5zdGFydE9mKCdkYXknKS5hZGQoMSwgJ2RheXMnKTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBuZXdFbmQuZGlmZihuZXdTdGFydCwgJ2RheXMnKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIE9yZ2FuaXplIGEgY29sbGVjdGlvbiBvZiBkYXlzIGludG8gc3ViIGNvbGxlY3Rpb25zIG9mIHdlZWtzXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBkYXlzIC0gYXJyYXkgb2YgZGF5c1xuXHQgICAgICAgICAqIEByZXR1cm4ge0FycmF5fSBjb2xsZWN0aW9uXG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ29yZ2FuaXplV2Vla3MnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcmdhbml6ZVdlZWtzKGRheXMpIHtcblx0ICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBkYXkgb2YgdGhlIHdlZWsgdGhhdCB0aGUgY2FsZW5kYXIgc3RhcnRzIGFuZCBlbmRzIG9uXG5cdCAgICAgICAgICAgIHZhciBmaXJzdERheSA9IG1vbWVudChkYXlzWzBdLmRhdGUpLmRheSgpO1xuXHQgICAgICAgICAgICB2YXIgbGFzdERheSA9IG1vbWVudChkYXlzW2RheXMubGVuZ3RoIC0gMV0uZGF0ZSkuZGF5KCk7XG5cdCAgICAgICAgICAgIHZhciBTQVRVUkRBWSA9IDY7XG5cdCAgICAgICAgICAgIHZhciBTVU5EQVkgPSAwO1xuXHRcblx0ICAgICAgICAgICAgLy8gSWYgdGhlIGZpcnN0IGRheSBpcyBhZnRlciBTdW5kYXlcblx0ICAgICAgICAgICAgaWYgKGZpcnN0RGF5ID4gU1VOREFZKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBQYWQgd2l0aCBibGFuayB0aWxlcyBzbyB0aGUgZmlyc3QgZGF5IGlzIGxpbmVkIHVwIGluIHRoZSBjb3JyZWN0IHdlZWtkYXkgY29sdW1uXG5cdCAgICAgICAgICAgICAgICBkYXlzID0gdGhpcy5wYWRCbGFua1RpbGVzKGRheXMsIGZpcnN0RGF5LCAnbGVmdCcpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAvLyBJZiB0aGUgbGFzdCBkYXkgaXMgYmVmb3JlIFNhdHVyZGF5XG5cdCAgICAgICAgICAgIGlmIChsYXN0RGF5IDwgU0FUVVJEQVkpIHtcblx0ICAgICAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoYXQgdGhlIGxhc3Qgd2VlaydzIGRheXMgYXJlIGluIHRoZSBjb3JyZWN0IHdlZWtkYXkgY29sdW1uXG5cdCAgICAgICAgICAgICAgICBkYXlzID0gdGhpcy5wYWRCbGFua1RpbGVzKGRheXMsIHRoaXMuV0VFS19MRU5HVEggLSAobGFzdERheSArIDEpLCAncmlnaHQnKTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2h1bmsoZGF5cyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBPcmdhbml6ZSBieSBtb250aFxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYWxsRGF5cyAtIEFuIGFycmF5IG9mIGFsbCBkYXlzXG5cdCAgICAgICAgICogQHJldHVybiB7QXJyYXl9IGNvbGxlY3Rpb24gLSBkYXlzIG9yZ2FuaXplZCBpbnRvIHdlZWtzIGFuZCBtb250aHNcblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnb3JnYW5pemVNb250aHMnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcmdhbml6ZU1vbnRocyhhbGxEYXlzKSB7XG5cdCAgICAgICAgICAgIHZhciBjYWxlbmRhciA9IFtdO1xuXHQgICAgICAgICAgICB2YXIgU0FUVVJEQVkgPSA2O1xuXHQgICAgICAgICAgICB2YXIgU1VOREFZID0gMDtcblx0ICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBhbGxEYXlzO1xuXHQgICAgICAgICAgICB2YXIgbW9udGggPSB2b2lkIDA7XG5cdCAgICAgICAgICAgIHZhciBkYXlPZk1vbnRoID0gbW9tZW50KGNvbGxlY3Rpb25bMF0uZGF0ZSkuZGF0ZSgpO1xuXHQgICAgICAgICAgICB2YXIgZGF5c0luTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXlzSW5Nb250aCgpO1xuXHRcblx0ICAgICAgICAgICAgLy8gUGFkIHRoZSBiZWdpbm5pbmcgb2YgdGhlIG1vbnRoIHdpdGggYW55IG1pc3NpbmcgZGF5c1xuXHQgICAgICAgICAgICAvLyBJZiB0aGUgZmlyc3QgZGF5IGlzIG5vdCB0aGUgZmlyc3QgZGF5IG9mIHRoZSBtb250aFxuXHQgICAgICAgICAgICBpZiAobW9tZW50KGNvbGxlY3Rpb25bMF0uZGF0ZSkuZGF0ZSgpID4gMCkge1xuXHQgICAgICAgICAgICAgICAgLy8gUHVsbCB0aGlzIG1vbnRoJ3MgZGF5cyBmcm9tIHRoZSBjb2xsZWN0aW9uXG5cdCAgICAgICAgICAgICAgICBtb250aCA9IGNvbGxlY3Rpb24uc2xpY2UoMCwgZGF5c0luTW9udGggLSAoZGF5T2ZNb250aCAtIDEpKTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBGaWxsIHRoZSBtaXNzaW5nIGRheXMgZnJvbSB0aGUgbW9udGhcblx0ICAgICAgICAgICAgICAgIHZhciBwYWQgPSB0aGlzLnBhZERheXNMZWZ0KG1vbnRoWzBdLmRhdGUsIGRheU9mTW9udGggLSAxKTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBDb21iaW5lIHdpdGggdGhlIGV4aXN0aW5nIGFycmF5XG5cdCAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gcGFkLmNvbmNhdChjb2xsZWN0aW9uKTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgLy8gU3BsaXQgaW50byBtb250aHNcblx0ICAgICAgICAgICAgLy8gQXMgbG9uZyBhcyB0aGVyZSBhcmUgZGF5cyBsZWZ0IGluIHRoZSBjb2xsZWN0aW9uXG5cdCAgICAgICAgICAgIHdoaWxlIChjb2xsZWN0aW9uLmxlbmd0aCA+IDApIHtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGRheSBvZiB0aGUgbW9udGggZm9yIHRoZSBmaXJzdCBkYXRlIG9mIHRoZSBjb2xsZWN0aW9uIGVnLiAnMjQnXG5cdCAgICAgICAgICAgICAgICBkYXlPZk1vbnRoID0gbW9tZW50KGNvbGxlY3Rpb25bMF0uZGF0ZSkuZGF0ZSgpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBob3cgbWFueSBkYXlzIHRoZXJlIGFyZSB0aGlzIG1vbnRoICh0b3RhbClcblx0ICAgICAgICAgICAgICAgIGRheXNJbk1vbnRoID0gbW9tZW50KGNvbGxlY3Rpb25bMF0uZGF0ZSkuZGF5c0luTW9udGgoKTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBQdWxsIHRoaXMgbW9udGgncyBkYXlzIGZyb20gdGhlIGNvbGxlY3Rpb25cblx0ICAgICAgICAgICAgICAgIG1vbnRoID0gY29sbGVjdGlvbi5zcGxpY2UoMCwgZGF5c0luTW9udGggLSAoZGF5T2ZNb250aCAtIDEpKTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBIb3cgbWFueSB3ZWVrZGF5cyBhcmUgcHJpb3IgdG8gdGhlIGZpcnN0IGRheSBvZiB0aGlzIG1vbnRoP1xuXHQgICAgICAgICAgICAgICAgdmFyIGZpcnN0RGF5ID0gbW9tZW50KG1vbnRoWzBdLmRhdGUpLmRheSgpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIElmIHRoZSBmaXJzdCBkYXkgaXMgYWZ0ZXIgU3VuZGF5XG5cdCAgICAgICAgICAgICAgICBpZiAoZmlyc3REYXkgPiBTVU5EQVkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAvLyBQYWQgd2l0aCBibGFuayB0aWxlcyBzbyB0aGF0IHRoZSBmaXJzdCBkYXkgaXMgbGluZWQgdXAgaW4gdGhlIGNvcnJlY3QgY29sdW1uXG5cdCAgICAgICAgICAgICAgICAgICAgbW9udGggPSB0aGlzLnBhZEJsYW5rVGlsZXMobW9udGgsIGZpcnN0RGF5LCAnbGVmdCcpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IHdlZWtkYXlzIGFyZSBhZnRlciB0aGUgbGFzdCBkYXkgb2YgdGhlIG1vbnRoP1xuXHQgICAgICAgICAgICAgICAgLy8gKHJlbWVtYmVyOiB3ZWVrcyBhcmUgemVyby1iYXNlZClcblx0ICAgICAgICAgICAgICAgIHZhciBsYXN0RGF5ID0gbW9tZW50KG1vbnRoW21vbnRoLmxlbmd0aCAtIDFdLmRhdGUpLmRheSgpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIElmIGJsYW5rIHRpbGVzIGFyZSBuZWVkZWQgZm9yIHRoZSBsYXN0IHdlZWtcblx0ICAgICAgICAgICAgICAgIGlmIChsYXN0RGF5IDwgU0FUVVJEQVkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAvLyBQYWQgd2l0aCBibGFuayB0aWxlcyBzbyB0aGF0IHRoZSBmaXJzdCBkYXkgaXMgbGluZWQgdXAgaW4gdGhlIGNvcnJlY3QgY29sdW1uXG5cdCAgICAgICAgICAgICAgICAgICAgbW9udGggPSB0aGlzLnBhZEJsYW5rVGlsZXMobW9udGgsIHRoaXMuV0VFS19MRU5HVEggLSAobGFzdERheSArIDEpLCAncmlnaHQnKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAvLyBPcmdhbml6ZSBpbnRvIHdlZWtzIGFuZCBhZGQgdG8gdGhlIGNhbGVuZGFyIGFycmF5XG5cdCAgICAgICAgICAgICAgICBjYWxlbmRhci5wdXNoKHRoaXMuY2h1bmsobW9udGgpKTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhbGVuZGFyO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQnVpbGQgYW4gYXJyYXkgb2YgZGF5c1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtJbnRlZ2VyfSBsaW1pdCAtIGhvdyBtYW55IGRheXMgdG8gY3JlYXRlXG5cdCAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXJ0IC0gdGhlIHN0YXJ0aW5nIGRhdGVcblx0ICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX0gZGF5c1xuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdidWlsZERheXMnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZERheXMobGltaXQpIHtcblx0ICAgICAgICAgICAgdmFyIHN0YXJ0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gbmV3IERhdGUoKSA6IGFyZ3VtZW50c1sxXTtcblx0XG5cdCAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcblx0ICAgICAgICAgICAgdmFyIGRheXMgPSBbXTtcblx0ICAgICAgICAgICAgdmFyIGRheSA9IHZvaWQgMDtcblx0XG5cdCAgICAgICAgICAgIHdoaWxlIChjb3VudGVyIDwgbGltaXQpIHtcblx0ICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZGF5XG5cdCAgICAgICAgICAgICAgICBkYXkgPSBtb21lbnQoc3RhcnQpLmFkZChjb3VudGVyLCAnZGF5cycpLnRvSVNPU3RyaW5nKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gQWRkIHRvIHRoZSBhcnJheVxuXHQgICAgICAgICAgICAgICAgZGF5cy5wdXNoKHtcblx0ICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXlcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEluY3JlbWVudCB0aGUgY291bnRlclxuXHQgICAgICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXIgKyAxO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gZGF5cztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIFNldCB0aGUgaW5uZXIgZGF5IHRlbXBsYXRlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVcblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnc3RvcmVEYXlUZW1wbGF0ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3JlRGF5VGVtcGxhdGUodGVtcGxhdGUpIHtcblx0ICAgICAgICAgICAgdGhpcy5kYXlUZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogR2V0IHRoZSBpbm5lciBkYXkgdGVtcGxhdGVcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30gdGVtcGxhdGVcblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZ2V0RGF5VGVtcGxhdGUnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREYXlUZW1wbGF0ZSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF5VGVtcGxhdGU7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBiY0NhbGVuZGFyU2VydmljZTtcblx0fSgpO1xuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5iY0NhbGVuZGFyRGlyZWN0aXZlID0gYmNDYWxlbmRhckRpcmVjdGl2ZTtcblx0XG5cdHZhciBfY2FsZW5kYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9jYWxlbmRhcjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9jYWxlbmRhcjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jYWxlbmRhcjIpO1xuXHRcblx0dmFyIF95ZWFyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfeWVhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF95ZWFyKTtcblx0XG5cdHZhciBfbW9udGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9tb250aDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tb250aCk7XG5cdFxuXHR2YXIgX3dlZWsgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIF93ZWVrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dlZWspO1xuXHRcblx0dmFyIF9kYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdHZhciBfZGF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RheSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gYmNDYWxlbmRhckRpcmVjdGl2ZSgpIHtcblx0ICAgICduZ0luamVjdCc7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHBvc3NpYmxlIHRlbXBsYXRlc1xuXHRcblx0ICAgIHZhciB0ZW1wbGF0ZXMgPSB7XG5cdCAgICAgICAgeWVhcjogX3llYXIyLmRlZmF1bHQsXG5cdCAgICAgICAgbW9udGg6IF9tb250aDIuZGVmYXVsdCxcblx0ICAgICAgICB3ZWVrOiBfd2VlazIuZGVmYXVsdCxcblx0ICAgICAgICBkYXk6IF9kYXkyLmRlZmF1bHRcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIGRpcmVjdGl2ZSA9IHtcblx0ICAgICAgICByZXN0cmljdDogJ0UnLFxuXHQgICAgICAgIHNjb3BlOiB7fSxcblx0ICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG5cdCAgICAgICAgICAgIGJjU3RhcnREYXRlOiAnQD8nLCAvLyBkYXRlIC0gZGVmYXVsdCB0byB0b2RheVxuXHQgICAgICAgICAgICBiY0VuZERhdGU6ICdAPycsIC8vIGRhdGUgLSBpZiBub3QgcHJlc2VudCwgdXNlIGNyZWF0ZSB1c2luZyBiY0RheXNcblx0ICAgICAgICAgICAgYmNOZXN0aW5nRGVwdGg6ICdAPycsIC8vIHN0cmluZyBbbW9udGh8d2Vla3xkYXldIC0gZGVmYXVsdHM6IG1vbnRoXG5cdCAgICAgICAgICAgIGJjRGF5czogJ0A/JywgLy8gaW50ZWdlciAtIGRlZmF1bHQgdG8gMzAgKHVzZWQgdG8gY3JlYXRlIGJjRW5kRGF0ZSlcblx0ICAgICAgICAgICAgYmNEYXlUaXRsZUZvcm1hdDogJ0A/JywgLy8gc3RyaW5nIFt3b3JkfGFiYnJldmlhdGlvbnxsZXR0ZXJdIC0gZGVmYXVsdDogYWJicmV2aWF0aW9uXG5cdCAgICAgICAgICAgIGJjTW9udGhUaXRsZUZvcm1hdDogJ0A/JywgLy8gc3RyaW5nIC0gYW55IHZhbGlkIE1vbWVudCBkYXRlIGZvcm1hdCAtIGRlZmF1bHQ6IE1NTU1cblx0ICAgICAgICAgICAgYmNEYXRlU2VsZWN0ZWQ6ICcmJywgLy8gZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRhdGUgaXMgc2VsZWN0ZWQgKHRhcC9jbGljaylcblx0ICAgICAgICAgICAgYmNTaG93V2Vla2RheXM6ICc9PycsIC8vIGRldGVybWluZSBpZiB0aGUgd2Vla2RheXMgaGVhZGVyIHNob3VsZCBiZSBjcmVhdGVkXG5cdCAgICAgICAgICAgIGJjU2hvd01vbnRoVGl0bGVzOiAnPT8nLCAvLyBkZXRlcm1pbmUgaWYgdGhlIG1vbnRoIHRpdGxlcyBzaG91bGQgYmUgdmlzaWJsZVxuXHQgICAgICAgICAgICBiY0RheVRlbXBsYXRlOiAnQD8nLCAvLyBvdmVyd3JpdGUgdGhlIGRlZmF1bHQgJ2RheScgdGVtcGxhdGVcblx0ICAgICAgICAgICAgYmNEYXRlRm9ybWF0OiAnQD8nIH0sXG5cdCAgICAgICAgbGluazogbGlua0Z1bmN0aW9uLFxuXHQgICAgICAgIHRlbXBsYXRlVXJsOiBfY2FsZW5kYXIzLmRlZmF1bHQsXG5cdCAgICAgICAgY29udHJvbGxlcjogX2NhbGVuZGFyLkNhbGVuZGFyQ29udHJvbGxlcixcblx0ICAgICAgICBjb250cm9sbGVyQXM6ICckY3RybCdcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIExpbmtcblx0ICAgICAqL1xuXHQgICAgZnVuY3Rpb24gbGlua0Z1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJGN0cmwpIHtcblx0XG5cdCAgICAgICAgLy8gU2V0IHRoZSBjb3JyZWN0IHRlbXBsYXRlIGJhc2VkIG9uIHRoZSBkZXNpcmVkIG5lc3RpbmcgZGVwdGhcblx0ICAgICAgICAkY3RybC5nZXRUZW1wbGF0ZVVybCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlc1skY3RybC5uZXN0aW5nRGVwdGhdO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBDYWxlbmRhckNvbnRyb2xsZXIgPSBleHBvcnRzLkNhbGVuZGFyQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIENhbGVuZGFyQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHRlbXBsYXRlQ2FjaGVcIiwgXCJiY0NhbGVuZGFyQ29uZmlnXCIsIFwiYmNDYWxlbmRhclNlcnZpY2VcIl07XG5cdCAgICBmdW5jdGlvbiBDYWxlbmRhckNvbnRyb2xsZXIoJHRlbXBsYXRlQ2FjaGUsIGJjQ2FsZW5kYXJDb25maWcsIGJjQ2FsZW5kYXJTZXJ2aWNlKSB7XG5cdCAgICAgICAgJ25nSW5qZWN0Jztcblx0XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhbGVuZGFyQ29udHJvbGxlcik7XG5cdFxuXHQgICAgICAgIHRoaXMuJHRlbXBsYXRlQ2FjaGUgPSAkdGVtcGxhdGVDYWNoZTtcblx0ICAgICAgICB0aGlzLmJjQ2FsZW5kYXJDb25maWcgPSBiY0NhbGVuZGFyQ29uZmlnO1xuXHQgICAgICAgIHRoaXMuYmNDYWxlbmRhclNlcnZpY2UgPSBiY0NhbGVuZGFyU2VydmljZTtcblx0XG5cdCAgICAgICAgdGhpcy5fYWN0aXZhdGUoKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoQ2FsZW5kYXJDb250cm9sbGVyLCBbe1xuXHQgICAgICAgIGtleTogJ19hY3RpdmF0ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hY3RpdmF0ZSgpIHtcblx0ICAgICAgICAgICAgLy8gRGVmaW5lIHRvZGF5J3MgZGF0ZVxuXHQgICAgICAgICAgICB0aGlzLnRvZGF5ID0gbW9tZW50KG5ldyBEYXRlKCkpLnN0YXJ0T2YoJ2RheScpO1xuXHRcblx0ICAgICAgICAgICAgLy8gRGVmaW5lIHRoZSBzdGFydCBkYXRlIGZvciB0aGUgY2FsZW5kYXJcblx0ICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSB0aGlzLmJjU3RhcnREYXRlIHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5zdGFydERhdGU7XG5cdFxuXHQgICAgICAgICAgICAvLyBJZiB0aGUgZW5kIGRhdGUgd2FzIGRlZmluZWRcblx0ICAgICAgICAgICAgaWYgKHRoaXMuYmNFbmREYXRlKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gRGVmaW5lIGhvdyBtYW55IGRheXMgYXJlIG5lZWRlZCB1c2luZyB0aGUgZW5kIGRhdGVcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGF5cyA9IHRoaXMuYmNDYWxlbmRhclNlcnZpY2UuZHVyYXRpb25JbkRheXModGhpcy5zdGFydERhdGUsIHRoaXMuYmNFbmREYXRlKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBEZWZpbmUgaG93IG1hbnkgZGF5cyBhcmUgbmVlZGVkIGZyb20gdGhlIGNvdW50IHBhc3NlZCBpbiBvciB0aGUgY29uZmlnXG5cdCAgICAgICAgICAgICAgICB0aGlzLmRheXMgPSBwYXJzZUludCh0aGlzLmJjRGF5cyB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcuZGF5cywgMTApO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAvLyBEZWZpbmUgaG93IGRlZXAgdG8gb3JnYW5pemUgdGhlIGNhbGVuZGFyXG5cdCAgICAgICAgICAgIHRoaXMubmVzdGluZ0RlcHRoID0gdGhpcy5iY05lc3RpbmdEZXB0aCB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcubmVzdGluZ0RlcHRoO1xuXHRcblx0ICAgICAgICAgICAgLy8gRGVmaW5lIHRoZSB3ZWVrZGF5IGhlYWRlcnMgZm9ybWF0XG5cdCAgICAgICAgICAgIHRoaXMud2Vla2RheXMgPSB0aGlzLmJjRGF5VGl0bGVGb3JtYXQgPyB0aGlzLmJjQ2FsZW5kYXJDb25maWcud2Vla2RheVN0eWxlW3RoaXMuYmNEYXlUaXRsZUZvcm1hdF0gOiB0aGlzLmJjQ2FsZW5kYXJDb25maWcud2Vla2RheVN0eWxlW3RoaXMuYmNDYWxlbmRhckNvbmZpZy5kYXlUaXRsZUZvcm1hdF07XG5cdFxuXHQgICAgICAgICAgICAvLyBEZWZpbmUgdGhlIGZvcm1hdCBmb3IgdGhlIG1vbnRoIHRpdGxlXG5cdCAgICAgICAgICAgIHRoaXMubW9udGhUaXRsZUZvcm1hdCA9IHRoaXMuYmNNb250aFRpdGxlRm9ybWF0IHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5tb250aFRpdGxlRm9ybWF0O1xuXHRcblx0ICAgICAgICAgICAgLy8gRGVmaW5lIGlmIG1vbnRoIHRpdGxlcyBzaG91bGQgYmUgdmlzaWJsZVxuXHQgICAgICAgICAgICB0aGlzLnNob3dNb250aFRpdGxlcyA9IHR5cGVvZiB0aGlzLmJjU2hvd01vbnRoVGl0bGVzID09PSAnYm9vbGVhbicgPyB0aGlzLmJjU2hvd01vbnRoVGl0bGVzIDogdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnNob3dNb250aFRpdGxlcztcblx0XG5cdCAgICAgICAgICAgIC8vIEluaXRpYWxseSBubyBkYXRlIGlzIHNlbGVjdGVkXG5cdCAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gbnVsbDtcblx0XG5cdCAgICAgICAgICAgIC8vIFNldCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgY2FsZW5kYXIgd2Vla2RheXMgaGVhZGVyc1xuXHQgICAgICAgICAgICB0aGlzLnNob3dXZWVrZGF5cyA9IHR5cGVvZiB0aGlzLmJjU2hvd1dlZWtkYXlzID09PSAnYm9vbGVhbicgPyB0aGlzLmJjU2hvd1dlZWtkYXlzIDogdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnNob3dXZWVrZGF5cztcblx0XG5cdCAgICAgICAgICAgIC8vIElmIGEgY3VzdG9tIGRheSB0ZW1wbGF0ZSBoYXMgYmVlbiBzZXQgaW4gZWl0aGVyIGxvY2F0aW9uIChhdHRyaWJ1dGUgb3IgcHJvdmlkZXIpXG5cdCAgICAgICAgICAgIGlmICh0aGlzLmJjRGF5VGVtcGxhdGUgfHwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnVzZXJEYXlUZW1wbGF0ZSkge1xuXHQgICAgICAgICAgICAgICAgLy8gTmFtZSB0aGUgdGVtcGxhdGUgbG9jYXRpb25cblx0ICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUxvY2F0aW9uID0gJ3VzZXJEYXlUZW1wbGF0ZS5odG1sJztcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBzZXQgYSB0ZW1wbGF0ZSB2aWEgdGhlIGRpcmVjdGl2ZSBhdHRyaWJ1dGVcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLmJjRGF5VGVtcGxhdGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAvLyBQdXQgdGhlIHVzZXIgdGVtcGxhdGUgaW50byB0aGUgY2FjaGVcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLiR0ZW1wbGF0ZUNhY2hlLnB1dCh0ZW1wbGF0ZUxvY2F0aW9uLCB0aGlzLmJjRGF5VGVtcGxhdGUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGRlZmluZWQgYSB0ZW1wbGF0ZSB1c2luZyB0aGUgcHJvdmlkZXJcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLmJjQ2FsZW5kYXJDb25maWcudXNlckRheVRlbXBsYXRlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgLy8gUHV0IHRoZSB1c2VyIHRlbXBsYXRlIGludG8gdGhlIGNhY2hlXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy4kdGVtcGxhdGVDYWNoZS5wdXQodGVtcGxhdGVMb2NhdGlvbiwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnVzZXJEYXlUZW1wbGF0ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGlubmVyLWRheSB0ZW1wbGF0ZSBvbiB0aGUgc2VydmljZVxuXHQgICAgICAgICAgICAgICAgdGhpcy5iY0NhbGVuZGFyU2VydmljZS5zdG9yZURheVRlbXBsYXRlKHRlbXBsYXRlTG9jYXRpb24pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgLy8gTm8gY3VzdG9tIHRlbXBsYXRlIHdhcyBkZWZpbmVkXG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGlubmVyLWRheSB0ZW1wbGF0ZSBvbiB0aGUgc2VydmljZVxuXHQgICAgICAgICAgICAgICAgdGhpcy5iY0NhbGVuZGFyU2VydmljZS5zdG9yZURheVRlbXBsYXRlKHRoaXMuYmNDYWxlbmRhckNvbmZpZy5kYXlUZW1wbGF0ZSk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIC8vIERlZmluZSB0aGUgZGF0ZSBmb3JtYXQgZm9yIHRoZSBpbmRpdmlkdWFsIGRheVxuXHQgICAgICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSB0aGlzLmJjRGF0ZUZvcm1hdCB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcuZGF0ZUZvcm1hdDtcblx0XG5cdCAgICAgICAgICAgIC8vIEJ1aWxkIGFycmF5IG9mIGRheXNcblx0ICAgICAgICAgICAgdmFyIGRheXMgPSB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLmJ1aWxkRGF5cyh0aGlzLmRheXMsIHRoaXMuc3RhcnREYXRlKTtcblx0XG5cdCAgICAgICAgICAgIC8vIEJ1aWxkIHRoZSBjYWxlbmRhciBKU09OIGFuZCBleHBvc2UgdG8gdGhlIERPTVxuXHQgICAgICAgICAgICB0aGlzLl9idWlsZENhbGVuZGFyKGRheXMsIHRoaXMubmVzdGluZ0RlcHRoKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENoZWNrIHRvIHNlZSBpZiB0aGUgZGF5IGlzIHByaW9yIHRvIHRoZSBjdXJyZW50IGRhdGVcblx0ICAgICAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZGlzYWJsZSB0aGUgdW5zZWxlY3RhYmxlIGRheXNcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZVxuXHQgICAgICAgICAqIEByZXR1cm4ge0Jvb2x9XG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2lzQmVmb3JlVG9kYXknLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0JlZm9yZVRvZGF5KGRhdGUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmNDYWxlbmRhclNlcnZpY2UuZGF0ZUlzQmVmb3JlVG9kYXkoZGF0ZSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDaGVjayB0byBzZWUgaWYgdGhlIGRheSBtYXRjaGVzIHRoZSBjdXJyZW50IGRhdGVcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZVxuXHQgICAgICAgICAqIEByZXR1cm4ge0Jvb2x9XG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2lzRGF5VG9kYXknLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0RheVRvZGF5KGRhdGUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmNDYWxlbmRhclNlcnZpY2UuaXNEYXlUb2RheShkYXRlLCB0aGlzLnN0YXJ0RGF0ZSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBTZWxlY3QgYSBkYXRlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF5XG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3NlbGVjdERhdGUnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3REYXRlKGRheSkge1xuXHQgICAgICAgICAgICAvLyBTZXQgdGhlIHNlbGVjdGVkIGRheVxuXHQgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IGRheTtcblx0XG5cdCAgICAgICAgICAgIC8vIE9ubHkgY2FsbCB0aGUgcGFzc2VkIG1ldGhvZCBpZiBpdCBleGlzdHMgYW5kIGEgdmFsaWQgZGF0ZSB3YXMgY2hvc2VuXG5cdCAgICAgICAgICAgIGlmIChkYXkuZGF0ZSAmJiB0aGlzLmJjRGF0ZVNlbGVjdGVkKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmJjRGF0ZVNlbGVjdGVkKHtcblx0ICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXkuZGF0ZVxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIEZvcm1hdCBhIGRhdGUgdXNpbmcgbW9tZW50XG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVxuXHQgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb3JtYXRcblx0ICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IGZvcm1hdHRlZERhdGVcblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZm9ybWF0RGF0ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSwgZm9ybWF0KSB7XG5cdCAgICAgICAgICAgIGlmICghZGF0ZSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdChmb3JtYXQpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQnVpbGQgdGhlIGNhbGVuZGFyIEpTT05cblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGRheXNcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGVwdGhcblx0ICAgICAgICAgKiBAcmV0dXJuIHtFbGVtZW50fSBlbGVtZW50XG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ19idWlsZENhbGVuZGFyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2J1aWxkQ2FsZW5kYXIoZGF5cywgZGVwdGgpIHtcblx0XG5cdCAgICAgICAgICAgIC8vIENhbGwgdGhlIGNvcnJlY3Qgb3JnYW5pemF0aW9uIG1ldGhvZCBiYXNlZCBvbiB0aGUgbmVzdGluZyBkZXB0aFxuXHQgICAgICAgICAgICBpZiAoZGVwdGggPT09ICdtb250aCcpIHtcblx0XG5cdCAgICAgICAgICAgICAgICB0aGlzLmJjQ29sbGVjdGlvbiA9IHRoaXMuYmNDYWxlbmRhclNlcnZpY2Uub3JnYW5pemVNb250aHMoZGF5cyk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVwdGggPT09ICd3ZWVrJykge1xuXHRcblx0ICAgICAgICAgICAgICAgIHRoaXMuYmNDb2xsZWN0aW9uID0gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5vcmdhbml6ZVdlZWtzKGRheXMpO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGRlcHRoID09PSAnZGF5Jykge1xuXHRcblx0ICAgICAgICAgICAgICAgIHRoaXMuYmNDb2xsZWN0aW9uID0gZGF5cztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gQ2FsZW5kYXJDb250cm9sbGVyO1xuXHR9KCk7XG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgcGF0aCA9ICcvVXNlcnMvYmMvQ29kZS9vcGVuLXNvdXJjZS9hbmd1bGFyLWpzb24tY2FsZW5kYXIvc3JjL3RlbXBsYXRlcy9jYWxlbmRhci5odG1sJztcblx0dmFyIGh0bWwgPSBcIjxzZWN0aW9uIGNsYXNzPWJjLWNhbGVuZGFyPiA8c3BhbiBjbGFzcz1iYy1jYWxlbmRhcl9fd2Vla2RheXMgZGF0YS1uZy1pZj1cXFwiJGN0cmwuc2hvd1dlZWtkYXlzICYmICRjdHJsLm5lc3RpbmdEZXB0aCA9PT0gJ3dlZWsnXFxcIj4gPHNwYW4gY2xhc3M9XFxcImJjLWNhbGVuZGFyX19kYXkgYmMtY2FsZW5kYXJfX2RheS0td2Vla2RheXNcXFwiIGRhdGEtbmctcmVwZWF0PVxcXCJkYXkgaW4gJGN0cmwud2Vla2RheXMgdHJhY2sgYnkgJGluZGV4XFxcIj4gPHN0cm9uZyBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5LXRpdGxlPiB7eyBkYXkgfX0gPC9zdHJvbmc+IDwvc3Bhbj4gPC9zcGFuPiA8YmMteWVhciBkYXRhLW5nLWlmPVxcXCIkY3RybC5uZXN0aW5nRGVwdGggPT09ICd5ZWFyJ1xcXCIgY2xhc3M9YmMtY2FsZW5kYXJfX3llYXItd3JhcHBlciBiYy1jb2xsZWN0aW9uPSRjdHJsLmJjQ29sbGVjdGlvbj48L2JjLXllYXI+IDxiYy1tb250aCBkYXRhLW5nLWlmPVxcXCIkY3RybC5uZXN0aW5nRGVwdGggPT09ICdtb250aCdcXFwiIGNsYXNzPWJjLWNhbGVuZGFyX19tb250aC13cmFwcGVyIGJjLWNvbGxlY3Rpb249JGN0cmwuYmNDb2xsZWN0aW9uPjwvYmMtbW9udGg+IDxiYy13ZWVrIGRhdGEtbmctaWY9XFxcIiRjdHJsLm5lc3RpbmdEZXB0aCA9PT0gJ3dlZWsnXFxcIiBjbGFzcz1iYy1jYWxlbmRhcl9fd2Vlay13cmFwcGVyIGJjLWNvbGxlY3Rpb249JGN0cmwuYmNDb2xsZWN0aW9uPjwvYmMtd2Vlaz4gPGJjLWRheSBkYXRhLW5nLWlmPVxcXCIkY3RybC5uZXN0aW5nRGVwdGggPT09ICdkYXknXFxcIiBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5LXdyYXBwZXIgYmMtY29sbGVjdGlvbj0kY3RybC5iY0NvbGxlY3Rpb24+PC9iYy1kYXk+IDwvc2VjdGlvbj5cIjtcblx0d2luZG93LmFuZ3VsYXIubW9kdWxlKCduZycpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oYykgeyBjLnB1dChwYXRoLCBodG1sKSB9XSk7XG5cdG1vZHVsZS5leHBvcnRzID0gcGF0aDtcblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBwYXRoID0gJy9Vc2Vycy9iYy9Db2RlL29wZW4tc291cmNlL2FuZ3VsYXItanNvbi1jYWxlbmRhci9zcmMvdGVtcGxhdGVzL3llYXIuaHRtbCc7XG5cdHZhciBodG1sID0gXCI8ZGl2IGNsYXNzPWJjLWNhbGVuZGFyX195ZWFyIGRhdGEtbmctcmVwZWF0PVxcXCJ5ZWFyIGluIHZtLmJjQ29sbGVjdGlvbiB0cmFjayBieSAkaW5kZXhcXFwiPiA8YmMtbW9udGggYmMtY29sbGVjdGlvbj15ZWFyIGJjLXdlZWtzLWhlYWRlcj0kY3RybC53ZWVrZGF5c0hlYWRlciBjbGFzcz1iYy1jYWxlbmRhcl9fbW9udGgtd3JhcHBlcj48L2JjLW1vbnRoPiA8L2Rpdj5cIjtcblx0d2luZG93LmFuZ3VsYXIubW9kdWxlKCduZycpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oYykgeyBjLnB1dChwYXRoLCBodG1sKSB9XSk7XG5cdG1vZHVsZS5leHBvcnRzID0gcGF0aDtcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBwYXRoID0gJy9Vc2Vycy9iYy9Db2RlL29wZW4tc291cmNlL2FuZ3VsYXItanNvbi1jYWxlbmRhci9zcmMvdGVtcGxhdGVzL21vbnRoLmh0bWwnO1xuXHR2YXIgaHRtbCA9IFwiPHRpbWUgY2xhc3M9YmMtY2FsZW5kYXJfX21vbnRoIGRhdGV0aW1lPVxcXCJ7eyBtb250aFswXVttb250aFswXS5sZW5ndGggLSAxXS5kYXRlIHwgZGF0ZToneXl5eS1NTScgfX1cXFwiIGRhdGEtbmctcmVwZWF0PVxcXCJtb250aCBpbiB2bS5iY0NvbGxlY3Rpb24gdHJhY2sgYnkgJGluZGV4XFxcIj4gPHNwYW4gY2xhc3M9YmMtY2FsZW5kYXJfX21vbnRoLXRpdGxlIGRhdGEtbmctYmluZD1cXFwiJGN0cmwuZm9ybWF0RGF0ZShtb250aFswXVttb250aFswXS5sZW5ndGggLSAxXS5kYXRlLCAkY3RybC5tb250aFRpdGxlRm9ybWF0KVxcXCIgZGF0YS1uZy1pZj0kY3RybC5zaG93TW9udGhUaXRsZXM+PC9zcGFuPiA8c3BhbiBjbGFzcz1iYy1jYWxlbmRhcl9fd2Vla2RheXMgZGF0YS1uZy1pZj0kY3RybC5zaG93V2Vla2RheXM+IDxzcGFuIGNsYXNzPVxcXCJiYy1jYWxlbmRhcl9fZGF5IGJjLWNhbGVuZGFyX19kYXktLXdlZWtkYXlzXFxcIiBkYXRhLW5nLXJlcGVhdD1cXFwiZGF5IGluICRjdHJsLndlZWtkYXlzIHRyYWNrIGJ5ICRpbmRleFxcXCI+IDxzdHJvbmcgY2xhc3M9YmMtY2FsZW5kYXJfX2RheS10aXRsZT4ge3sgZGF5IH19IDwvc3Ryb25nPiA8L3NwYW4+IDwvc3Bhbj4gPGJjLXdlZWsgYmMtY29sbGVjdGlvbj1tb250aCBjbGFzcz1iYy1jYWxlbmRhcl9fd2Vlay13cmFwcGVyPjwvYmMtd2Vlaz4gPC90aW1lPlwiO1xuXHR3aW5kb3cuYW5ndWxhci5tb2R1bGUoJ25nJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbihjKSB7IGMucHV0KHBhdGgsIGh0bWwpIH1dKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvd2Vlay5odG1sJztcblx0dmFyIGh0bWwgPSBcIjx0aW1lIGNsYXNzPWJjLWNhbGVuZGFyX193ZWVrIGRhdGV0aW1lPVxcXCJ7eyB3ZWVrW3dlZWsubGVuZ3RoIC0gMV0uZGF0ZSB8IGRhdGU6J3l5eXktd3cnIH19XFxcIiBkYXRhLW5nLXJlcGVhdD1cXFwid2VlayBpbiB2bS5iY0NvbGxlY3Rpb24gdHJhY2sgYnkgJGluZGV4XFxcIj4gPGJjLWRheSBiYy1jb2xsZWN0aW9uPXdlZWsgY2xhc3M9YmMtY2FsZW5kYXJfX2RheS13cmFwcGVyPjwvYmMtZGF5PiA8L3RpbWU+XCI7XG5cdHdpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xuXHRtb2R1bGUuZXhwb3J0cyA9IHBhdGg7XG5cbi8qKiovIH0sXG4vKiAxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvZGF5Lmh0bWwnO1xuXHR2YXIgaHRtbCA9IFwiPHNwYW4gY2xhc3M9YmMtY2FsZW5kYXJfX2RheSBkYXRhLW5nLWNsYXNzPVxcXCJ7ICdiYy1jYWxlbmRhcl9fZGF5LS1kaXNhYmxlZCc6ICRjdHJsLmlzQmVmb3JlVG9kYXkoZGF5LmRhdGUpLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tdG9kYXknOiAkY3RybC5pc0RheVRvZGF5KGRheS5kYXRlKSxcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLWV2ZW4nOiAkZXZlbixcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLW9kZCc6ICRvZGQsXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS1wYWQnOiAhZGF5LmRhdGUsXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS12YWxpZCc6IGRheS5kYXRlLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tc2VsZWN0ZWQnOiBkYXkuZGF0ZSA9PT0gJGN0cmwuc2VsZWN0ZWREYXRlLmRhdGUgfVxcXCIgZGF0YS1uZy1jbGljaz0kY3RybC5zZWxlY3REYXRlKGRheSkgZGF0YS1uZy1yZXBlYXQ9XFxcImRheSBpbiB2bS5iY0NvbGxlY3Rpb24gdHJhY2sgYnkgJGluZGV4XFxcIiB0aXRsZT1kYXkuZGF0ZT4gPG5nLWluY2x1ZGUgc3JjPXZtLmRheVRlbXBsYXRlPjwvbmctaW5jbHVkZT4gPC9zcGFuPlwiO1xuXHR3aW5kb3cuYW5ndWxhci5tb2R1bGUoJ25nJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbihjKSB7IGMucHV0KHBhdGgsIGh0bWwpIH1dKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuYmNZZWFyRGlyZWN0aXZlID0gYmNZZWFyRGlyZWN0aXZlO1xuXHRcblx0dmFyIF95ZWFyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfeWVhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF95ZWFyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBiY1llYXJEaXJlY3RpdmUoKSB7XG5cdCAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgIHZhciBkaXJlY3RpdmUgPSB7XG5cdCAgICAgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgICAgICBzY29wZToge30sXG5cdCAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuXHQgICAgICAgICAgICBiY0NvbGxlY3Rpb246ICc9J1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdGVtcGxhdGVVcmw6IF95ZWFyMi5kZWZhdWx0LFxuXHQgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uIGNvbnRyb2xsZXIoKSB7fSxcblx0ICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuYmNNb250aERpcmVjdGl2ZSA9IGJjTW9udGhEaXJlY3RpdmU7XG5cdFxuXHR2YXIgX21vbnRoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfbW9udGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW9udGgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIGJjTW9udGhEaXJlY3RpdmUoKSB7XG5cdCAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgIHZhciBkaXJlY3RpdmUgPSB7XG5cdCAgICAgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgICAgICBzY29wZToge30sXG5cdCAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuXHQgICAgICAgICAgICBiY0NvbGxlY3Rpb246ICc9Jyxcblx0ICAgICAgICAgICAgYmNXZWVrZGF5c0hlYWRlcjogJz0nXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0ZW1wbGF0ZVVybDogX21vbnRoMi5kZWZhdWx0LFxuXHQgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uIGNvbnRyb2xsZXIoKSB7fSxcblx0ICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuYmNXZWVrRGlyZWN0aXZlID0gYmNXZWVrRGlyZWN0aXZlO1xuXHRcblx0dmFyIF93ZWVrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBfd2VlazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93ZWVrKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBiY1dlZWtEaXJlY3RpdmUoKSB7XG5cdCAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgIHZhciBkaXJlY3RpdmUgPSB7XG5cdCAgICAgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgICAgICBzY29wZToge30sXG5cdCAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuXHQgICAgICAgICAgICBiY0NvbGxlY3Rpb246ICc9J1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdGVtcGxhdGVVcmw6IF93ZWVrMi5kZWZhdWx0LFxuXHQgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uIGNvbnRyb2xsZXIoKSB7fSxcblx0ICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGJjRGF5RGlyZWN0aXZlLiRpbmplY3QgPSBbXCJiY0NhbGVuZGFyQ29uZmlnXCJdO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmJjRGF5RGlyZWN0aXZlID0gYmNEYXlEaXJlY3RpdmU7XG5cdFxuXHR2YXIgX2RheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0dmFyIF9kYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGF5KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBiY0RheURpcmVjdGl2ZShiY0NhbGVuZGFyQ29uZmlnKSB7XG5cdCAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgIHZhciBkaXJlY3RpdmUgPSB7XG5cdCAgICAgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgICAgICBzY29wZToge30sXG5cdCAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuXHQgICAgICAgICAgICBiY0NvbGxlY3Rpb246ICc9J1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdGVtcGxhdGVVcmw6IF9kYXkyLmRlZmF1bHQsXG5cdCAgICAgICAgY29udHJvbGxlcjogW1wiYmNDYWxlbmRhclNlcnZpY2VcIiwgZnVuY3Rpb24gY29udHJvbGxlcihiY0NhbGVuZGFyU2VydmljZSkge1xuXHQgICAgICAgICAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgICAgICAgICAgLy8gR2V0IHRoZSBpbm5lci1kYXkgdGVtcGxhdGUgZnJvbSB0aGUgc2VydmljZVxuXHRcblx0ICAgICAgICAgICAgdGhpcy5kYXlUZW1wbGF0ZSA9IGJjQ2FsZW5kYXJTZXJ2aWNlLmdldERheVRlbXBsYXRlKCk7XG5cdCAgICAgICAgfV0sXG5cdCAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBkaXJlY3RpdmU7XG5cdH1cblxuLyoqKi8gfVxuLyoqKioqKi8gXSlcbn0pO1xuO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGFuZ3VsYXItanNvbi1jYWxlbmRhci5taW4uanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIGYyYTk4MjU5YmQwNTE4MTljZTk2XG4gKiovIiwiaW1wb3J0IHsgYmNDYWxlbmRhckNvbmZpZyB9IGZyb20gJy4vY2FsZW5kYXIucHJvdmlkZXInO1xuaW1wb3J0IHsgYmNDYWxlbmRhclNlcnZpY2UgfSBmcm9tICcuL2NhbGVuZGFyLnNlcnZpY2UnO1xuaW1wb3J0IHsgYmNDYWxlbmRhckRpcmVjdGl2ZSB9IGZyb20gJy4vY2FsZW5kYXIuZGlyZWN0aXZlJztcbmltcG9ydCB7IGJjWWVhckRpcmVjdGl2ZSB9IGZyb20gJy4veWVhci5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgYmNNb250aERpcmVjdGl2ZSB9IGZyb20gJy4vbW9udGguZGlyZWN0aXZlJztcbmltcG9ydCB7IGJjV2Vla0RpcmVjdGl2ZSB9IGZyb20gJy4vd2Vlay5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgYmNEYXlEaXJlY3RpdmUgfSBmcm9tICcuL2RheS5kaXJlY3RpdmUnO1xuXG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnYmMuSnNvbkNhbGVuZGFyJywgW10pXG4gICAgLnByb3ZpZGVyKCdiY0NhbGVuZGFyQ29uZmlnJywgYmNDYWxlbmRhckNvbmZpZylcbiAgICAuc2VydmljZSgnYmNDYWxlbmRhclNlcnZpY2UnLCBiY0NhbGVuZGFyU2VydmljZSlcbiAgICAuZGlyZWN0aXZlKCdiY0NhbGVuZGFyJywgYmNDYWxlbmRhckRpcmVjdGl2ZSlcbiAgICAuZGlyZWN0aXZlKCdiY1llYXInLCBiY1llYXJEaXJlY3RpdmUpXG4gICAgLmRpcmVjdGl2ZSgnYmNNb250aCcsIGJjTW9udGhEaXJlY3RpdmUpXG4gICAgLmRpcmVjdGl2ZSgnYmNXZWVrJywgYmNXZWVrRGlyZWN0aXZlKVxuICAgIC5kaXJlY3RpdmUoJ2JjRGF5JywgYmNEYXlEaXJlY3RpdmUpXG47XG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2luZGV4LmpzXG4gKiovIiwiaW1wb3J0IGRheVRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGVzL2RheS5pbm5lci5odG1sJztcblxuZXhwb3J0IGNsYXNzIGJjQ2FsZW5kYXJDb25maWcge1xuXG4gICAgLy8gRGVmaW5lIGRlZmF1bHRzXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICduZ0luamVjdCc7XG5cbiAgICAgICAgLy8gVGhlIGNhbGVuZGFyIHdpbGwgYmVnaW4gd2l0aCB0b2RheVxuICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IG1vbWVudChuZXcgRGF0ZSgpKS5zdGFydE9mKCdkYXknKS5mb3JtYXQoKTtcblxuICAgICAgICAvLyBUaGUgZGVmYXVsdCBpbnRlcnZhbCB0eXBlIFtkYXl8d2Vla3xtb250aF1cbiAgICAgICAgdGhpcy5uZXN0aW5nRGVwdGggPSAnbW9udGgnO1xuXG4gICAgICAgIC8vIEhvdyBtYW55IGRheXMgc2hvdWxkIGJlIGdlbmVyYXRlZFxuICAgICAgICB0aGlzLmRheXMgPSAzMDtcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIGRpZmZlcmVudCBwb3NzaWJsZSByZXByZXNlbnRhdGlvbnMgb2YgdGhlIHdlZWtkYXlcbiAgICAgICAgdGhpcy53ZWVrZGF5U3R5bGUgPSB7XG4gICAgICAgICAgICBsZXR0ZXI6IFtcbiAgICAgICAgICAgICAgICAnUycsXG4gICAgICAgICAgICAgICAgJ00nLFxuICAgICAgICAgICAgICAgICdUJyxcbiAgICAgICAgICAgICAgICAnVycsXG4gICAgICAgICAgICAgICAgJ1QnLFxuICAgICAgICAgICAgICAgICdGJyxcbiAgICAgICAgICAgICAgICAnUycsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYWJicmV2aWF0aW9uOiBbXG4gICAgICAgICAgICAgICAgJ1N1bicsXG4gICAgICAgICAgICAgICAgJ01vbicsXG4gICAgICAgICAgICAgICAgJ1R1ZScsXG4gICAgICAgICAgICAgICAgJ1dlZCcsXG4gICAgICAgICAgICAgICAgJ1RodXInLFxuICAgICAgICAgICAgICAgICdGcmknLFxuICAgICAgICAgICAgICAgICdTYXQnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHdvcmQ6IFtcbiAgICAgICAgICAgICAgICAnU3VuZGF5JyxcbiAgICAgICAgICAgICAgICAnTW9uZGF5JyxcbiAgICAgICAgICAgICAgICAnVHVlc2RheScsXG4gICAgICAgICAgICAgICAgJ1dlZG5lc2RheScsXG4gICAgICAgICAgICAgICAgJ1RodXJzZGF5JyxcbiAgICAgICAgICAgICAgICAnRnJpZGF5JyxcbiAgICAgICAgICAgICAgICAnU2F0dXJkYXknLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTZXQgdGhlIGRlZmF1bHQgd29yZCB0eXBlIChNIHZzIE1vbiB2cyBNb25kYXkpXG4gICAgICAgIHRoaXMuZGF5VGl0bGVGb3JtYXQgPSAnYWJicmV2aWF0aW9uJztcblxuICAgICAgICAvLyBTaG91bGQgdGhlIGNhbGVuZGFyIHNob3cgdGhlIHdlZWtkYXkgbmFtZXMgYWJvdmUgZWFjaCBjb2x1bW4/XG4gICAgICAgIHRoaXMuc2hvd1dlZWtkYXlzID0gdHJ1ZTtcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIGRlZmF1bHQgdGVtcGxhdGUgZm9yIGEgZGF5XG4gICAgICAgIHRoaXMuZGF5VGVtcGxhdGUgPSBkYXlUZW1wbGF0ZTtcblxuICAgICAgICAvLyBBbGxvdyB0aGUgdXNlciB0byBzZXQgYSBjdXN0b20gdGVtcGxhdGVcbiAgICAgICAgdGhpcy5zZXREYXlUZW1wbGF0ZSA9ICh0ZW1wbGF0ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy51c2VyRGF5VGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlZmluZSB0aGUgZGVmYXVsdCBmb3JtYXQgZm9yIGEgZGF5XG4gICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9ICdEJztcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIGRlZmF1bHQgZm9ybWF0IGZvciBhIG1vbnRoIHRpdGxlXG4gICAgICAgIHRoaXMubW9udGhUaXRsZUZvcm1hdCA9ICdNTU1NJ1xuXG4gICAgICAgIC8vIFNob3VsZCBtb250aCB0aXRsZXMgYmUgc2hvd24gYnkgZGVmYXVsdD9cbiAgICAgICAgdGhpcy5zaG93TW9udGhUaXRsZXMgPSB0cnVlO1xuXG4gICAgfVxuXG5cblxuXG4gICAgJGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG5cbn1cblxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY2FsZW5kYXIucHJvdmlkZXIuanNcbiAqKi8iLCJ2YXIgcGF0aCA9ICcvVXNlcnMvYmMvQ29kZS9vcGVuLXNvdXJjZS9hbmd1bGFyLWpzb24tY2FsZW5kYXIvc3JjL3RlbXBsYXRlcy9kYXkuaW5uZXIuaHRtbCc7XG52YXIgaHRtbCA9IFwiPHRpbWUgZGF0ZXRpbWU9XFxcInt7IGRheS5kYXRlIHwgZGF0ZToneXl5eS1NTS1kZCcgfX1cXFwiIGNsYXNzPWJjLWNhbGVuZGFyX19kYXktdGltZSB0aXRsZT1cXFwie3sgZGF5LmRhdGUgfX1cXFwiIGRhdGEtbmctaWY9ZGF5LmRhdGU+IDxzcGFuIGRhdGEtbmctYmluZD1cXFwiJGN0cmwuZm9ybWF0RGF0ZShkYXkuZGF0ZSwgJGN0cmwuZGF0ZUZvcm1hdClcXFwiPjwvc3Bhbj4gPC90aW1lPlwiO1xud2luZG93LmFuZ3VsYXIubW9kdWxlKCduZycpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oYykgeyBjLnB1dChwYXRoLCBodG1sKSB9XSk7XG5tb2R1bGUuZXhwb3J0cyA9IHBhdGg7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy90ZW1wbGF0ZXMvZGF5LmlubmVyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsImV4cG9ydCBjbGFzcyBiY0NhbGVuZGFyU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICApIHtcbiAgICAgICAgJ25nSW5qZWN0JztcblxuICAgICAgICB0aGlzLldFRUtfTEVOR1RIID0gNztcbiAgICAgICAgdGhpcy5kYXlUZW1wbGF0ZTtcblxuICAgIH1cblxuXG5cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHRvIHNlZSBpZiB0aGUgZGF5IGlzIHByaW9yIHRvIHRoZSBjdXJyZW50IGRhdGVcbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZGlzYWJsZSB0aGUgdW5zZWxlY3RhYmxlIGRheXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlXG4gICAgICogQHJldHVybiB7Qm9vbH0gaXNCZWZvcmVcbiAgICAgKi9cbiAgICBkYXRlSXNCZWZvcmVUb2RheShkYXRlKSB7XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbW9tZW50KG5ldyBEYXRlKCkpLnN0YXJ0T2YoJ2RheScpLmZvcm1hdCgpO1xuXG4gICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuaXNCZWZvcmUodG9kYXkpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBkYXkgbWF0Y2hlcyB0aGUgY3VycmVudCBkYXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlMlxuICAgICAqIEByZXR1cm4ge0Jvb2x9IGlzVG9kYXlcbiAgICAgKi9cbiAgICBpc0RheVRvZGF5KGRhdGUsIGRhdGUyID0gbW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCgpKSB7XG4gICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuaXNTYW1lKGRhdGUyKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFR1cm4gYSBpbnRlZ2VyIChlLmcuICc2JykgaW50byBhbiBhcnJheTogJ1sxLDIsMyw0LDUsNl0nXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IGNvdW50XG4gICAgICogQHJldHVybiB7QXJyYXl9IGRheXNcbiAgICAgKi9cbiAgICBpbnRlZ2VyVG9BcnJheShjb3VudCkge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgY29uc3QgZGF5cyA9IFtdO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSArPSAxKSB7XG4gICAgICAgICAgICBkYXlzLnB1c2goaSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF5cztcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFBhZCB0aGUgYmVnaW5uaW5nIG9mIGEgd2Vla1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXJ0RGF0ZSAtIGRhdGUgdG8gdG8gd29yayBiYWNrIGZyb21cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBjb3VudCAtIGhvdyBtYW55IGRheXMgdG8gcGFkXG4gICAgICogQHJldHVybiB7QXJyYXl9IHBhZFxuICAgICAqL1xuICAgIHBhZERheXNMZWZ0KHN0YXJ0RGF0ZSwgY291bnQpIHtcbiAgICAgICAgY29uc3QgcGFkID0gW107XG4gICAgICAgIGNvbnN0IG1pc3NpbmdEYXlzID0gdGhpcy5pbnRlZ2VyVG9BcnJheShjb3VudCk7XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIG1pc3NpbmcgZGF5c1xuICAgICAgICBmb3IgKGNvbnN0IGRheSBpbiBtaXNzaW5nRGF5cykge1xuICAgICAgICAgICAgLy8gSG93IG1hbnkgZGF5cyB0byBnbyBiYWNrXG4gICAgICAgICAgICBjb25zdCBzdWJ0cmFjdGlvbiA9IHBhcnNlSW50KGRheSwgMTApICsgMTtcblxuICAgICAgICAgICAgLy8gRmluZCB0aGF0IGRheVxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXMgPSBtb21lbnQoc3RhcnREYXRlKS5zdWJ0cmFjdCgoc3VidHJhY3Rpb24pLCAnZGF5cycpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICAgICAgICAgICAgcGFkLnVuc2hpZnQoe1xuICAgICAgICAgICAgICAgIGRhdGU6IHByZXZpb3VzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGFkO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogUGFkIGEgY29sbGVjdGlvbiB3aXRoIGJsYW5rIHRpbGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBjb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtJbnRlZ2VyfSBjb3VudFxuICAgICAqIEByZXR1cm4ge0FycmF5fSBwYWRkZWRDb2xsZWN0aW9uXG4gICAgICovXG4gICAgcGFkQmxhbmtUaWxlcyhjb2xsZWN0aW9uLCBjb3VudCwgZGlyZWN0aW9uID0gJ2xlZnQnKSB7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBjb25zdCBkYXlzID0gW107XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFycmF5XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSArPSAxKSB7XG4gICAgICAgICAgICBkYXlzLnB1c2goe1xuICAgICAgICAgICAgICAgIGRhdGU6IG51bGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGRpcmVjdGlvbiBpcyAncmlnaHQnXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIC8vIHBhZCB0aGUgZW5kXG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5jb25jYXQoZGF5cyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSBwYWQgdGhlIGJlZ2lubmluZ1xuICAgICAgICAgICAgcmV0dXJuIGRheXMuY29uY2F0KGNvbGxlY3Rpb24pO1xuICAgICAgICB9XG5cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFNwbGl0IGFuIGFycmF5IGludG8gY2h1bmtzIGFuZCByZXR1cm4gYW4gYXJyYXkgb2YgdGhlc2UgY2h1bmtzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBncm91cFxuICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gZ3JvdXBzaXplIC0gQ2h1bmsgc2l6ZS4gRGVmYXVsdHMgdG8gNyAob25lIHdlZWspLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBjaHVua3NcbiAgICAgKi9cbiAgICBjaHVuayhncm91cCwgZ3JvdXBzaXplID0gdGhpcy5XRUVLX0xFTkdUSCkge1xuICAgICAgICBjb25zdCBzZXRzID0gW107XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgY29uc3QgY2h1bmtzID0gZ3JvdXAubGVuZ3RoIC8gcGFyc2VJbnQoZ3JvdXBzaXplLCAxMCk7XG5cbiAgICAgICAgd2hpbGUoaSA8IGNodW5rcykge1xuICAgICAgICAgICAgc2V0c1tpXSA9IGdyb3VwLnNwbGljZSgwLCBncm91cHNpemUpO1xuICAgICAgICAgICAgaSA9IGkgKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNldHM7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGR1cmF0aW9uIGluIGRheXMgYmV0d2VlbiB0d28gZGF0ZXMgSU5DTFVESU5HIGJvdGggZGF0ZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdGFydFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBlbmRcbiAgICAgKiBAcmV0dXJuIHtJbnRlZ2VyfSBkYXlzXG4gICAgICovXG4gICAgZHVyYXRpb25JbkRheXMoc3RhcnQsIGVuZCkge1xuICAgICAgICBjb25zdCBuZXdTdGFydCA9IG1vbWVudChzdGFydCkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgIC8vIEFkZCBhIGRheSBzbyB0aGUgZW5kIGRhdGUgaXMgaW5jbHVkZWQgaW4gdGhlIGNhbGN1bGF0aW9uXG4gICAgICAgIGNvbnN0IG5ld0VuZCA9IG1vbWVudChlbmQpLnN0YXJ0T2YoJ2RheScpLmFkZCgxLCAnZGF5cycpO1xuXG4gICAgICAgIHJldHVybiBuZXdFbmQuZGlmZihuZXdTdGFydCwgICdkYXlzJyk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBPcmdhbml6ZSBhIGNvbGxlY3Rpb24gb2YgZGF5cyBpbnRvIHN1YiBjb2xsZWN0aW9ucyBvZiB3ZWVrc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZGF5cyAtIGFycmF5IG9mIGRheXNcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gY29sbGVjdGlvblxuICAgICAqL1xuICAgIG9yZ2FuaXplV2Vla3MoZGF5cykge1xuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGRheSBvZiB0aGUgd2VlayB0aGF0IHRoZSBjYWxlbmRhciBzdGFydHMgYW5kIGVuZHMgb25cbiAgICAgICAgY29uc3QgZmlyc3REYXkgPSBtb21lbnQoZGF5c1swXS5kYXRlKS5kYXkoKTtcbiAgICAgICAgY29uc3QgbGFzdERheSA9IG1vbWVudChkYXlzW2RheXMubGVuZ3RoIC0gMV0uZGF0ZSkuZGF5KCk7XG4gICAgICAgIGNvbnN0IFNBVFVSREFZID0gNjtcbiAgICAgICAgY29uc3QgU1VOREFZID0gMDtcblxuICAgICAgICAvLyBJZiB0aGUgZmlyc3QgZGF5IGlzIGFmdGVyIFN1bmRheVxuICAgICAgICBpZiAoZmlyc3REYXkgPiBTVU5EQVkpIHtcbiAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoZSBmaXJzdCBkYXkgaXMgbGluZWQgdXAgaW4gdGhlIGNvcnJlY3Qgd2Vla2RheSBjb2x1bW5cbiAgICAgICAgICAgIGRheXMgPSB0aGlzLnBhZEJsYW5rVGlsZXMoZGF5cywgZmlyc3REYXksICdsZWZ0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGUgbGFzdCBkYXkgaXMgYmVmb3JlIFNhdHVyZGF5XG4gICAgICAgIGlmIChsYXN0RGF5IDwgU0FUVVJEQVkpIHtcbiAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoYXQgdGhlIGxhc3Qgd2VlaydzIGRheXMgYXJlIGluIHRoZSBjb3JyZWN0IHdlZWtkYXkgY29sdW1uXG4gICAgICAgICAgICBkYXlzID0gdGhpcy5wYWRCbGFua1RpbGVzKGRheXMsdGhpcy5XRUVLX0xFTkdUSCAtIChsYXN0RGF5ICsgMSksICdyaWdodCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2h1bmsoZGF5cyk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBPcmdhbml6ZSBieSBtb250aFxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gYWxsRGF5cyAtIEFuIGFycmF5IG9mIGFsbCBkYXlzXG4gICAgICogQHJldHVybiB7QXJyYXl9IGNvbGxlY3Rpb24gLSBkYXlzIG9yZ2FuaXplZCBpbnRvIHdlZWtzIGFuZCBtb250aHNcbiAgICAgKi9cbiAgICBvcmdhbml6ZU1vbnRocyhhbGxEYXlzKSB7XG4gICAgICAgIGNvbnN0IGNhbGVuZGFyID0gW107XG4gICAgICAgIGNvbnN0IFNBVFVSREFZID0gNjtcbiAgICAgICAgY29uc3QgU1VOREFZID0gMDtcbiAgICAgICAgbGV0IGNvbGxlY3Rpb24gPSBhbGxEYXlzO1xuICAgICAgICBsZXQgbW9udGg7XG4gICAgICAgIGxldCBkYXlPZk1vbnRoID0gbW9tZW50KGNvbGxlY3Rpb25bMF0uZGF0ZSkuZGF0ZSgpO1xuICAgICAgICBsZXQgZGF5c0luTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXlzSW5Nb250aCgpO1xuXG4gICAgICAgIC8vIFBhZCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBtb250aCB3aXRoIGFueSBtaXNzaW5nIGRheXNcbiAgICAgICAgLy8gSWYgdGhlIGZpcnN0IGRheSBpcyBub3QgdGhlIGZpcnN0IGRheSBvZiB0aGUgbW9udGhcbiAgICAgICAgaWYgKG1vbWVudChjb2xsZWN0aW9uWzBdLmRhdGUpLmRhdGUoKSA+IDApIHtcbiAgICAgICAgICAgIC8vIFB1bGwgdGhpcyBtb250aCdzIGRheXMgZnJvbSB0aGUgY29sbGVjdGlvblxuICAgICAgICAgICAgbW9udGggPSBjb2xsZWN0aW9uLnNsaWNlKDAsIChkYXlzSW5Nb250aCAtIChkYXlPZk1vbnRoIC0gMSkpKTtcblxuICAgICAgICAgICAgLy8gRmlsbCB0aGUgbWlzc2luZyBkYXlzIGZyb20gdGhlIG1vbnRoXG4gICAgICAgICAgICBjb25zdCBwYWQgPSB0aGlzLnBhZERheXNMZWZ0KG1vbnRoWzBdLmRhdGUsIChkYXlPZk1vbnRoIC0gMSkpO1xuXG4gICAgICAgICAgICAvLyBDb21iaW5lIHdpdGggdGhlIGV4aXN0aW5nIGFycmF5XG4gICAgICAgICAgICBjb2xsZWN0aW9uID0gcGFkLmNvbmNhdChjb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gU3BsaXQgaW50byBtb250aHNcbiAgICAgICAgLy8gQXMgbG9uZyBhcyB0aGVyZSBhcmUgZGF5cyBsZWZ0IGluIHRoZSBjb2xsZWN0aW9uXG4gICAgICAgIHdoaWxlIChjb2xsZWN0aW9uLmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBkYXkgb2YgdGhlIG1vbnRoIGZvciB0aGUgZmlyc3QgZGF0ZSBvZiB0aGUgY29sbGVjdGlvbiBlZy4gJzI0J1xuICAgICAgICAgICAgZGF5T2ZNb250aCA9IG1vbWVudChjb2xsZWN0aW9uWzBdLmRhdGUpLmRhdGUoKTtcblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGhvdyBtYW55IGRheXMgdGhlcmUgYXJlIHRoaXMgbW9udGggKHRvdGFsKVxuICAgICAgICAgICAgZGF5c0luTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXlzSW5Nb250aCgpO1xuXG4gICAgICAgICAgICAvLyBQdWxsIHRoaXMgbW9udGgncyBkYXlzIGZyb20gdGhlIGNvbGxlY3Rpb25cbiAgICAgICAgICAgIG1vbnRoID0gY29sbGVjdGlvbi5zcGxpY2UoMCwgKGRheXNJbk1vbnRoIC0gKGRheU9mTW9udGggLSAxKSkpO1xuXG4gICAgICAgICAgICAvLyBIb3cgbWFueSB3ZWVrZGF5cyBhcmUgcHJpb3IgdG8gdGhlIGZpcnN0IGRheSBvZiB0aGlzIG1vbnRoP1xuICAgICAgICAgICAgY29uc3QgZmlyc3REYXkgPSBtb21lbnQobW9udGhbMF0uZGF0ZSkuZGF5KCk7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBmaXJzdCBkYXkgaXMgYWZ0ZXIgU3VuZGF5XG4gICAgICAgICAgICBpZiAoZmlyc3REYXkgPiBTVU5EQVkpIHtcbiAgICAgICAgICAgICAgICAvLyBQYWQgd2l0aCBibGFuayB0aWxlcyBzbyB0aGF0IHRoZSBmaXJzdCBkYXkgaXMgbGluZWQgdXAgaW4gdGhlIGNvcnJlY3QgY29sdW1uXG4gICAgICAgICAgICAgICAgbW9udGggPSB0aGlzLnBhZEJsYW5rVGlsZXMobW9udGgsIGZpcnN0RGF5LCAnbGVmdCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBIb3cgbWFueSB3ZWVrZGF5cyBhcmUgYWZ0ZXIgdGhlIGxhc3QgZGF5IG9mIHRoZSBtb250aD9cbiAgICAgICAgICAgIC8vIChyZW1lbWJlcjogd2Vla3MgYXJlIHplcm8tYmFzZWQpXG4gICAgICAgICAgICBjb25zdCBsYXN0RGF5ID0gbW9tZW50KG1vbnRoW21vbnRoLmxlbmd0aCAtIDFdLmRhdGUpLmRheSgpO1xuXG4gICAgICAgICAgICAvLyBJZiBibGFuayB0aWxlcyBhcmUgbmVlZGVkIGZvciB0aGUgbGFzdCB3ZWVrXG4gICAgICAgICAgICBpZiAobGFzdERheSA8IFNBVFVSREFZKSB7XG4gICAgICAgICAgICAgICAgLy8gUGFkIHdpdGggYmxhbmsgdGlsZXMgc28gdGhhdCB0aGUgZmlyc3QgZGF5IGlzIGxpbmVkIHVwIGluIHRoZSBjb3JyZWN0IGNvbHVtblxuICAgICAgICAgICAgICAgIG1vbnRoID0gdGhpcy5wYWRCbGFua1RpbGVzKG1vbnRoLCB0aGlzLldFRUtfTEVOR1RIIC0gKGxhc3REYXkgKyAxKSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE9yZ2FuaXplIGludG8gd2Vla3MgYW5kIGFkZCB0byB0aGUgY2FsZW5kYXIgYXJyYXlcbiAgICAgICAgICAgIGNhbGVuZGFyLnB1c2godGhpcy5jaHVuayhtb250aCkpO1xuXG4gICAgICAgIH1cblxuXG4gICAgICAgIHJldHVybiBjYWxlbmRhcjtcblxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQnVpbGQgYW4gYXJyYXkgb2YgZGF5c1xuICAgICAqXG4gICAgICogQHBhcmFtIHtJbnRlZ2VyfSBsaW1pdCAtIGhvdyBtYW55IGRheXMgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXJ0IC0gdGhlIHN0YXJ0aW5nIGRhdGVcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gZGF5c1xuICAgICAqL1xuICAgIGJ1aWxkRGF5cyhsaW1pdCwgc3RhcnQgPSBuZXcgRGF0ZSgpKSB7XG4gICAgICAgIGxldCBjb3VudGVyID0gMDtcbiAgICAgICAgY29uc3QgZGF5cyA9IFtdO1xuICAgICAgICBsZXQgZGF5O1xuXG4gICAgICAgIHdoaWxlIChjb3VudGVyIDwgbGltaXQpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZGF5XG4gICAgICAgICAgICBkYXkgPSBtb21lbnQoc3RhcnQpLmFkZChjb3VudGVyLCAnZGF5cycpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0byB0aGUgYXJyYXlcbiAgICAgICAgICAgIGRheXMucHVzaCh7XG4gICAgICAgICAgICAgICAgZGF0ZTogZGF5LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEluY3JlbWVudCB0aGUgY291bnRlclxuICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXIgKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRheXM7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGlubmVyIGRheSB0ZW1wbGF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlXG4gICAgICovXG4gICAgc3RvcmVEYXlUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICAgICAgICB0aGlzLmRheVRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGlubmVyIGRheSB0ZW1wbGF0ZVxuICAgICAqXG4gICAgICogQHJldHVybiB7U3RyaW5nfSB0ZW1wbGF0ZVxuICAgICAqL1xuICAgIGdldERheVRlbXBsYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXlUZW1wbGF0ZTtcbiAgICB9XG5cblxufVxuXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9jYWxlbmRhci5zZXJ2aWNlLmpzXG4gKiovIiwiaW1wb3J0IHsgQ2FsZW5kYXJDb250cm9sbGVyIH0gZnJvbSAnLi9jYWxlbmRhci5jb250cm9sbGVyJztcbmltcG9ydCBjYWxlbmRhclRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGVzL2NhbGVuZGFyLmh0bWwnO1xuaW1wb3J0IHllYXJUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlcy95ZWFyLmh0bWwnO1xuaW1wb3J0IG1vbnRoVGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZXMvbW9udGguaHRtbCc7XG5pbXBvcnQgd2Vla1RlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGVzL3dlZWsuaHRtbCc7XG5pbXBvcnQgZGF5VGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZXMvZGF5Lmh0bWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gYmNDYWxlbmRhckRpcmVjdGl2ZShcbikge1xuICAgICduZ0luamVjdCc7XG5cbiAgICAvLyBEZWZpbmUgcG9zc2libGUgdGVtcGxhdGVzXG4gICAgY29uc3QgdGVtcGxhdGVzID0ge1xuICAgICAgICB5ZWFyOiB5ZWFyVGVtcGxhdGUsXG4gICAgICAgIG1vbnRoOiBtb250aFRlbXBsYXRlLFxuICAgICAgICB3ZWVrOiB3ZWVrVGVtcGxhdGUsXG4gICAgICAgIGRheTogZGF5VGVtcGxhdGUsXG4gICAgfTtcblxuICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG4gICAgICAgICAgICBiY1N0YXJ0RGF0ZTogJ0A/JywgICAgICAgIC8vIGRhdGUgLSBkZWZhdWx0IHRvIHRvZGF5XG4gICAgICAgICAgICBiY0VuZERhdGU6ICdAPycsICAgICAgICAgIC8vIGRhdGUgLSBpZiBub3QgcHJlc2VudCwgdXNlIGNyZWF0ZSB1c2luZyBiY0RheXNcbiAgICAgICAgICAgIGJjTmVzdGluZ0RlcHRoOiAnQD8nLCAgICAgLy8gc3RyaW5nIFttb250aHx3ZWVrfGRheV0gLSBkZWZhdWx0czogbW9udGhcbiAgICAgICAgICAgIGJjRGF5czogJ0A/JywgICAgICAgICAgICAgLy8gaW50ZWdlciAtIGRlZmF1bHQgdG8gMzAgKHVzZWQgdG8gY3JlYXRlIGJjRW5kRGF0ZSlcbiAgICAgICAgICAgIGJjRGF5VGl0bGVGb3JtYXQ6ICdAPycsICAgLy8gc3RyaW5nIFt3b3JkfGFiYnJldmlhdGlvbnxsZXR0ZXJdIC0gZGVmYXVsdDogYWJicmV2aWF0aW9uXG4gICAgICAgICAgICBiY01vbnRoVGl0bGVGb3JtYXQ6ICdAPycsIC8vIHN0cmluZyAtIGFueSB2YWxpZCBNb21lbnQgZGF0ZSBmb3JtYXQgLSBkZWZhdWx0OiBNTU1NXG4gICAgICAgICAgICBiY0RhdGVTZWxlY3RlZDogJyYnLCAgICAgIC8vIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkYXRlIGlzIHNlbGVjdGVkICh0YXAvY2xpY2spXG4gICAgICAgICAgICBiY1Nob3dXZWVrZGF5czogJz0/JywgICAgIC8vIGRldGVybWluZSBpZiB0aGUgd2Vla2RheXMgaGVhZGVyIHNob3VsZCBiZSBjcmVhdGVkXG4gICAgICAgICAgICBiY1Nob3dNb250aFRpdGxlczogJz0/JywgIC8vIGRldGVybWluZSBpZiB0aGUgbW9udGggdGl0bGVzIHNob3VsZCBiZSB2aXNpYmxlXG4gICAgICAgICAgICBiY0RheVRlbXBsYXRlOiAnQD8nLCAgICAgIC8vIG92ZXJ3cml0ZSB0aGUgZGVmYXVsdCAnZGF5JyB0ZW1wbGF0ZVxuICAgICAgICAgICAgYmNEYXRlRm9ybWF0OiAnQD8nLCAgICAgICAvLyBkZWZpbmUgYSBjdXN0b20gZGF0ZSBmb3JtYXQgZm9yIHRoZSBkYXlcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogbGlua0Z1bmN0aW9uLFxuICAgICAgICB0ZW1wbGF0ZVVybDogY2FsZW5kYXJUZW1wbGF0ZSxcbiAgICAgICAgY29udHJvbGxlcjogQ2FsZW5kYXJDb250cm9sbGVyLFxuICAgICAgICBjb250cm9sbGVyQXM6ICckY3RybCcsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cblxuXG5cbiAgICAvKipcbiAgICAgKiBMaW5rXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGlua0Z1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJGN0cmwpIHtcblxuICAgICAgICAvLyBTZXQgdGhlIGNvcnJlY3QgdGVtcGxhdGUgYmFzZWQgb24gdGhlIGRlc2lyZWQgbmVzdGluZyBkZXB0aFxuICAgICAgICAkY3RybC5nZXRUZW1wbGF0ZVVybCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZXNbJGN0cmwubmVzdGluZ0RlcHRoXTtcbiAgICAgICAgfTtcblxuICAgIH1cblxuXG5cbn1cblxuXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9jYWxlbmRhci5kaXJlY3RpdmUuanNcbiAqKi8iLCJleHBvcnQgY2xhc3MgQ2FsZW5kYXJDb250cm9sbGVyIHtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICAkdGVtcGxhdGVDYWNoZSxcbiAgICAgICAgYmNDYWxlbmRhckNvbmZpZywgYmNDYWxlbmRhclNlcnZpY2VcbiAgICApIHtcbiAgICAgICAgJ25nSW5qZWN0JztcblxuICAgICAgICB0aGlzLiR0ZW1wbGF0ZUNhY2hlID0gJHRlbXBsYXRlQ2FjaGU7XG4gICAgICAgIHRoaXMuYmNDYWxlbmRhckNvbmZpZyA9IGJjQ2FsZW5kYXJDb25maWc7XG4gICAgICAgIHRoaXMuYmNDYWxlbmRhclNlcnZpY2UgPSBiY0NhbGVuZGFyU2VydmljZTtcblxuXG4gICAgICAgIHRoaXMuX2FjdGl2YXRlKCk7XG5cbiAgICB9XG5cblxuXG5cbiAgICBfYWN0aXZhdGUoKSB7XG4gICAgICAgIC8vIERlZmluZSB0b2RheSdzIGRhdGVcbiAgICAgICAgdGhpcy50b2RheSA9IG1vbWVudChuZXcgRGF0ZSgpKS5zdGFydE9mKCdkYXknKTtcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIHN0YXJ0IGRhdGUgZm9yIHRoZSBjYWxlbmRhclxuICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IHRoaXMuYmNTdGFydERhdGUgfHwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnN0YXJ0RGF0ZTtcblxuICAgICAgICAvLyBJZiB0aGUgZW5kIGRhdGUgd2FzIGRlZmluZWRcbiAgICAgICAgaWYgKHRoaXMuYmNFbmREYXRlKSB7XG5cbiAgICAgICAgICAgIC8vIERlZmluZSBob3cgbWFueSBkYXlzIGFyZSBuZWVkZWQgdXNpbmcgdGhlIGVuZCBkYXRlXG4gICAgICAgICAgICB0aGlzLmRheXMgPSB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLmR1cmF0aW9uSW5EYXlzKHRoaXMuc3RhcnREYXRlLCB0aGlzLmJjRW5kRGF0ZSk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgLy8gRGVmaW5lIGhvdyBtYW55IGRheXMgYXJlIG5lZWRlZCBmcm9tIHRoZSBjb3VudCBwYXNzZWQgaW4gb3IgdGhlIGNvbmZpZ1xuICAgICAgICAgICAgdGhpcy5kYXlzID0gcGFyc2VJbnQodGhpcy5iY0RheXMgfHwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLmRheXMsIDEwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVmaW5lIGhvdyBkZWVwIHRvIG9yZ2FuaXplIHRoZSBjYWxlbmRhclxuICAgICAgICB0aGlzLm5lc3RpbmdEZXB0aCA9IHRoaXMuYmNOZXN0aW5nRGVwdGggfHwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLm5lc3RpbmdEZXB0aDtcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIHdlZWtkYXkgaGVhZGVycyBmb3JtYXRcbiAgICAgICAgdGhpcy53ZWVrZGF5cyA9IHRoaXMuYmNEYXlUaXRsZUZvcm1hdCA/XG4gICAgICAgICAgICB0aGlzLmJjQ2FsZW5kYXJDb25maWcud2Vla2RheVN0eWxlW3RoaXMuYmNEYXlUaXRsZUZvcm1hdF0gOlxuICAgICAgICAgICAgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLndlZWtkYXlTdHlsZVt0aGlzLmJjQ2FsZW5kYXJDb25maWcuZGF5VGl0bGVGb3JtYXRdO1xuXG4gICAgICAgIC8vIERlZmluZSB0aGUgZm9ybWF0IGZvciB0aGUgbW9udGggdGl0bGVcbiAgICAgICAgdGhpcy5tb250aFRpdGxlRm9ybWF0ID0gdGhpcy5iY01vbnRoVGl0bGVGb3JtYXQgfHwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLm1vbnRoVGl0bGVGb3JtYXQ7XG5cbiAgICAgICAgLy8gRGVmaW5lIGlmIG1vbnRoIHRpdGxlcyBzaG91bGQgYmUgdmlzaWJsZVxuICAgICAgICB0aGlzLnNob3dNb250aFRpdGxlcyA9IHR5cGVvZih0aGlzLmJjU2hvd01vbnRoVGl0bGVzKSA9PT0gJ2Jvb2xlYW4nID9cbiAgICAgICAgICAgIHRoaXMuYmNTaG93TW9udGhUaXRsZXMgOiB0aGlzLmJjQ2FsZW5kYXJDb25maWcuc2hvd01vbnRoVGl0bGVzO1xuXG4gICAgICAgIC8vIEluaXRpYWxseSBubyBkYXRlIGlzIHNlbGVjdGVkXG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAvLyBTZXQgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGNhbGVuZGFyIHdlZWtkYXlzIGhlYWRlcnNcbiAgICAgICAgdGhpcy5zaG93V2Vla2RheXMgPSB0eXBlb2YodGhpcy5iY1Nob3dXZWVrZGF5cykgPT09ICdib29sZWFuJyA/XG4gICAgICAgICAgICB0aGlzLmJjU2hvd1dlZWtkYXlzIDogdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnNob3dXZWVrZGF5cztcblxuXG4gICAgICAgIC8vIElmIGEgY3VzdG9tIGRheSB0ZW1wbGF0ZSBoYXMgYmVlbiBzZXQgaW4gZWl0aGVyIGxvY2F0aW9uIChhdHRyaWJ1dGUgb3IgcHJvdmlkZXIpXG4gICAgICAgIGlmICh0aGlzLmJjRGF5VGVtcGxhdGUgfHwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnVzZXJEYXlUZW1wbGF0ZSkge1xuICAgICAgICAgICAgLy8gTmFtZSB0aGUgdGVtcGxhdGUgbG9jYXRpb25cbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlTG9jYXRpb24gPSAndXNlckRheVRlbXBsYXRlLmh0bWwnO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBzZXQgYSB0ZW1wbGF0ZSB2aWEgdGhlIGRpcmVjdGl2ZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGlmICh0aGlzLmJjRGF5VGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBQdXQgdGhlIHVzZXIgdGVtcGxhdGUgaW50byB0aGUgY2FjaGVcbiAgICAgICAgICAgICAgICB0aGlzLiR0ZW1wbGF0ZUNhY2hlLnB1dCh0ZW1wbGF0ZUxvY2F0aW9uLCB0aGlzLmJjRGF5VGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBkZWZpbmVkIGEgdGVtcGxhdGUgdXNpbmcgdGhlIHByb3ZpZGVyXG4gICAgICAgICAgICBpZiAodGhpcy5iY0NhbGVuZGFyQ29uZmlnLnVzZXJEYXlUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIC8vIFB1dCB0aGUgdXNlciB0ZW1wbGF0ZSBpbnRvIHRoZSBjYWNoZVxuICAgICAgICAgICAgICAgIHRoaXMuJHRlbXBsYXRlQ2FjaGUucHV0KHRlbXBsYXRlTG9jYXRpb24sIHRoaXMuYmNDYWxlbmRhckNvbmZpZy51c2VyRGF5VGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTdG9yZSB0aGUgaW5uZXItZGF5IHRlbXBsYXRlIG9uIHRoZSBzZXJ2aWNlXG4gICAgICAgICAgICB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLnN0b3JlRGF5VGVtcGxhdGUodGVtcGxhdGVMb2NhdGlvbik7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIGN1c3RvbSB0ZW1wbGF0ZSB3YXMgZGVmaW5lZFxuXG4gICAgICAgICAgICAvLyBTdG9yZSB0aGUgaW5uZXItZGF5IHRlbXBsYXRlIG9uIHRoZSBzZXJ2aWNlXG4gICAgICAgICAgICB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLnN0b3JlRGF5VGVtcGxhdGUodGhpcy5iY0NhbGVuZGFyQ29uZmlnLmRheVRlbXBsYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlZmluZSB0aGUgZGF0ZSBmb3JtYXQgZm9yIHRoZSBpbmRpdmlkdWFsIGRheVxuICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSB0aGlzLmJjRGF0ZUZvcm1hdCB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcuZGF0ZUZvcm1hdDtcblxuICAgICAgICAvLyBCdWlsZCBhcnJheSBvZiBkYXlzXG4gICAgICAgIGNvbnN0IGRheXMgPSB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLmJ1aWxkRGF5cyh0aGlzLmRheXMsIHRoaXMuc3RhcnREYXRlKTtcblxuICAgICAgICAvLyBCdWlsZCB0aGUgY2FsZW5kYXIgSlNPTiBhbmQgZXhwb3NlIHRvIHRoZSBET01cbiAgICAgICAgdGhpcy5fYnVpbGRDYWxlbmRhcihkYXlzLCB0aGlzLm5lc3RpbmdEZXB0aCk7XG5cbiAgICB9XG5cblxuXG5cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHRvIHNlZSBpZiB0aGUgZGF5IGlzIHByaW9yIHRvIHRoZSBjdXJyZW50IGRhdGVcbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZGlzYWJsZSB0aGUgdW5zZWxlY3RhYmxlIGRheXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZVxuICAgICAqIEByZXR1cm4ge0Jvb2x9XG4gICAgICovXG4gICAgaXNCZWZvcmVUb2RheShkYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLmRhdGVJc0JlZm9yZVRvZGF5KGRhdGUpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBkYXkgbWF0Y2hlcyB0aGUgY3VycmVudCBkYXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RhdGV9IGRhdGVcbiAgICAgKiBAcmV0dXJuIHtCb29sfVxuICAgICAqL1xuICAgIGlzRGF5VG9kYXkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5pc0RheVRvZGF5KGRhdGUsIHRoaXMuc3RhcnREYXRlKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFNlbGVjdCBhIGRhdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXlcbiAgICAgKi9cbiAgICBzZWxlY3REYXRlKGRheSkge1xuICAgICAgICAvLyBTZXQgdGhlIHNlbGVjdGVkIGRheVxuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IGRheTtcblxuICAgICAgICAvLyBPbmx5IGNhbGwgdGhlIHBhc3NlZCBtZXRob2QgaWYgaXQgZXhpc3RzIGFuZCBhIHZhbGlkIGRhdGUgd2FzIGNob3NlblxuICAgICAgICBpZiAoZGF5LmRhdGUgJiYgdGhpcy5iY0RhdGVTZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5iY0RhdGVTZWxlY3RlZCh7XG4gICAgICAgICAgICAgICAgZGF0ZTogZGF5LmRhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogRm9ybWF0IGEgZGF0ZSB1c2luZyBtb21lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvcm1hdFxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gZm9ybWF0dGVkRGF0ZVxuICAgICAqL1xuICAgIGZvcm1hdERhdGUoZGF0ZSwgZm9ybWF0KSB7XG4gICAgICAgIGlmICghZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoZm9ybWF0KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEJ1aWxkIHRoZSBjYWxlbmRhciBKU09OXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkYXlzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRlcHRoXG4gICAgICogQHJldHVybiB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqL1xuICAgIF9idWlsZENhbGVuZGFyKGRheXMsIGRlcHRoKSB7XG5cbiAgICAgICAgLy8gQ2FsbCB0aGUgY29ycmVjdCBvcmdhbml6YXRpb24gbWV0aG9kIGJhc2VkIG9uIHRoZSBuZXN0aW5nIGRlcHRoXG4gICAgICAgIGlmIChkZXB0aCA9PT0gJ21vbnRoJykge1xuXG4gICAgICAgICAgICB0aGlzLmJjQ29sbGVjdGlvbiA9IHRoaXMuYmNDYWxlbmRhclNlcnZpY2Uub3JnYW5pemVNb250aHMoZGF5cyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChkZXB0aCA9PT0gJ3dlZWsnKSB7XG5cbiAgICAgICAgICAgIHRoaXMuYmNDb2xsZWN0aW9uID0gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5vcmdhbml6ZVdlZWtzKGRheXMpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoZGVwdGggPT09ICdkYXknKSB7XG5cbiAgICAgICAgICAgIHRoaXMuYmNDb2xsZWN0aW9uID0gZGF5cztcblxuICAgICAgICB9XG5cbiAgICB9XG5cblxufVxuXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9jYWxlbmRhci5jb250cm9sbGVyLmpzXG4gKiovIiwidmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvY2FsZW5kYXIuaHRtbCc7XG52YXIgaHRtbCA9IFwiPHNlY3Rpb24gY2xhc3M9YmMtY2FsZW5kYXI+IDxzcGFuIGNsYXNzPWJjLWNhbGVuZGFyX193ZWVrZGF5cyBkYXRhLW5nLWlmPVxcXCIkY3RybC5zaG93V2Vla2RheXMgJiYgJGN0cmwubmVzdGluZ0RlcHRoID09PSAnd2VlaydcXFwiPiA8c3BhbiBjbGFzcz1cXFwiYmMtY2FsZW5kYXJfX2RheSBiYy1jYWxlbmRhcl9fZGF5LS13ZWVrZGF5c1xcXCIgZGF0YS1uZy1yZXBlYXQ9XFxcImRheSBpbiAkY3RybC53ZWVrZGF5cyB0cmFjayBieSAkaW5kZXhcXFwiPiA8c3Ryb25nIGNsYXNzPWJjLWNhbGVuZGFyX19kYXktdGl0bGU+IHt7IGRheSB9fSA8L3N0cm9uZz4gPC9zcGFuPiA8L3NwYW4+IDxiYy15ZWFyIGRhdGEtbmctaWY9XFxcIiRjdHJsLm5lc3RpbmdEZXB0aCA9PT0gJ3llYXInXFxcIiBjbGFzcz1iYy1jYWxlbmRhcl9feWVhci13cmFwcGVyIGJjLWNvbGxlY3Rpb249JGN0cmwuYmNDb2xsZWN0aW9uPjwvYmMteWVhcj4gPGJjLW1vbnRoIGRhdGEtbmctaWY9XFxcIiRjdHJsLm5lc3RpbmdEZXB0aCA9PT0gJ21vbnRoJ1xcXCIgY2xhc3M9YmMtY2FsZW5kYXJfX21vbnRoLXdyYXBwZXIgYmMtY29sbGVjdGlvbj0kY3RybC5iY0NvbGxlY3Rpb24+PC9iYy1tb250aD4gPGJjLXdlZWsgZGF0YS1uZy1pZj1cXFwiJGN0cmwubmVzdGluZ0RlcHRoID09PSAnd2VlaydcXFwiIGNsYXNzPWJjLWNhbGVuZGFyX193ZWVrLXdyYXBwZXIgYmMtY29sbGVjdGlvbj0kY3RybC5iY0NvbGxlY3Rpb24+PC9iYy13ZWVrPiA8YmMtZGF5IGRhdGEtbmctaWY9XFxcIiRjdHJsLm5lc3RpbmdEZXB0aCA9PT0gJ2RheSdcXFwiIGNsYXNzPWJjLWNhbGVuZGFyX19kYXktd3JhcHBlciBiYy1jb2xsZWN0aW9uPSRjdHJsLmJjQ29sbGVjdGlvbj48L2JjLWRheT4gPC9zZWN0aW9uPlwiO1xud2luZG93LmFuZ3VsYXIubW9kdWxlKCduZycpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oYykgeyBjLnB1dChwYXRoLCBodG1sKSB9XSk7XG5tb2R1bGUuZXhwb3J0cyA9IHBhdGg7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy90ZW1wbGF0ZXMvY2FsZW5kYXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwidmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMveWVhci5odG1sJztcbnZhciBodG1sID0gXCI8ZGl2IGNsYXNzPWJjLWNhbGVuZGFyX195ZWFyIGRhdGEtbmctcmVwZWF0PVxcXCJ5ZWFyIGluIHZtLmJjQ29sbGVjdGlvbiB0cmFjayBieSAkaW5kZXhcXFwiPiA8YmMtbW9udGggYmMtY29sbGVjdGlvbj15ZWFyIGJjLXdlZWtzLWhlYWRlcj0kY3RybC53ZWVrZGF5c0hlYWRlciBjbGFzcz1iYy1jYWxlbmRhcl9fbW9udGgtd3JhcHBlcj48L2JjLW1vbnRoPiA8L2Rpdj5cIjtcbndpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xubW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdGVtcGxhdGVzL3llYXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwidmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvbW9udGguaHRtbCc7XG52YXIgaHRtbCA9IFwiPHRpbWUgY2xhc3M9YmMtY2FsZW5kYXJfX21vbnRoIGRhdGV0aW1lPVxcXCJ7eyBtb250aFswXVttb250aFswXS5sZW5ndGggLSAxXS5kYXRlIHwgZGF0ZToneXl5eS1NTScgfX1cXFwiIGRhdGEtbmctcmVwZWF0PVxcXCJtb250aCBpbiB2bS5iY0NvbGxlY3Rpb24gdHJhY2sgYnkgJGluZGV4XFxcIj4gPHNwYW4gY2xhc3M9YmMtY2FsZW5kYXJfX21vbnRoLXRpdGxlIGRhdGEtbmctYmluZD1cXFwiJGN0cmwuZm9ybWF0RGF0ZShtb250aFswXVttb250aFswXS5sZW5ndGggLSAxXS5kYXRlLCAkY3RybC5tb250aFRpdGxlRm9ybWF0KVxcXCIgZGF0YS1uZy1pZj0kY3RybC5zaG93TW9udGhUaXRsZXM+PC9zcGFuPiA8c3BhbiBjbGFzcz1iYy1jYWxlbmRhcl9fd2Vla2RheXMgZGF0YS1uZy1pZj0kY3RybC5zaG93V2Vla2RheXM+IDxzcGFuIGNsYXNzPVxcXCJiYy1jYWxlbmRhcl9fZGF5IGJjLWNhbGVuZGFyX19kYXktLXdlZWtkYXlzXFxcIiBkYXRhLW5nLXJlcGVhdD1cXFwiZGF5IGluICRjdHJsLndlZWtkYXlzIHRyYWNrIGJ5ICRpbmRleFxcXCI+IDxzdHJvbmcgY2xhc3M9YmMtY2FsZW5kYXJfX2RheS10aXRsZT4ge3sgZGF5IH19IDwvc3Ryb25nPiA8L3NwYW4+IDwvc3Bhbj4gPGJjLXdlZWsgYmMtY29sbGVjdGlvbj1tb250aCBjbGFzcz1iYy1jYWxlbmRhcl9fd2Vlay13cmFwcGVyPjwvYmMtd2Vlaz4gPC90aW1lPlwiO1xud2luZG93LmFuZ3VsYXIubW9kdWxlKCduZycpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oYykgeyBjLnB1dChwYXRoLCBodG1sKSB9XSk7XG5tb2R1bGUuZXhwb3J0cyA9IHBhdGg7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy90ZW1wbGF0ZXMvbW9udGguaHRtbFxuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwidmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvd2Vlay5odG1sJztcbnZhciBodG1sID0gXCI8dGltZSBjbGFzcz1iYy1jYWxlbmRhcl9fd2VlayBkYXRldGltZT1cXFwie3sgd2Vla1t3ZWVrLmxlbmd0aCAtIDFdLmRhdGUgfCBkYXRlOid5eXl5LXd3JyB9fVxcXCIgZGF0YS1uZy1yZXBlYXQ9XFxcIndlZWsgaW4gdm0uYmNDb2xsZWN0aW9uIHRyYWNrIGJ5ICRpbmRleFxcXCI+IDxiYy1kYXkgYmMtY29sbGVjdGlvbj13ZWVrIGNsYXNzPWJjLWNhbGVuZGFyX19kYXktd3JhcHBlcj48L2JjLWRheT4gPC90aW1lPlwiO1xud2luZG93LmFuZ3VsYXIubW9kdWxlKCduZycpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oYykgeyBjLnB1dChwYXRoLCBodG1sKSB9XSk7XG5tb2R1bGUuZXhwb3J0cyA9IHBhdGg7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy90ZW1wbGF0ZXMvd2Vlay5odG1sXG4gKiogbW9kdWxlIGlkID0gOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJ2YXIgcGF0aCA9ICcvVXNlcnMvYmMvQ29kZS9vcGVuLXNvdXJjZS9hbmd1bGFyLWpzb24tY2FsZW5kYXIvc3JjL3RlbXBsYXRlcy9kYXkuaHRtbCc7XG52YXIgaHRtbCA9IFwiPHNwYW4gY2xhc3M9YmMtY2FsZW5kYXJfX2RheSBkYXRhLW5nLWNsYXNzPVxcXCJ7ICdiYy1jYWxlbmRhcl9fZGF5LS1kaXNhYmxlZCc6ICRjdHJsLmlzQmVmb3JlVG9kYXkoZGF5LmRhdGUpLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tdG9kYXknOiAkY3RybC5pc0RheVRvZGF5KGRheS5kYXRlKSxcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLWV2ZW4nOiAkZXZlbixcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLW9kZCc6ICRvZGQsXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS1wYWQnOiAhZGF5LmRhdGUsXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS12YWxpZCc6IGRheS5kYXRlLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tc2VsZWN0ZWQnOiBkYXkuZGF0ZSA9PT0gJGN0cmwuc2VsZWN0ZWREYXRlLmRhdGUgfVxcXCIgZGF0YS1uZy1jbGljaz0kY3RybC5zZWxlY3REYXRlKGRheSkgZGF0YS1uZy1yZXBlYXQ9XFxcImRheSBpbiB2bS5iY0NvbGxlY3Rpb24gdHJhY2sgYnkgJGluZGV4XFxcIiB0aXRsZT1kYXkuZGF0ZT4gPG5nLWluY2x1ZGUgc3JjPXZtLmRheVRlbXBsYXRlPjwvbmctaW5jbHVkZT4gPC9zcGFuPlwiO1xud2luZG93LmFuZ3VsYXIubW9kdWxlKCduZycpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oYykgeyBjLnB1dChwYXRoLCBodG1sKSB9XSk7XG5tb2R1bGUuZXhwb3J0cyA9IHBhdGg7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy90ZW1wbGF0ZXMvZGF5Lmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJpbXBvcnQgeWVhclRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGVzL3llYXIuaHRtbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBiY1llYXJEaXJlY3RpdmUoXG4pIHtcbiAgICAnbmdJbmplY3QnO1xuXG4gICAgY29uc3QgZGlyZWN0aXZlID0ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge30sXG4gICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgIGJjQ29sbGVjdGlvbjogJz0nLFxuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogeWVhclRlbXBsYXRlLFxuICAgICAgICBjb250cm9sbGVyOiAoKSA9PiB7fSxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG59XG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3llYXIuZGlyZWN0aXZlLmpzXG4gKiovIiwiaW1wb3J0IG1vbnRoVGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZXMvbW9udGguaHRtbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBiY01vbnRoRGlyZWN0aXZlKFxuKSB7XG4gICAgJ25nSW5qZWN0JztcblxuICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG4gICAgICAgICAgICBiY0NvbGxlY3Rpb246ICc9JyxcbiAgICAgICAgICAgIGJjV2Vla2RheXNIZWFkZXI6ICc9JyxcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6IG1vbnRoVGVtcGxhdGUsXG4gICAgICAgIGNvbnRyb2xsZXI6ICgpID0+IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbn1cblxuXG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21vbnRoLmRpcmVjdGl2ZS5qc1xuICoqLyIsImltcG9ydCB3ZWVrVGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZXMvd2Vlay5odG1sJztcblxuZXhwb3J0IGZ1bmN0aW9uIGJjV2Vla0RpcmVjdGl2ZShcbikge1xuICAgICduZ0luamVjdCc7XG5cbiAgICBjb25zdCBkaXJlY3RpdmUgPSB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuICAgICAgICAgICAgYmNDb2xsZWN0aW9uOiAnPScsXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiB3ZWVrVGVtcGxhdGUsXG4gICAgICAgIGNvbnRyb2xsZXI6ICgpID0+IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbn1cblxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvd2Vlay5kaXJlY3RpdmUuanNcbiAqKi8iLCJpbXBvcnQgZGF5V3JhcHBlclRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGVzL2RheS5odG1sJztcblxuZXhwb3J0IGZ1bmN0aW9uIGJjRGF5RGlyZWN0aXZlKFxuICAgIGJjQ2FsZW5kYXJDb25maWdcbikge1xuICAgICduZ0luamVjdCc7XG5cbiAgICBjb25zdCBkaXJlY3RpdmUgPSB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuICAgICAgICAgICAgYmNDb2xsZWN0aW9uOiAnPScsXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiBkYXlXcmFwcGVyVGVtcGxhdGUsXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKGJjQ2FsZW5kYXJTZXJ2aWNlKSB7XG4gICAgICAgICAgICAnbmdJbmplY3QnO1xuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGlubmVyLWRheSB0ZW1wbGF0ZSBmcm9tIHRoZSBzZXJ2aWNlXG4gICAgICAgICAgICB0aGlzLmRheVRlbXBsYXRlID0gYmNDYWxlbmRhclNlcnZpY2UuZ2V0RGF5VGVtcGxhdGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG59XG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2RheS5kaXJlY3RpdmUuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9