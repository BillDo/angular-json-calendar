!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("angular-json-calendar",[],t):"object"==typeof exports?exports["angular-json-calendar"]=t():e["angular-json-calendar"]=t()}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(3),c=a(4),o=a(11),i=a(12),l=a(13),s=a(14);t["default"]=angular.module("bc.JsonCalendar",[]).provider("bcCalendarConfig",n.bcCalendarConfig).service("bcCalendarService",r.bcCalendarService).directive("bcCalendar",c.bcCalendarDirective).directive("bcYear",o.bcYearDirective).directive("bcMonth",i.bcMonthDirective).directive("bcWeek",l.bcWeekDirective).directive("bcDay",s.bcDayDirective)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.bcCalendarConfig=void 0;var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(2),i=n(o);t.bcCalendarConfig=function(){function e(){"ngInject";var t=this;r(this,e),this.startDate=moment(new Date).startOf("day").format(),this.nestingDepth="month",this.days=30,this.weekdayStyle={letter:["S","M","T","W","T","F","S"],abbreviation:["Sun","Mon","Tue","Wed","Thur","Fri","Sat"],word:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},this.dayTitleFormat="abbreviation",this.showWeekdays=!0,this.dayTemplate=i["default"],this.setDayTemplate=function(e){t.userDayTemplate=e},this.dateFormat="D",this.monthTitleFormat="MMMM",this.showMonthTitles=!0}return c(e,[{key:"$get",value:function(){return this}}]),e}()},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/day.inner.html",n='<time datetime="{{ day.date | date:\'yyyy-MM-dd\' }}" class=bc-calendar__day-time title="{{ day.date }}" data-ng-if=day.date> <span data-ng-bind="$ctrl.formatDate(day.date, $ctrl.dateFormat)"></span> </time>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.bcCalendarService=function(){function e(){"ngInject";a(this,e),this.WEEK_LENGTH=7,this.dayTemplate}return n(e,[{key:"dateIsBeforeToday",value:function(e){var t=moment(new Date).startOf("day").format();return moment(e).isBefore(t)}},{key:"isDayToday",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?moment(new Date).format():arguments[1];return moment(e).isSame(t)}},{key:"integerToArray",value:function(e){var t=void 0,a=[];for(t=0;t<e;t+=1)a.push(t);return a}},{key:"padDaysLeft",value:function(e,t){var a=[],n=this.integerToArray(t);for(var r in n){var c=parseInt(r,10)+1,o=moment(e).subtract(c,"days").toISOString();a.unshift({date:o})}return a}},{key:"padBlankTiles",value:function(e,t){var a=arguments.length<=2||void 0===arguments[2]?"left":arguments[2],n=void 0,r=[];for(n=0;n<t;n+=1)r.push({date:null});return"right"===a?e.concat(r):"left"===a?r.concat(e):void 0}},{key:"chunk",value:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?this.WEEK_LENGTH:arguments[1],a=[],n=0,r=e.length/parseInt(t,10);n<r;)a[n]=e.splice(0,t),n+=1;return a}},{key:"durationInDays",value:function(e,t){var a=moment(e).startOf("day"),n=moment(t).startOf("day").add(1,"days");return n.diff(a,"days")}},{key:"organizeWeeks",value:function(e){var t=moment(e[0].date).day(),a=moment(e[e.length-1].date).day(),n=6,r=0;return t>r&&(e=this.padBlankTiles(e,t,"left")),a<n&&(e=this.padBlankTiles(e,this.WEEK_LENGTH-(a+1),"right")),this.chunk(e)}},{key:"organizeMonths",value:function(e){var t=[],a=6,n=0,r=e,c=void 0,o=moment(r[0].date).date(),i=moment(r[0].date).daysInMonth();if(moment(r[0].date).date()>0){c=r.slice(0,i-(o-1));var l=this.padDaysLeft(c[0].date,o-1);r=l.concat(r)}for(;r.length>0;){o=moment(r[0].date).date(),i=moment(r[0].date).daysInMonth(),c=r.splice(0,i-(o-1));var s=moment(c[0].date).day();s>n&&(c=this.padBlankTiles(c,s,"left"));var d=moment(c[c.length-1].date).day();d<a&&(c=this.padBlankTiles(c,this.WEEK_LENGTH-(d+1),"right")),t.push(this.chunk(c))}return t}},{key:"buildDays",value:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?new Date:arguments[1],a=0,n=[],r=void 0;a<e;)r=moment(t).add(a,"days").toISOString(),n.push({date:r}),a+=1;return n}},{key:"storeDayTemplate",value:function(e){this.dayTemplate=e}},{key:"getDayTemplate",value:function(){return this.dayTemplate}}]),e}()},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";function e(e,a,n,r){r.getTemplateUrl=function(){return t[r.nestingDepth]}}var t={year:s["default"],month:u["default"],week:h["default"],day:f["default"]},a={restrict:"E",scope:{},bindToController:{bcStartDate:"@?",bcEndDate:"@?",bcNestingDepth:"@?",bcDays:"@?",bcDayTitleFormat:"@?",bcMonthTitleFormat:"@?",bcDateSelected:"&",bcShowWeekdays:"=?",bcShowMonthTitles:"=?",bcDayTemplate:"@?",bcDateFormat:"@?"},link:e,templateUrl:i["default"],controller:c.CalendarController,controllerAs:"$ctrl"};return a}Object.defineProperty(t,"__esModule",{value:!0}),t.bcCalendarDirective=r;var c=a(5),o=a(6),i=n(o),l=a(7),s=n(l),d=a(8),u=n(d),y=a(9),h=n(y),b=a(10),f=n(b)},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.CalendarController=function(){function e(t,n,r){"ngInject";a(this,e),this.$templateCache=t,this.bcCalendarConfig=n,this.bcCalendarService=r,this._activate()}return e.$inject=["$templateCache","bcCalendarConfig","bcCalendarService"],n(e,[{key:"_activate",value:function(){if(this.today=moment(new Date).startOf("day"),this.startDate=this.bcStartDate||this.bcCalendarConfig.startDate,this.bcEndDate?this.days=this.bcCalendarService.durationInDays(this.startDate,this.bcEndDate):this.days=parseInt(this.bcDays||this.bcCalendarConfig.days,10),this.nestingDepth=this.bcNestingDepth||this.bcCalendarConfig.nestingDepth,this.weekdays=this.bcDayTitleFormat?this.bcCalendarConfig.weekdayStyle[this.bcDayTitleFormat]:this.bcCalendarConfig.weekdayStyle[this.bcCalendarConfig.dayTitleFormat],this.monthTitleFormat=this.bcMonthTitleFormat||this.bcCalendarConfig.monthTitleFormat,this.showMonthTitles="boolean"==typeof this.bcShowMonthTitles?this.bcShowMonthTitles:this.bcCalendarConfig.showMonthTitles,this.selectedDate=null,this.showWeekdays="boolean"==typeof this.bcShowWeekdays?this.bcShowWeekdays:this.bcCalendarConfig.showWeekdays,this.bcDayTemplate||this.bcCalendarConfig.userDayTemplate){var e="userDayTemplate.html";this.bcDayTemplate&&this.$templateCache.put(e,this.bcDayTemplate),this.bcCalendarConfig.userDayTemplate&&this.$templateCache.put(e,this.bcCalendarConfig.userDayTemplate),this.bcCalendarService.storeDayTemplate(e)}else this.bcCalendarService.storeDayTemplate(this.bcCalendarConfig.dayTemplate);this.dateFormat=this.bcDateFormat||this.bcCalendarConfig.dateFormat;var t=this.bcCalendarService.buildDays(this.days,this.startDate);this._buildCalendar(t,this.nestingDepth)}},{key:"isBeforeToday",value:function(e){return this.bcCalendarService.dateIsBeforeToday(e)}},{key:"isDayToday",value:function(e){return this.bcCalendarService.isDayToday(e,this.startDate)}},{key:"selectDate",value:function(e){this.selectedDate=e,e.date&&this.bcDateSelected&&this.bcDateSelected({date:e.date})}},{key:"formatDate",value:function(e,t){return!!e&&moment(e).format(t)}},{key:"_buildCalendar",value:function(e,t){"month"===t?this.bcCollection=this.bcCalendarService.organizeMonths(e):"week"===t?this.bcCollection=this.bcCalendarService.organizeWeeks(e):"day"===t&&(this.bcCollection=e)}}]),e}()},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/calendar.html",n='<section class=bc-calendar> <span class=bc-calendar__weekdays data-ng-if="$ctrl.showWeekdays && $ctrl.nestingDepth === \'week\'"> <span class="bc-calendar__day bc-calendar__day--weekdays" data-ng-repeat="day in $ctrl.weekdays track by $index"> <strong class=bc-calendar__day-title> {{ day }} </strong> </span> </span> <bc-year data-ng-if="$ctrl.nestingDepth === \'year\'" class=bc-calendar__year-wrapper bc-collection=$ctrl.bcCollection></bc-year> <bc-month data-ng-if="$ctrl.nestingDepth === \'month\'" class=bc-calendar__month-wrapper bc-collection=$ctrl.bcCollection></bc-month> <bc-week data-ng-if="$ctrl.nestingDepth === \'week\'" class=bc-calendar__week-wrapper bc-collection=$ctrl.bcCollection></bc-week> <bc-day data-ng-if="$ctrl.nestingDepth === \'day\'" class=bc-calendar__day-wrapper bc-collection=$ctrl.bcCollection></bc-day> </section>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/year.html",n='<div class=bc-calendar__year data-ng-repeat="year in vm.bcCollection track by $index"> <bc-month bc-collection=year bc-weeks-header=$ctrl.weekdaysHeader class=bc-calendar__month-wrapper></bc-month> </div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/month.html",n='<time class=bc-calendar__month datetime="{{ month[0][month[0].length - 1].date | date:\'yyyy-MM\' }}" data-ng-repeat="month in vm.bcCollection track by $index"> <span class=bc-calendar__month-title data-ng-bind="$ctrl.formatDate(month[0][month[0].length - 1].date, $ctrl.monthTitleFormat)" data-ng-if=$ctrl.showMonthTitles></span> <span class=bc-calendar__weekdays data-ng-if=$ctrl.showWeekdays> <span class="bc-calendar__day bc-calendar__day--weekdays" data-ng-repeat="day in $ctrl.weekdays track by $index"> <strong class=bc-calendar__day-title> {{ day }} </strong> </span> </span> <bc-week bc-collection=month class=bc-calendar__week-wrapper></bc-week> </time>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/week.html",n='<time class=bc-calendar__week datetime="{{ week[week.length - 1].date | date:\'yyyy-ww\' }}" data-ng-repeat="week in vm.bcCollection track by $index"> <bc-day bc-collection=week class=bc-calendar__day-wrapper></bc-day> </time>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/day.html",n="<span class=bc-calendar__day data-ng-class=\"{ 'bc-calendar__day--disabled': $ctrl.isBeforeToday(day.date),\n                   'bc-calendar__day--today': $ctrl.isDayToday(day.date),\n                   'bc-calendar__day--even': $even,\n                   'bc-calendar__day--odd': $odd,\n                   'bc-calendar__day--pad': !day.date,\n                   'bc-calendar__day--valid': day.date,\n                   'bc-calendar__day--selected': day.date === $ctrl.selectedDate.date }\" data-ng-click=$ctrl.selectDate(day) data-ng-repeat=\"day in vm.bcCollection track by $index\" title=day.date> <ng-include src=vm.dayTemplate></ng-include> </span>";window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";var e={restrict:"E",scope:!0,bindToController:{bcCollection:"="},templateUrl:o["default"],controller:function(){},controllerAs:"vm"};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.bcYearDirective=r;var c=a(7),o=n(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";var e={restrict:"E",scope:!0,bindToController:{bcCollection:"=",bcWeekdaysHeader:"="},templateUrl:o["default"],controller:function(){},controllerAs:"vm"};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.bcMonthDirective=r;var c=a(8),o=n(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";var e={restrict:"E",scope:!0,bindToController:{bcCollection:"="},templateUrl:o["default"],controller:function(){},controllerAs:"vm"};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.bcWeekDirective=r;var c=a(9),o=n(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){"ngInject";var t={restrict:"E",scope:!0,bindToController:{bcCollection:"="},templateUrl:o["default"],controller:["bcCalendarService",function(e){this.dayTemplate=e.getDayTemplate()}],controllerAs:"vm"};return t}r.$inject=["bcCalendarConfig"],Object.defineProperty(t,"__esModule",{value:!0}),t.bcDayDirective=r;var c=a(10),o=n(c)}])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uPzVjYTYiLCJ3ZWJwYWNrOi8vL2FuZ3VsYXItanNvbi1jYWxlbmRhci5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGVmYzYzMWI2MzM0NjQ3OWVlMTg1PzNiMGQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzPzk1NTIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyLnByb3ZpZGVyLmpzPzQ2YjAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RlbXBsYXRlcy9kYXkuaW5uZXIuaHRtbD9lYzZmIiwid2VicGFjazovLy8uL3NyYy9jYWxlbmRhci5zZXJ2aWNlLmpzPzI2MzkiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyLmRpcmVjdGl2ZS5qcz8xNGU3Iiwid2VicGFjazovLy8uL3NyYy9jYWxlbmRhci5jb250cm9sbGVyLmpzPzNlYjgiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RlbXBsYXRlcy9jYWxlbmRhci5odG1sPzIxNDQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RlbXBsYXRlcy95ZWFyLmh0bWw/NTc1OSIsIndlYnBhY2s6Ly8vLi9zcmMvdGVtcGxhdGVzL21vbnRoLmh0bWw/ZWY2MSIsIndlYnBhY2s6Ly8vLi9zcmMvdGVtcGxhdGVzL3dlZWsuaHRtbD80ODA3Iiwid2VicGFjazovLy8uL3NyYy90ZW1wbGF0ZXMvZGF5Lmh0bWw/OTMwNiIsIndlYnBhY2s6Ly8vLi9zcmMveWVhci5kaXJlY3RpdmUuanM/Mjk5YyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9udGguZGlyZWN0aXZlLmpzPzRkN2QiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlZWsuZGlyZWN0aXZlLmpzP2ViNWYiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RheS5kaXJlY3RpdmUuanM/YTNjMSJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX2NhbGVuZGFyIiwiX2NhbGVuZGFyMiIsIl9jYWxlbmRhcjMiLCJfeWVhciIsIl9tb250aCIsIl93ZWVrIiwiX2RheSIsImFuZ3VsYXIiLCJwcm92aWRlciIsImJjQ2FsZW5kYXJDb25maWciLCJzZXJ2aWNlIiwiYmNDYWxlbmRhclNlcnZpY2UiLCJkaXJlY3RpdmUiLCJiY0NhbGVuZGFyRGlyZWN0aXZlIiwiYmNZZWFyRGlyZWN0aXZlIiwiYmNNb250aERpcmVjdGl2ZSIsImJjV2Vla0RpcmVjdGl2ZSIsImJjRGF5RGlyZWN0aXZlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsInVuZGVmaW5lZCIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX2RheUlubmVyIiwiX2RheUlubmVyMiIsIl90aGlzIiwic3RhcnREYXRlIiwibW9tZW50IiwiRGF0ZSIsInN0YXJ0T2YiLCJmb3JtYXQiLCJuZXN0aW5nRGVwdGgiLCJkYXlzIiwid2Vla2RheVN0eWxlIiwibGV0dGVyIiwiYWJicmV2aWF0aW9uIiwid29yZCIsImRheVRpdGxlRm9ybWF0Iiwic2hvd1dlZWtkYXlzIiwiZGF5VGVtcGxhdGUiLCJzZXREYXlUZW1wbGF0ZSIsInRlbXBsYXRlIiwidXNlckRheVRlbXBsYXRlIiwiZGF0ZUZvcm1hdCIsIm1vbnRoVGl0bGVGb3JtYXQiLCJzaG93TW9udGhUaXRsZXMiLCJwYXRoIiwiaHRtbCIsIndpbmRvdyIsInJ1biIsInB1dCIsIldFRUtfTEVOR1RIIiwiZGF0ZSIsInRvZGF5IiwiaXNCZWZvcmUiLCJkYXRlMiIsImFyZ3VtZW50cyIsImlzU2FtZSIsImNvdW50IiwicHVzaCIsInBhZCIsIm1pc3NpbmdEYXlzIiwiaW50ZWdlclRvQXJyYXkiLCJkYXkiLCJzdWJ0cmFjdGlvbiIsInBhcnNlSW50IiwicHJldmlvdXMiLCJzdWJ0cmFjdCIsInRvSVNPU3RyaW5nIiwidW5zaGlmdCIsImNvbGxlY3Rpb24iLCJkaXJlY3Rpb24iLCJjb25jYXQiLCJncm91cCIsImdyb3Vwc2l6ZSIsInNldHMiLCJjaHVua3MiLCJzcGxpY2UiLCJzdGFydCIsImVuZCIsIm5ld1N0YXJ0IiwibmV3RW5kIiwiYWRkIiwiZGlmZiIsImZpcnN0RGF5IiwibGFzdERheSIsIlNBVFVSREFZIiwiU1VOREFZIiwicGFkQmxhbmtUaWxlcyIsImNodW5rIiwiYWxsRGF5cyIsImNhbGVuZGFyIiwibW9udGgiLCJkYXlPZk1vbnRoIiwiZGF5c0luTW9udGgiLCJzbGljZSIsInBhZERheXNMZWZ0IiwibGltaXQiLCJjb3VudGVyIiwibGlua0Z1bmN0aW9uIiwiJHNjb3BlIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCIkY3RybCIsImdldFRlbXBsYXRlVXJsIiwidGVtcGxhdGVzIiwieWVhciIsIl95ZWFyMiIsIl9tb250aDIiLCJ3ZWVrIiwiX3dlZWsyIiwiX2RheTIiLCJyZXN0cmljdCIsInNjb3BlIiwiYmluZFRvQ29udHJvbGxlciIsImJjU3RhcnREYXRlIiwiYmNFbmREYXRlIiwiYmNOZXN0aW5nRGVwdGgiLCJiY0RheXMiLCJiY0RheVRpdGxlRm9ybWF0IiwiYmNNb250aFRpdGxlRm9ybWF0IiwiYmNEYXRlU2VsZWN0ZWQiLCJiY1Nob3dXZWVrZGF5cyIsImJjU2hvd01vbnRoVGl0bGVzIiwiYmNEYXlUZW1wbGF0ZSIsImJjRGF0ZUZvcm1hdCIsImxpbmsiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJDYWxlbmRhckNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCIkdGVtcGxhdGVDYWNoZSIsIl9hY3RpdmF0ZSIsIiRpbmplY3QiLCJkdXJhdGlvbkluRGF5cyIsIndlZWtkYXlzIiwic2VsZWN0ZWREYXRlIiwidGVtcGxhdGVMb2NhdGlvbiIsInN0b3JlRGF5VGVtcGxhdGUiLCJidWlsZERheXMiLCJfYnVpbGRDYWxlbmRhciIsImRhdGVJc0JlZm9yZVRvZGF5IiwiaXNEYXlUb2RheSIsImRlcHRoIiwiYmNDb2xsZWN0aW9uIiwib3JnYW5pemVNb250aHMiLCJvcmdhbml6ZVdlZWtzIiwiYmNXZWVrZGF5c0hlYWRlciIsImdldERheVRlbXBsYXRlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGdCQUFBQyxVQUFBLGdCQUFBQyxRQUNBQSxPQUFBRCxRQUFBRCxJQUNBLGtCQUFBRyxnQkFBQUMsSUFDQUQsT0FBQSwyQkFBQUgsR0FDQSxnQkFBQUMsU0FDQUEsUUFBQSx5QkFBQUQsSUFFQUQsRUFBQSx5QkFBQUMsS0FDQ0ssS0FBQSxXQUNELE1DQWdCLFVBQVVDLEdDTjFCLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBUCxPQUdBLElBQUFDLEdBQUFPLEVBQUFELElBQ0FQLFdBQ0FTLEdBQUFGLEVBQ0FHLFFBQUEsRUFVQSxPQU5BTCxHQUFBRSxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUyxRQUFBLEVBR0FULEVBQUFELFFBdkJBLEdBQUFRLEtBcUNBLE9BVEFGLEdBQUFNLEVBQUFQLEVBR0FDLEVBQUFPLEVBQUFMLEVBR0FGLEVBQUFRLEVBQUEsR0FHQVIsRUFBQSxLRGdCTSxTQUFTTCxFQUFRRCxFQUFTTSxHRXREaEMsWUFFQVMsUUFBT0MsZUFBZWhCLEVBQVMsY0FDM0JpQixPQUFPLEdBSFgsSUFBQUMsR0FBQVos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S0FBS3VFLFlBQWM5QyxFQUFrQjJKLG1CQUV6Q2xCLGFBQWMsS0FHbEIsT0FBT3hJLEdoQjQ1QlZLLEVBQWVzSSxTQUFXLG9CZ0JqN0IzQjFKLE9BQU9DLGVBQWVoQixFQUFTLGNBQzNCaUIsT0FBTyxJQUVYakIsRUFIZ0JtQyxnQkFGaEIsSUFBQVgsR0FBQWxCLEVBQUEsSUFTSTZJLEVBQVEvRyxFQUF1QloiLCJmaWxlIjoiYW5ndWxhci1qc29uLWNhbGVuZGFyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiYW5ndWxhci1qc29uLWNhbGVuZGFyXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImFuZ3VsYXItanNvbi1jYWxlbmRhclwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJhbmd1bGFyLWpzb24tY2FsZW5kYXJcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiBcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb25cbiAqKi8iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImFuZ3VsYXItanNvbi1jYWxlbmRhclwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJhbmd1bGFyLWpzb24tY2FsZW5kYXJcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiYW5ndWxhci1qc29uLWNhbGVuZGFyXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jYWxlbmRhciA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX2NhbGVuZGFyMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2NhbGVuZGFyMyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX3llYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfbW9udGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdHZhciBfd2VlayA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0dmFyIF9kYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IGFuZ3VsYXIubW9kdWxlKCdiYy5Kc29uQ2FsZW5kYXInLCBbXSkucHJvdmlkZXIoJ2JjQ2FsZW5kYXJDb25maWcnLCBfY2FsZW5kYXIuYmNDYWxlbmRhckNvbmZpZykuc2VydmljZSgnYmNDYWxlbmRhclNlcnZpY2UnLCBfY2FsZW5kYXIyLmJjQ2FsZW5kYXJTZXJ2aWNlKS5kaXJlY3RpdmUoJ2JjQ2FsZW5kYXInLCBfY2FsZW5kYXIzLmJjQ2FsZW5kYXJEaXJlY3RpdmUpLmRpcmVjdGl2ZSgnYmNZZWFyJywgX3llYXIuYmNZZWFyRGlyZWN0aXZlKS5kaXJlY3RpdmUoJ2JjTW9udGgnLCBfbW9udGguYmNNb250aERpcmVjdGl2ZSkuZGlyZWN0aXZlKCdiY1dlZWsnLCBfd2Vlay5iY1dlZWtEaXJlY3RpdmUpLmRpcmVjdGl2ZSgnYmNEYXknLCBfZGF5LmJjRGF5RGlyZWN0aXZlKTtcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuYmNDYWxlbmRhckNvbmZpZyA9IHVuZGVmaW5lZDtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2RheUlubmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfZGF5SW5uZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGF5SW5uZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgYmNDYWxlbmRhckNvbmZpZyA9IGV4cG9ydHMuYmNDYWxlbmRhckNvbmZpZyA9IGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgICAvLyBEZWZpbmUgZGVmYXVsdHNcblx0ICAgIGZ1bmN0aW9uIGJjQ2FsZW5kYXJDb25maWcoKSB7XG5cdCAgICAgICAgJ25nSW5qZWN0Jztcblx0XG5cdCAgICAgICAgLy8gVGhlIGNhbGVuZGFyIHdpbGwgYmVnaW4gd2l0aCB0b2RheVxuXHRcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgYmNDYWxlbmRhckNvbmZpZyk7XG5cdFxuXHQgICAgICAgIHRoaXMuc3RhcnREYXRlID0gbW9tZW50KG5ldyBEYXRlKCkpLnN0YXJ0T2YoJ2RheScpLmZvcm1hdCgpO1xuXHRcblx0ICAgICAgICAvLyBUaGUgZGVmYXVsdCBpbnRlcnZhbCB0eXBlIFtkYXl8d2Vla3xtb250aF1cblx0ICAgICAgICB0aGlzLm5lc3RpbmdEZXB0aCA9ICdtb250aCc7XG5cdFxuXHQgICAgICAgIC8vIEhvdyBtYW55IGRheXMgc2hvdWxkIGJlIGdlbmVyYXRlZFxuXHQgICAgICAgIHRoaXMuZGF5cyA9IDMwO1xuXHRcblx0ICAgICAgICAvLyBEZWZpbmUgdGhlIGRpZmZlcmVudCBwb3NzaWJsZSByZXByZXNlbnRhdGlvbnMgb2YgdGhlIHdlZWtkYXlcblx0ICAgICAgICB0aGlzLndlZWtkYXlTdHlsZSA9IHtcblx0ICAgICAgICAgICAgbGV0dGVyOiBbJ1MnLCAnTScsICdUJywgJ1cnLCAnVCcsICdGJywgJ1MnXSxcblx0ICAgICAgICAgICAgYWJicmV2aWF0aW9uOiBbJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHVyJywgJ0ZyaScsICdTYXQnXSxcblx0ICAgICAgICAgICAgd29yZDogWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddXG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgLy8gU2V0IHRoZSBkZWZhdWx0IHdvcmQgdHlwZSAoTSB2cyBNb24gdnMgTW9uZGF5KVxuXHQgICAgICAgIHRoaXMuZGF5VGl0bGVGb3JtYXQgPSAnYWJicmV2aWF0aW9uJztcblx0XG5cdCAgICAgICAgLy8gU2hvdWxkIHRoZSBjYWxlbmRhciBzaG93IHRoZSB3ZWVrZGF5IG5hbWVzIGFib3ZlIGVhY2ggY29sdW1uP1xuXHQgICAgICAgIHRoaXMuc2hvd1dlZWtkYXlzID0gdHJ1ZTtcblx0XG5cdCAgICAgICAgLy8gRGVmaW5lIHRoZSBkZWZhdWx0IHRlbXBsYXRlIGZvciBhIGRheVxuXHQgICAgICAgIHRoaXMuZGF5VGVtcGxhdGUgPSBfZGF5SW5uZXIyLmRlZmF1bHQ7XG5cdFxuXHQgICAgICAgIC8vIEFsbG93IHRoZSB1c2VyIHRvIHNldCBhIGN1c3RvbSB0ZW1wbGF0ZVxuXHQgICAgICAgIHRoaXMuc2V0RGF5VGVtcGxhdGUgPSBmdW5jdGlvbiAodGVtcGxhdGUpIHtcblx0ICAgICAgICAgICAgX3RoaXMudXNlckRheVRlbXBsYXRlID0gdGVtcGxhdGU7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgLy8gRGVmaW5lIHRoZSBkZWZhdWx0IGZvcm1hdCBmb3IgYSBkYXlcblx0ICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSAnRCc7XG5cdFxuXHQgICAgICAgIC8vIERlZmluZSB0aGUgZGVmYXVsdCBmb3JtYXQgZm9yIGEgbW9udGggdGl0bGVcblx0ICAgICAgICB0aGlzLm1vbnRoVGl0bGVGb3JtYXQgPSAnTU1NTSc7XG5cdFxuXHQgICAgICAgIC8vIFNob3VsZCBtb250aCB0aXRsZXMgYmUgc2hvd24gYnkgZGVmYXVsdD9cblx0ICAgICAgICB0aGlzLnNob3dNb250aFRpdGxlcyA9IHRydWU7XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKGJjQ2FsZW5kYXJDb25maWcsIFt7XG5cdCAgICAgICAga2V5OiAnJGdldCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICRnZXQoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gYmNDYWxlbmRhckNvbmZpZztcblx0fSgpO1xuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvZGF5LmlubmVyLmh0bWwnO1xuXHR2YXIgaHRtbCA9IFwiPHRpbWUgZGF0ZXRpbWU9XFxcInt7IGRheS5kYXRlIHwgZGF0ZToneXl5eS1NTS1kZCcgfX1cXFwiIGNsYXNzPWJjLWNhbGVuZGFyX19kYXktdGltZSB0aXRsZT1cXFwie3sgZGF5LmRhdGUgfX1cXFwiIGRhdGEtbmctaWY9ZGF5LmRhdGU+IDxzcGFuIGRhdGEtbmctYmluZD1cXFwiJGN0cmwuZm9ybWF0RGF0ZShkYXkuZGF0ZSwgJGN0cmwuZGF0ZUZvcm1hdClcXFwiPjwvc3Bhbj4gPC90aW1lPlwiO1xuXHR3aW5kb3cuYW5ndWxhci5tb2R1bGUoJ25nJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbihjKSB7IGMucHV0KHBhdGgsIGh0bWwpIH1dKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0dmFyIGJjQ2FsZW5kYXJTZXJ2aWNlID0gZXhwb3J0cy5iY0NhbGVuZGFyU2VydmljZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIGJjQ2FsZW5kYXJTZXJ2aWNlKCkge1xuXHQgICAgICAgICduZ0luamVjdCc7XG5cdFxuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBiY0NhbGVuZGFyU2VydmljZSk7XG5cdFxuXHQgICAgICAgIHRoaXMuV0VFS19MRU5HVEggPSA3O1xuXHQgICAgICAgIHRoaXMuZGF5VGVtcGxhdGU7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDaGVjayB0byBzZWUgaWYgdGhlIGRheSBpcyBwcmlvciB0byB0aGUgY3VycmVudCBkYXRlXG5cdCAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZGlzYWJsZSB0aGUgdW5zZWxlY3RhYmxlIGRheXNcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVxuXHQgICAgICogQHJldHVybiB7Qm9vbH0gaXNCZWZvcmVcblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoYmNDYWxlbmRhclNlcnZpY2UsIFt7XG5cdCAgICAgICAga2V5OiAnZGF0ZUlzQmVmb3JlVG9kYXknLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkYXRlSXNCZWZvcmVUb2RheShkYXRlKSB7XG5cdCAgICAgICAgICAgIHZhciB0b2RheSA9IG1vbWVudChuZXcgRGF0ZSgpKS5zdGFydE9mKCdkYXknKS5mb3JtYXQoKTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuaXNCZWZvcmUodG9kYXkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBkYXkgbWF0Y2hlcyB0aGUgY3VycmVudCBkYXRlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVxuXHQgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlMlxuXHQgICAgICAgICAqIEByZXR1cm4ge0Jvb2x9IGlzVG9kYXlcblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnaXNEYXlUb2RheScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRGF5VG9kYXkoZGF0ZSkge1xuXHQgICAgICAgICAgICB2YXIgZGF0ZTIgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBtb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KCkgOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmlzU2FtZShkYXRlMik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBUdXJuIGEgaW50ZWdlciAoZS5nLiAnNicpIGludG8gYW4gYXJyYXk6ICdbMSwyLDMsNCw1LDZdJ1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtJbnRlZ2VyfSBjb3VudFxuXHQgICAgICAgICAqIEByZXR1cm4ge0FycmF5fSBkYXlzXG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2ludGVnZXJUb0FycmF5Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW50ZWdlclRvQXJyYXkoY291bnQpIHtcblx0ICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG5cdCAgICAgICAgICAgIHZhciBkYXlzID0gW107XG5cdFxuXHQgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQ7IGkgKz0gMSkge1xuXHQgICAgICAgICAgICAgICAgZGF5cy5wdXNoKGkpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gZGF5cztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIFBhZCB0aGUgYmVnaW5uaW5nIG9mIGEgd2Vla1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXJ0RGF0ZSAtIGRhdGUgdG8gdG8gd29yayBiYWNrIGZyb21cblx0ICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBjb3VudCAtIGhvdyBtYW55IGRheXMgdG8gcGFkXG5cdCAgICAgICAgICogQHJldHVybiB7QXJyYXl9IHBhZFxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdwYWREYXlzTGVmdCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBhZERheXNMZWZ0KHN0YXJ0RGF0ZSwgY291bnQpIHtcblx0ICAgICAgICAgICAgdmFyIHBhZCA9IFtdO1xuXHQgICAgICAgICAgICB2YXIgbWlzc2luZ0RheXMgPSB0aGlzLmludGVnZXJUb0FycmF5KGNvdW50KTtcblx0XG5cdCAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBtaXNzaW5nIGRheXNcblx0ICAgICAgICAgICAgZm9yICh2YXIgZGF5IGluIG1pc3NpbmdEYXlzKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBIb3cgbWFueSBkYXlzIHRvIGdvIGJhY2tcblx0ICAgICAgICAgICAgICAgIHZhciBzdWJ0cmFjdGlvbiA9IHBhcnNlSW50KGRheSwgMTApICsgMTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBGaW5kIHRoYXQgZGF5XG5cdCAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXMgPSBtb21lbnQoc3RhcnREYXRlKS5zdWJ0cmFjdChzdWJ0cmFjdGlvbiwgJ2RheXMnKS50b0lTT1N0cmluZygpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEFkZCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuXHQgICAgICAgICAgICAgICAgcGFkLnVuc2hpZnQoe1xuXHQgICAgICAgICAgICAgICAgICAgIGRhdGU6IHByZXZpb3VzXG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHBhZDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIFBhZCBhIGNvbGxlY3Rpb24gd2l0aCBibGFuayB0aWxlc1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtBcnJheX0gY29sbGVjdGlvblxuXHQgICAgICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gY291bnRcblx0ICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX0gcGFkZGVkQ29sbGVjdGlvblxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdwYWRCbGFua1RpbGVzJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGFkQmxhbmtUaWxlcyhjb2xsZWN0aW9uLCBjb3VudCkge1xuXHQgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gJ2xlZnQnIDogYXJndW1lbnRzWzJdO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG5cdCAgICAgICAgICAgIHZhciBkYXlzID0gW107XG5cdFxuXHQgICAgICAgICAgICAvLyBDcmVhdGUgYXJyYXlcblx0ICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyBpICs9IDEpIHtcblx0ICAgICAgICAgICAgICAgIGRheXMucHVzaCh7XG5cdCAgICAgICAgICAgICAgICAgICAgZGF0ZTogbnVsbFxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIC8vIElmIGRpcmVjdGlvbiBpcyAncmlnaHQnXG5cdCAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcblx0ICAgICAgICAgICAgICAgIC8vIHBhZCB0aGUgZW5kXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5jb25jYXQoZGF5cyk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcblx0ICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBwYWQgdGhlIGJlZ2lubmluZ1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGRheXMuY29uY2F0KGNvbGxlY3Rpb24pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBTcGxpdCBhbiBhcnJheSBpbnRvIGNodW5rcyBhbmQgcmV0dXJuIGFuIGFycmF5IG9mIHRoZXNlIGNodW5rc1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZ3JvdXBcblx0ICAgICAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IGdyb3Vwc2l6ZSAtIENodW5rIHNpemUuIERlZmF1bHRzIHRvIDcgKG9uZSB3ZWVrKS5cblx0ICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX0gY2h1bmtzXG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2NodW5rJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2h1bmsoZ3JvdXApIHtcblx0ICAgICAgICAgICAgdmFyIGdyb3Vwc2l6ZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHRoaXMuV0VFS19MRU5HVEggOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgICAgICAgICAgICB2YXIgc2V0cyA9IFtdO1xuXHQgICAgICAgICAgICB2YXIgaSA9IDA7XG5cdCAgICAgICAgICAgIHZhciBjaHVua3MgPSBncm91cC5sZW5ndGggLyBwYXJzZUludChncm91cHNpemUsIDEwKTtcblx0XG5cdCAgICAgICAgICAgIHdoaWxlIChpIDwgY2h1bmtzKSB7XG5cdCAgICAgICAgICAgICAgICBzZXRzW2ldID0gZ3JvdXAuc3BsaWNlKDAsIGdyb3Vwc2l6ZSk7XG5cdCAgICAgICAgICAgICAgICBpID0gaSArIDE7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBzZXRzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogR2V0IHRoZSBkdXJhdGlvbiBpbiBkYXlzIGJldHdlZW4gdHdvIGRhdGVzIElOQ0xVRElORyBib3RoIGRhdGVzXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RhcnRcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZW5kXG5cdCAgICAgICAgICogQHJldHVybiB7SW50ZWdlcn0gZGF5c1xuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdkdXJhdGlvbkluRGF5cycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGR1cmF0aW9uSW5EYXlzKHN0YXJ0LCBlbmQpIHtcblx0ICAgICAgICAgICAgdmFyIG5ld1N0YXJ0ID0gbW9tZW50KHN0YXJ0KS5zdGFydE9mKCdkYXknKTtcblx0ICAgICAgICAgICAgLy8gQWRkIGEgZGF5IHNvIHRoZSBlbmQgZGF0ZSBpcyBpbmNsdWRlZCBpbiB0aGUgY2FsY3VsYXRpb25cblx0ICAgICAgICAgICAgdmFyIG5ld0VuZCA9IG1vbWVudChlbmQpLnN0YXJ0T2YoJ2RheScpLmFkZCgxLCAnZGF5cycpO1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIG5ld0VuZC5kaWZmKG5ld1N0YXJ0LCAnZGF5cycpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogT3JnYW5pemUgYSBjb2xsZWN0aW9uIG9mIGRheXMgaW50byBzdWIgY29sbGVjdGlvbnMgb2Ygd2Vla3Ncblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGRheXMgLSBhcnJheSBvZiBkYXlzXG5cdCAgICAgICAgICogQHJldHVybiB7QXJyYXl9IGNvbGxlY3Rpb25cblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnb3JnYW5pemVXZWVrcycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9yZ2FuaXplV2Vla3MoZGF5cykge1xuXHQgICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGRheSBvZiB0aGUgd2VlayB0aGF0IHRoZSBjYWxlbmRhciBzdGFydHMgYW5kIGVuZHMgb25cblx0ICAgICAgICAgICAgdmFyIGZpcnN0RGF5ID0gbW9tZW50KGRheXNbMF0uZGF0ZSkuZGF5KCk7XG5cdCAgICAgICAgICAgIHZhciBsYXN0RGF5ID0gbW9tZW50KGRheXNbZGF5cy5sZW5ndGggLSAxXS5kYXRlKS5kYXkoKTtcblx0ICAgICAgICAgICAgdmFyIFNBVFVSREFZID0gNjtcblx0ICAgICAgICAgICAgdmFyIFNVTkRBWSA9IDA7XG5cdFxuXHQgICAgICAgICAgICAvLyBJZiB0aGUgZmlyc3QgZGF5IGlzIGFmdGVyIFN1bmRheVxuXHQgICAgICAgICAgICBpZiAoZmlyc3REYXkgPiBTVU5EQVkpIHtcblx0ICAgICAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoZSBmaXJzdCBkYXkgaXMgbGluZWQgdXAgaW4gdGhlIGNvcnJlY3Qgd2Vla2RheSBjb2x1bW5cblx0ICAgICAgICAgICAgICAgIGRheXMgPSB0aGlzLnBhZEJsYW5rVGlsZXMoZGF5cywgZmlyc3REYXksICdsZWZ0Jyk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIC8vIElmIHRoZSBsYXN0IGRheSBpcyBiZWZvcmUgU2F0dXJkYXlcblx0ICAgICAgICAgICAgaWYgKGxhc3REYXkgPCBTQVRVUkRBWSkge1xuXHQgICAgICAgICAgICAgICAgLy8gUGFkIHdpdGggYmxhbmsgdGlsZXMgc28gdGhhdCB0aGUgbGFzdCB3ZWVrJ3MgZGF5cyBhcmUgaW4gdGhlIGNvcnJlY3Qgd2Vla2RheSBjb2x1bW5cblx0ICAgICAgICAgICAgICAgIGRheXMgPSB0aGlzLnBhZEJsYW5rVGlsZXMoZGF5cywgdGhpcy5XRUVLX0xFTkdUSCAtIChsYXN0RGF5ICsgMSksICdyaWdodCcpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5jaHVuayhkYXlzKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIE9yZ2FuaXplIGJ5IG1vbnRoXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhbGxEYXlzIC0gQW4gYXJyYXkgb2YgYWxsIGRheXNcblx0ICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX0gY29sbGVjdGlvbiAtIGRheXMgb3JnYW5pemVkIGludG8gd2Vla3MgYW5kIG1vbnRoc1xuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdvcmdhbml6ZU1vbnRocycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9yZ2FuaXplTW9udGhzKGFsbERheXMpIHtcblx0ICAgICAgICAgICAgdmFyIGNhbGVuZGFyID0gW107XG5cdCAgICAgICAgICAgIHZhciBTQVRVUkRBWSA9IDY7XG5cdCAgICAgICAgICAgIHZhciBTVU5EQVkgPSAwO1xuXHQgICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IGFsbERheXM7XG5cdCAgICAgICAgICAgIHZhciBtb250aCA9IHZvaWQgMDtcblx0ICAgICAgICAgICAgdmFyIGRheU9mTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXRlKCk7XG5cdCAgICAgICAgICAgIHZhciBkYXlzSW5Nb250aCA9IG1vbWVudChjb2xsZWN0aW9uWzBdLmRhdGUpLmRheXNJbk1vbnRoKCk7XG5cdFxuXHQgICAgICAgICAgICAvLyBQYWQgdGhlIGJlZ2lubmluZyBvZiB0aGUgbW9udGggd2l0aCBhbnkgbWlzc2luZyBkYXlzXG5cdCAgICAgICAgICAgIC8vIElmIHRoZSBmaXJzdCBkYXkgaXMgbm90IHRoZSBmaXJzdCBkYXkgb2YgdGhlIG1vbnRoXG5cdCAgICAgICAgICAgIGlmIChtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXRlKCkgPiAwKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBQdWxsIHRoaXMgbW9udGgncyBkYXlzIGZyb20gdGhlIGNvbGxlY3Rpb25cblx0ICAgICAgICAgICAgICAgIG1vbnRoID0gY29sbGVjdGlvbi5zbGljZSgwLCBkYXlzSW5Nb250aCAtIChkYXlPZk1vbnRoIC0gMSkpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEZpbGwgdGhlIG1pc3NpbmcgZGF5cyBmcm9tIHRoZSBtb250aFxuXHQgICAgICAgICAgICAgICAgdmFyIHBhZCA9IHRoaXMucGFkRGF5c0xlZnQobW9udGhbMF0uZGF0ZSwgZGF5T2ZNb250aCAtIDEpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIENvbWJpbmUgd2l0aCB0aGUgZXhpc3RpbmcgYXJyYXlcblx0ICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBwYWQuY29uY2F0KGNvbGxlY3Rpb24pO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAvLyBTcGxpdCBpbnRvIG1vbnRoc1xuXHQgICAgICAgICAgICAvLyBBcyBsb25nIGFzIHRoZXJlIGFyZSBkYXlzIGxlZnQgaW4gdGhlIGNvbGxlY3Rpb25cblx0ICAgICAgICAgICAgd2hpbGUgKGNvbGxlY3Rpb24ubGVuZ3RoID4gMCkge1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgZGF5IG9mIHRoZSBtb250aCBmb3IgdGhlIGZpcnN0IGRhdGUgb2YgdGhlIGNvbGxlY3Rpb24gZWcuICcyNCdcblx0ICAgICAgICAgICAgICAgIGRheU9mTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXRlKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGhvdyBtYW55IGRheXMgdGhlcmUgYXJlIHRoaXMgbW9udGggKHRvdGFsKVxuXHQgICAgICAgICAgICAgICAgZGF5c0luTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXlzSW5Nb250aCgpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIFB1bGwgdGhpcyBtb250aCdzIGRheXMgZnJvbSB0aGUgY29sbGVjdGlvblxuXHQgICAgICAgICAgICAgICAgbW9udGggPSBjb2xsZWN0aW9uLnNwbGljZSgwLCBkYXlzSW5Nb250aCAtIChkYXlPZk1vbnRoIC0gMSkpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IHdlZWtkYXlzIGFyZSBwcmlvciB0byB0aGUgZmlyc3QgZGF5IG9mIHRoaXMgbW9udGg/XG5cdCAgICAgICAgICAgICAgICB2YXIgZmlyc3REYXkgPSBtb21lbnQobW9udGhbMF0uZGF0ZSkuZGF5KCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGZpcnN0IGRheSBpcyBhZnRlciBTdW5kYXlcblx0ICAgICAgICAgICAgICAgIGlmIChmaXJzdERheSA+IFNVTkRBWSkge1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoYXQgdGhlIGZpcnN0IGRheSBpcyBsaW5lZCB1cCBpbiB0aGUgY29ycmVjdCBjb2x1bW5cblx0ICAgICAgICAgICAgICAgICAgICBtb250aCA9IHRoaXMucGFkQmxhbmtUaWxlcyhtb250aCwgZmlyc3REYXksICdsZWZ0Jyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gSG93IG1hbnkgd2Vla2RheXMgYXJlIGFmdGVyIHRoZSBsYXN0IGRheSBvZiB0aGUgbW9udGg/XG5cdCAgICAgICAgICAgICAgICAvLyAocmVtZW1iZXI6IHdlZWtzIGFyZSB6ZXJvLWJhc2VkKVxuXHQgICAgICAgICAgICAgICAgdmFyIGxhc3REYXkgPSBtb21lbnQobW9udGhbbW9udGgubGVuZ3RoIC0gMV0uZGF0ZSkuZGF5KCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gSWYgYmxhbmsgdGlsZXMgYXJlIG5lZWRlZCBmb3IgdGhlIGxhc3Qgd2Vla1xuXHQgICAgICAgICAgICAgICAgaWYgKGxhc3REYXkgPCBTQVRVUkRBWSkge1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoYXQgdGhlIGZpcnN0IGRheSBpcyBsaW5lZCB1cCBpbiB0aGUgY29ycmVjdCBjb2x1bW5cblx0ICAgICAgICAgICAgICAgICAgICBtb250aCA9IHRoaXMucGFkQmxhbmtUaWxlcyhtb250aCwgdGhpcy5XRUVLX0xFTkdUSCAtIChsYXN0RGF5ICsgMSksICdyaWdodCcpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIC8vIE9yZ2FuaXplIGludG8gd2Vla3MgYW5kIGFkZCB0byB0aGUgY2FsZW5kYXIgYXJyYXlcblx0ICAgICAgICAgICAgICAgIGNhbGVuZGFyLnB1c2godGhpcy5jaHVuayhtb250aCkpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gY2FsZW5kYXI7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBCdWlsZCBhbiBhcnJheSBvZiBkYXlzXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IGxpbWl0IC0gaG93IG1hbnkgZGF5cyB0byBjcmVhdGVcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RhcnQgLSB0aGUgc3RhcnRpbmcgZGF0ZVxuXHQgICAgICAgICAqIEByZXR1cm4ge0FycmF5fSBkYXlzXG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2J1aWxkRGF5cycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkRGF5cyhsaW1pdCkge1xuXHQgICAgICAgICAgICB2YXIgc3RhcnQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBuZXcgRGF0ZSgpIDogYXJndW1lbnRzWzFdO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSAwO1xuXHQgICAgICAgICAgICB2YXIgZGF5cyA9IFtdO1xuXHQgICAgICAgICAgICB2YXIgZGF5ID0gdm9pZCAwO1xuXHRcblx0ICAgICAgICAgICAgd2hpbGUgKGNvdW50ZXIgPCBsaW1pdCkge1xuXHQgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBkYXlcblx0ICAgICAgICAgICAgICAgIGRheSA9IG1vbWVudChzdGFydCkuYWRkKGNvdW50ZXIsICdkYXlzJykudG9JU09TdHJpbmcoKTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBBZGQgdG8gdGhlIGFycmF5XG5cdCAgICAgICAgICAgICAgICBkYXlzLnB1c2goe1xuXHQgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRheVxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gSW5jcmVtZW50IHRoZSBjb3VudGVyXG5cdCAgICAgICAgICAgICAgICBjb3VudGVyID0gY291bnRlciArIDE7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBkYXlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogU2V0IHRoZSBpbm5lciBkYXkgdGVtcGxhdGVcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdzdG9yZURheVRlbXBsYXRlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcmVEYXlUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuXHQgICAgICAgICAgICB0aGlzLmRheVRlbXBsYXRlID0gdGVtcGxhdGU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBHZXQgdGhlIGlubmVyIGRheSB0ZW1wbGF0ZVxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSB0ZW1wbGF0ZVxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdnZXREYXlUZW1wbGF0ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERheVRlbXBsYXRlKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXlUZW1wbGF0ZTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIGJjQ2FsZW5kYXJTZXJ2aWNlO1xuXHR9KCk7XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmJjQ2FsZW5kYXJEaXJlY3RpdmUgPSBiY0NhbGVuZGFyRGlyZWN0aXZlO1xuXHRcblx0dmFyIF9jYWxlbmRhciA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2NhbGVuZGFyMiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX2NhbGVuZGFyMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NhbGVuZGFyMik7XG5cdFxuXHR2YXIgX3llYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF95ZWFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3llYXIpO1xuXHRcblx0dmFyIF9tb250aCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX21vbnRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21vbnRoKTtcblx0XG5cdHZhciBfd2VlayA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX3dlZWsyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2Vlayk7XG5cdFxuXHR2YXIgX2RheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0dmFyIF9kYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGF5KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBiY0NhbGVuZGFyRGlyZWN0aXZlKCkge1xuXHQgICAgJ25nSW5qZWN0Jztcblx0XG5cdCAgICAvLyBEZWZpbmUgcG9zc2libGUgdGVtcGxhdGVzXG5cdFxuXHQgICAgdmFyIHRlbXBsYXRlcyA9IHtcblx0ICAgICAgICB5ZWFyOiBfeWVhcjIuZGVmYXVsdCxcblx0ICAgICAgICBtb250aDogX21vbnRoMi5kZWZhdWx0LFxuXHQgICAgICAgIHdlZWs6IF93ZWVrMi5kZWZhdWx0LFxuXHQgICAgICAgIGRheTogX2RheTIuZGVmYXVsdFxuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgZGlyZWN0aXZlID0ge1xuXHQgICAgICAgIHJlc3RyaWN0OiAnRScsXG5cdCAgICAgICAgc2NvcGU6IHt9LFxuXHQgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0ICAgICAgICAgICAgYmNTdGFydERhdGU6ICdAPycsIC8vIGRhdGUgLSBkZWZhdWx0IHRvIHRvZGF5XG5cdCAgICAgICAgICAgIGJjRW5kRGF0ZTogJ0A/JywgLy8gZGF0ZSAtIGlmIG5vdCBwcmVzZW50LCB1c2UgY3JlYXRlIHVzaW5nIGJjRGF5c1xuXHQgICAgICAgICAgICBiY05lc3RpbmdEZXB0aDogJ0A/JywgLy8gc3RyaW5nIFttb250aHx3ZWVrfGRheV0gLSBkZWZhdWx0czogbW9udGhcblx0ICAgICAgICAgICAgYmNEYXlzOiAnQD8nLCAvLyBpbnRlZ2VyIC0gZGVmYXVsdCB0byAzMCAodXNlZCB0byBjcmVhdGUgYmNFbmREYXRlKVxuXHQgICAgICAgICAgICBiY0RheVRpdGxlRm9ybWF0OiAnQD8nLCAvLyBzdHJpbmcgW3dvcmR8YWJicmV2aWF0aW9ufGxldHRlcl0gLSBkZWZhdWx0OiBhYmJyZXZpYXRpb25cblx0ICAgICAgICAgICAgYmNNb250aFRpdGxlRm9ybWF0OiAnQD8nLCAvLyBzdHJpbmcgLSBhbnkgdmFsaWQgTW9tZW50IGRhdGUgZm9ybWF0IC0gZGVmYXVsdDogTU1NTVxuXHQgICAgICAgICAgICBiY0RhdGVTZWxlY3RlZDogJyYnLCAvLyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aGVuIGEgZGF0ZSBpcyBzZWxlY3RlZCAodGFwL2NsaWNrKVxuXHQgICAgICAgICAgICBiY1Nob3dXZWVrZGF5czogJz0/JywgLy8gZGV0ZXJtaW5lIGlmIHRoZSB3ZWVrZGF5cyBoZWFkZXIgc2hvdWxkIGJlIGNyZWF0ZWRcblx0ICAgICAgICAgICAgYmNTaG93TW9udGhUaXRsZXM6ICc9PycsIC8vIGRldGVybWluZSBpZiB0aGUgbW9udGggdGl0bGVzIHNob3VsZCBiZSB2aXNpYmxlXG5cdCAgICAgICAgICAgIGJjRGF5VGVtcGxhdGU6ICdAPycsIC8vIG92ZXJ3cml0ZSB0aGUgZGVmYXVsdCAnZGF5JyB0ZW1wbGF0ZVxuXHQgICAgICAgICAgICBiY0RhdGVGb3JtYXQ6ICdAPycgfSxcblx0ICAgICAgICBsaW5rOiBsaW5rRnVuY3Rpb24sXG5cdCAgICAgICAgdGVtcGxhdGVVcmw6IF9jYWxlbmRhcjMuZGVmYXVsdCxcblx0ICAgICAgICBjb250cm9sbGVyOiBfY2FsZW5kYXIuQ2FsZW5kYXJDb250cm9sbGVyLFxuXHQgICAgICAgIGNvbnRyb2xsZXJBczogJyRjdHJsJ1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gZGlyZWN0aXZlO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogTGlua1xuXHQgICAgICovXG5cdCAgICBmdW5jdGlvbiBsaW5rRnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkY3RybCkge1xuXHRcblx0ICAgICAgICAvLyBTZXQgdGhlIGNvcnJlY3QgdGVtcGxhdGUgYmFzZWQgb24gdGhlIGRlc2lyZWQgbmVzdGluZyBkZXB0aFxuXHQgICAgICAgICRjdHJsLmdldFRlbXBsYXRlVXJsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGVzWyRjdHJsLm5lc3RpbmdEZXB0aF07XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0dmFyIENhbGVuZGFyQ29udHJvbGxlciA9IGV4cG9ydHMuQ2FsZW5kYXJDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgQ2FsZW5kYXJDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkdGVtcGxhdGVDYWNoZVwiLCBcImJjQ2FsZW5kYXJDb25maWdcIiwgXCJiY0NhbGVuZGFyU2VydmljZVwiXTtcblx0ICAgIGZ1bmN0aW9uIENhbGVuZGFyQ29udHJvbGxlcigkdGVtcGxhdGVDYWNoZSwgYmNDYWxlbmRhckNvbmZpZywgYmNDYWxlbmRhclNlcnZpY2UpIHtcblx0ICAgICAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FsZW5kYXJDb250cm9sbGVyKTtcblx0XG5cdCAgICAgICAgdGhpcy4kdGVtcGxhdGVDYWNoZSA9ICR0ZW1wbGF0ZUNhY2hlO1xuXHQgICAgICAgIHRoaXMuYmNDYWxlbmRhckNvbmZpZyA9IGJjQ2FsZW5kYXJDb25maWc7XG5cdCAgICAgICAgdGhpcy5iY0NhbGVuZGFyU2VydmljZSA9IGJjQ2FsZW5kYXJTZXJ2aWNlO1xuXHRcblx0ICAgICAgICB0aGlzLl9hY3RpdmF0ZSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhDYWxlbmRhckNvbnRyb2xsZXIsIFt7XG5cdCAgICAgICAga2V5OiAnX2FjdGl2YXRlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2FjdGl2YXRlKCkge1xuXHQgICAgICAgICAgICAvLyBEZWZpbmUgdG9kYXkncyBkYXRlXG5cdCAgICAgICAgICAgIHRoaXMudG9kYXkgPSBtb21lbnQobmV3IERhdGUoKSkuc3RhcnRPZignZGF5Jyk7XG5cdFxuXHQgICAgICAgICAgICAvLyBEZWZpbmUgdGhlIHN0YXJ0IGRhdGUgZm9yIHRoZSBjYWxlbmRhclxuXHQgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IHRoaXMuYmNTdGFydERhdGUgfHwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnN0YXJ0RGF0ZTtcblx0XG5cdCAgICAgICAgICAgIC8vIElmIHRoZSBlbmQgZGF0ZSB3YXMgZGVmaW5lZFxuXHQgICAgICAgICAgICBpZiAodGhpcy5iY0VuZERhdGUpIHtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBEZWZpbmUgaG93IG1hbnkgZGF5cyBhcmUgbmVlZGVkIHVzaW5nIHRoZSBlbmQgZGF0ZVxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXlzID0gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5kdXJhdGlvbkluRGF5cyh0aGlzLnN0YXJ0RGF0ZSwgdGhpcy5iY0VuZERhdGUpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIERlZmluZSBob3cgbWFueSBkYXlzIGFyZSBuZWVkZWQgZnJvbSB0aGUgY291bnQgcGFzc2VkIGluIG9yIHRoZSBjb25maWdcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGF5cyA9IHBhcnNlSW50KHRoaXMuYmNEYXlzIHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5kYXlzLCAxMCk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIC8vIERlZmluZSBob3cgZGVlcCB0byBvcmdhbml6ZSB0aGUgY2FsZW5kYXJcblx0ICAgICAgICAgICAgdGhpcy5uZXN0aW5nRGVwdGggPSB0aGlzLmJjTmVzdGluZ0RlcHRoIHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5uZXN0aW5nRGVwdGg7XG5cdFxuXHQgICAgICAgICAgICAvLyBEZWZpbmUgdGhlIHdlZWtkYXkgaGVhZGVycyBmb3JtYXRcblx0ICAgICAgICAgICAgdGhpcy53ZWVrZGF5cyA9IHRoaXMuYmNEYXlUaXRsZUZvcm1hdCA/IHRoaXMuYmNDYWxlbmRhckNvbmZpZy53ZWVrZGF5U3R5bGVbdGhpcy5iY0RheVRpdGxlRm9ybWF0XSA6IHRoaXMuYmNDYWxlbmRhckNvbmZpZy53ZWVrZGF5U3R5bGVbdGhpcy5iY0NhbGVuZGFyQ29uZmlnLmRheVRpdGxlRm9ybWF0XTtcblx0XG5cdCAgICAgICAgICAgIC8vIERlZmluZSB0aGUgZm9ybWF0IGZvciB0aGUgbW9udGggdGl0bGVcblx0ICAgICAgICAgICAgdGhpcy5tb250aFRpdGxlRm9ybWF0ID0gdGhpcy5iY01vbnRoVGl0bGVGb3JtYXQgfHwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLm1vbnRoVGl0bGVGb3JtYXQ7XG5cdFxuXHQgICAgICAgICAgICAvLyBEZWZpbmUgaWYgbW9udGggdGl0bGVzIHNob3VsZCBiZSB2aXNpYmxlXG5cdCAgICAgICAgICAgIHRoaXMuc2hvd01vbnRoVGl0bGVzID0gdHlwZW9mIHRoaXMuYmNTaG93TW9udGhUaXRsZXMgPT09ICdib29sZWFuJyA/IHRoaXMuYmNTaG93TW9udGhUaXRsZXMgOiB0aGlzLmJjQ2FsZW5kYXJDb25maWcuc2hvd01vbnRoVGl0bGVzO1xuXHRcblx0ICAgICAgICAgICAgLy8gSW5pdGlhbGx5IG5vIGRhdGUgaXMgc2VsZWN0ZWRcblx0ICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSBudWxsO1xuXHRcblx0ICAgICAgICAgICAgLy8gU2V0IHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBjYWxlbmRhciB3ZWVrZGF5cyBoZWFkZXJzXG5cdCAgICAgICAgICAgIHRoaXMuc2hvd1dlZWtkYXlzID0gdHlwZW9mIHRoaXMuYmNTaG93V2Vla2RheXMgPT09ICdib29sZWFuJyA/IHRoaXMuYmNTaG93V2Vla2RheXMgOiB0aGlzLmJjQ2FsZW5kYXJDb25maWcuc2hvd1dlZWtkYXlzO1xuXHRcblx0ICAgICAgICAgICAgLy8gSWYgYSBjdXN0b20gZGF5IHRlbXBsYXRlIGhhcyBiZWVuIHNldCBpbiBlaXRoZXIgbG9jYXRpb24gKGF0dHJpYnV0ZSBvciBwcm92aWRlcilcblx0ICAgICAgICAgICAgaWYgKHRoaXMuYmNEYXlUZW1wbGF0ZSB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcudXNlckRheVRlbXBsYXRlKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBOYW1lIHRoZSB0ZW1wbGF0ZSBsb2NhdGlvblxuXHQgICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlTG9jYXRpb24gPSAndXNlckRheVRlbXBsYXRlLmh0bWwnO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIHNldCBhIHRlbXBsYXRlIHZpYSB0aGUgZGlyZWN0aXZlIGF0dHJpYnV0ZVxuXHQgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmNEYXlUZW1wbGF0ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIFB1dCB0aGUgdXNlciB0ZW1wbGF0ZSBpbnRvIHRoZSBjYWNoZVxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuJHRlbXBsYXRlQ2FjaGUucHV0KHRlbXBsYXRlTG9jYXRpb24sIHRoaXMuYmNEYXlUZW1wbGF0ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgZGVmaW5lZCBhIHRlbXBsYXRlIHVzaW5nIHRoZSBwcm92aWRlclxuXHQgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmNDYWxlbmRhckNvbmZpZy51c2VyRGF5VGVtcGxhdGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAvLyBQdXQgdGhlIHVzZXIgdGVtcGxhdGUgaW50byB0aGUgY2FjaGVcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLiR0ZW1wbGF0ZUNhY2hlLnB1dCh0ZW1wbGF0ZUxvY2F0aW9uLCB0aGlzLmJjQ2FsZW5kYXJDb25maWcudXNlckRheVRlbXBsYXRlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAvLyBTdG9yZSB0aGUgaW5uZXItZGF5IHRlbXBsYXRlIG9uIHRoZSBzZXJ2aWNlXG5cdCAgICAgICAgICAgICAgICB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLnN0b3JlRGF5VGVtcGxhdGUodGVtcGxhdGVMb2NhdGlvbik7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAvLyBObyBjdXN0b20gdGVtcGxhdGUgd2FzIGRlZmluZWRcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBTdG9yZSB0aGUgaW5uZXItZGF5IHRlbXBsYXRlIG9uIHRoZSBzZXJ2aWNlXG5cdCAgICAgICAgICAgICAgICB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLnN0b3JlRGF5VGVtcGxhdGUodGhpcy5iY0NhbGVuZGFyQ29uZmlnLmRheVRlbXBsYXRlKTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgLy8gRGVmaW5lIHRoZSBkYXRlIGZvcm1hdCBmb3IgdGhlIGluZGl2aWR1YWwgZGF5XG5cdCAgICAgICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9IHRoaXMuYmNEYXRlRm9ybWF0IHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5kYXRlRm9ybWF0O1xuXHRcblx0ICAgICAgICAgICAgLy8gQnVpbGQgYXJyYXkgb2YgZGF5c1xuXHQgICAgICAgICAgICB2YXIgZGF5cyA9IHRoaXMuYmNDYWxlbmRhclNlcnZpY2UuYnVpbGREYXlzKHRoaXMuZGF5cywgdGhpcy5zdGFydERhdGUpO1xuXHRcblx0ICAgICAgICAgICAgLy8gQnVpbGQgdGhlIGNhbGVuZGFyIEpTT04gYW5kIGV4cG9zZSB0byB0aGUgRE9NXG5cdCAgICAgICAgICAgIHRoaXMuX2J1aWxkQ2FsZW5kYXIoZGF5cywgdGhpcy5uZXN0aW5nRGVwdGgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBkYXkgaXMgcHJpb3IgdG8gdGhlIGN1cnJlbnQgZGF0ZVxuXHQgICAgICAgICAqIFRoaXMgaXMgdXNlZCB0byBkaXNhYmxlIHRoZSB1bnNlbGVjdGFibGUgZGF5c1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtEYXRlfSBkYXRlXG5cdCAgICAgICAgICogQHJldHVybiB7Qm9vbH1cblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnaXNCZWZvcmVUb2RheScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzQmVmb3JlVG9kYXkoZGF0ZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5kYXRlSXNCZWZvcmVUb2RheShkYXRlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENoZWNrIHRvIHNlZSBpZiB0aGUgZGF5IG1hdGNoZXMgdGhlIGN1cnJlbnQgZGF0ZVxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtEYXRlfSBkYXRlXG5cdCAgICAgICAgICogQHJldHVybiB7Qm9vbH1cblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnaXNEYXlUb2RheScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRGF5VG9kYXkoZGF0ZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5pc0RheVRvZGF5KGRhdGUsIHRoaXMuc3RhcnREYXRlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIFNlbGVjdCBhIGRhdGVcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXlcblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnc2VsZWN0RGF0ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdERhdGUoZGF5KSB7XG5cdCAgICAgICAgICAgIC8vIFNldCB0aGUgc2VsZWN0ZWQgZGF5XG5cdCAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gZGF5O1xuXHRcblx0ICAgICAgICAgICAgLy8gT25seSBjYWxsIHRoZSBwYXNzZWQgbWV0aG9kIGlmIGl0IGV4aXN0cyBhbmQgYSB2YWxpZCBkYXRlIHdhcyBjaG9zZW5cblx0ICAgICAgICAgICAgaWYgKGRheS5kYXRlICYmIHRoaXMuYmNEYXRlU2VsZWN0ZWQpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuYmNEYXRlU2VsZWN0ZWQoe1xuXHQgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRheS5kYXRlXG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogRm9ybWF0IGEgZGF0ZSB1c2luZyBtb21lbnRcblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlXG5cdCAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGZvcm1hdFxuXHQgICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30gZm9ybWF0dGVkRGF0ZVxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdmb3JtYXREYXRlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlLCBmb3JtYXQpIHtcblx0ICAgICAgICAgICAgaWYgKCFkYXRlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KGZvcm1hdCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBCdWlsZCB0aGUgY2FsZW5kYXIgSlNPTlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZGF5c1xuXHQgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkZXB0aFxuXHQgICAgICAgICAqIEByZXR1cm4ge0VsZW1lbnR9IGVsZW1lbnRcblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnX2J1aWxkQ2FsZW5kYXInLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYnVpbGRDYWxlbmRhcihkYXlzLCBkZXB0aCkge1xuXHRcblx0ICAgICAgICAgICAgLy8gQ2FsbCB0aGUgY29ycmVjdCBvcmdhbml6YXRpb24gbWV0aG9kIGJhc2VkIG9uIHRoZSBuZXN0aW5nIGRlcHRoXG5cdCAgICAgICAgICAgIGlmIChkZXB0aCA9PT0gJ21vbnRoJykge1xuXHRcblx0ICAgICAgICAgICAgICAgIHRoaXMuYmNDb2xsZWN0aW9uID0gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5vcmdhbml6ZU1vbnRocyhkYXlzKTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChkZXB0aCA9PT0gJ3dlZWsnKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgdGhpcy5iY0NvbGxlY3Rpb24gPSB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLm9yZ2FuaXplV2Vla3MoZGF5cyk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVwdGggPT09ICdkYXknKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgdGhpcy5iY0NvbGxlY3Rpb24gPSBkYXlzO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBDYWxlbmRhckNvbnRyb2xsZXI7XG5cdH0oKTtcblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBwYXRoID0gJy9Vc2Vycy9iYy9Db2RlL29wZW4tc291cmNlL2FuZ3VsYXItanNvbi1jYWxlbmRhci9zcmMvdGVtcGxhdGVzL2NhbGVuZGFyLmh0bWwnO1xuXHR2YXIgaHRtbCA9IFwiPHNlY3Rpb24gY2xhc3M9YmMtY2FsZW5kYXI+IDxzcGFuIGNsYXNzPWJjLWNhbGVuZGFyX193ZWVrZGF5cyBkYXRhLW5nLWlmPVxcXCIkY3RybC5zaG93V2Vla2RheXMgJiYgJGN0cmwubmVzdGluZ0RlcHRoID09PSAnd2VlaydcXFwiPiA8c3BhbiBjbGFzcz1cXFwiYmMtY2FsZW5kYXJfX2RheSBiYy1jYWxlbmRhcl9fZGF5LS13ZWVrZGF5c1xcXCIgZGF0YS1uZy1yZXBlYXQ9XFxcImRheSBpbiAkY3RybC53ZWVrZGF5cyB0cmFjayBieSAkaW5kZXhcXFwiPiA8c3Ryb25nIGNsYXNzPWJjLWNhbGVuZGFyX19kYXktdGl0bGU+IHt7IGRheSB9fSA8L3N0cm9uZz4gPC9zcGFuPiA8L3NwYW4+IDxiYy15ZWFyIGRhdGEtbmctaWY9XFxcIiRjdHJsLm5lc3RpbmdEZXB0aCA9PT0gJ3llYXInXFxcIiBjbGFzcz1iYy1jYWxlbmRhcl9feWVhci13cmFwcGVyIGJjLWNvbGxlY3Rpb249JGN0cmwuYmNDb2xsZWN0aW9uPjwvYmMteWVhcj4gPGJjLW1vbnRoIGRhdGEtbmctaWY9XFxcIiRjdHJsLm5lc3RpbmdEZXB0aCA9PT0gJ21vbnRoJ1xcXCIgY2xhc3M9YmMtY2FsZW5kYXJfX21vbnRoLXdyYXBwZXIgYmMtY29sbGVjdGlvbj0kY3RybC5iY0NvbGxlY3Rpb24+PC9iYy1tb250aD4gPGJjLXdlZWsgZGF0YS1uZy1pZj1cXFwiJGN0cmwubmVzdGluZ0RlcHRoID09PSAnd2VlaydcXFwiIGNsYXNzPWJjLWNhbGVuZGFyX193ZWVrLXdyYXBwZXIgYmMtY29sbGVjdGlvbj0kY3RybC5iY0NvbGxlY3Rpb24+PC9iYy13ZWVrPiA8YmMtZGF5IGRhdGEtbmctaWY9XFxcIiRjdHJsLm5lc3RpbmdEZXB0aCA9PT0gJ2RheSdcXFwiIGNsYXNzPWJjLWNhbGVuZGFyX19kYXktd3JhcHBlciBiYy1jb2xsZWN0aW9uPSRjdHJsLmJjQ29sbGVjdGlvbj48L2JjLWRheT4gPC9zZWN0aW9uPlwiO1xuXHR3aW5kb3cuYW5ndWxhci5tb2R1bGUoJ25nJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbihjKSB7IGMucHV0KHBhdGgsIGh0bWwpIH1dKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMveWVhci5odG1sJztcblx0dmFyIGh0bWwgPSBcIjxkaXYgY2xhc3M9YmMtY2FsZW5kYXJfX3llYXIgZGF0YS1uZy1yZXBlYXQ9XFxcInllYXIgaW4gdm0uYmNDb2xsZWN0aW9uIHRyYWNrIGJ5ICRpbmRleFxcXCI+IDxiYy1tb250aCBiYy1jb2xsZWN0aW9uPXllYXIgYmMtd2Vla3MtaGVhZGVyPSRjdHJsLndlZWtkYXlzSGVhZGVyIGNsYXNzPWJjLWNhbGVuZGFyX19tb250aC13cmFwcGVyPjwvYmMtbW9udGg+IDwvZGl2PlwiO1xuXHR3aW5kb3cuYW5ndWxhci5tb2R1bGUoJ25nJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbihjKSB7IGMucHV0KHBhdGgsIGh0bWwpIH1dKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvbW9udGguaHRtbCc7XG5cdHZhciBodG1sID0gXCI8dGltZSBjbGFzcz1iYy1jYWxlbmRhcl9fbW9udGggZGF0ZXRpbWU9XFxcInt7IG1vbnRoWzBdW21vbnRoWzBdLmxlbmd0aCAtIDFdLmRhdGUgfCBkYXRlOid5eXl5LU1NJyB9fVxcXCIgZGF0YS1uZy1yZXBlYXQ9XFxcIm1vbnRoIGluIHZtLmJjQ29sbGVjdGlvbiB0cmFjayBieSAkaW5kZXhcXFwiPiA8c3BhbiBjbGFzcz1iYy1jYWxlbmRhcl9fbW9udGgtdGl0bGUgZGF0YS1uZy1iaW5kPVxcXCIkY3RybC5mb3JtYXREYXRlKG1vbnRoWzBdW21vbnRoWzBdLmxlbmd0aCAtIDFdLmRhdGUsICRjdHJsLm1vbnRoVGl0bGVGb3JtYXQpXFxcIiBkYXRhLW5nLWlmPSRjdHJsLnNob3dNb250aFRpdGxlcz48L3NwYW4+IDxzcGFuIGNsYXNzPWJjLWNhbGVuZGFyX193ZWVrZGF5cyBkYXRhLW5nLWlmPSRjdHJsLnNob3dXZWVrZGF5cz4gPHNwYW4gY2xhc3M9XFxcImJjLWNhbGVuZGFyX19kYXkgYmMtY2FsZW5kYXJfX2RheS0td2Vla2RheXNcXFwiIGRhdGEtbmctcmVwZWF0PVxcXCJkYXkgaW4gJGN0cmwud2Vla2RheXMgdHJhY2sgYnkgJGluZGV4XFxcIj4gPHN0cm9uZyBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5LXRpdGxlPiB7eyBkYXkgfX0gPC9zdHJvbmc+IDwvc3Bhbj4gPC9zcGFuPiA8YmMtd2VlayBiYy1jb2xsZWN0aW9uPW1vbnRoIGNsYXNzPWJjLWNhbGVuZGFyX193ZWVrLXdyYXBwZXI+PC9iYy13ZWVrPiA8L3RpbWU+XCI7XG5cdHdpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xuXHRtb2R1bGUuZXhwb3J0cyA9IHBhdGg7XG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgcGF0aCA9ICcvVXNlcnMvYmMvQ29kZS9vcGVuLXNvdXJjZS9hbmd1bGFyLWpzb24tY2FsZW5kYXIvc3JjL3RlbXBsYXRlcy93ZWVrLmh0bWwnO1xuXHR2YXIgaHRtbCA9IFwiPHRpbWUgY2xhc3M9YmMtY2FsZW5kYXJfX3dlZWsgZGF0ZXRpbWU9XFxcInt7IHdlZWtbd2Vlay5sZW5ndGggLSAxXS5kYXRlIHwgZGF0ZToneXl5eS13dycgfX1cXFwiIGRhdGEtbmctcmVwZWF0PVxcXCJ3ZWVrIGluIHZtLmJjQ29sbGVjdGlvbiB0cmFjayBieSAkaW5kZXhcXFwiPiA8YmMtZGF5IGJjLWNvbGxlY3Rpb249d2VlayBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5LXdyYXBwZXI+PC9iYy1kYXk+IDwvdGltZT5cIjtcblx0d2luZG93LmFuZ3VsYXIubW9kdWxlKCduZycpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oYykgeyBjLnB1dChwYXRoLCBodG1sKSB9XSk7XG5cdG1vZHVsZS5leHBvcnRzID0gcGF0aDtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgcGF0aCA9ICcvVXNlcnMvYmMvQ29kZS9vcGVuLXNvdXJjZS9hbmd1bGFyLWpzb24tY2FsZW5kYXIvc3JjL3RlbXBsYXRlcy9kYXkuaHRtbCc7XG5cdHZhciBodG1sID0gXCI8c3BhbiBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5IGRhdGEtbmctY2xhc3M9XFxcInsgJ2JjLWNhbGVuZGFyX19kYXktLWRpc2FibGVkJzogJGN0cmwuaXNCZWZvcmVUb2RheShkYXkuZGF0ZSksXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS10b2RheSc6ICRjdHJsLmlzRGF5VG9kYXkoZGF5LmRhdGUpLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tZXZlbic6ICRldmVuLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tb2RkJzogJG9kZCxcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLXBhZCc6ICFkYXkuZGF0ZSxcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLXZhbGlkJzogZGF5LmRhdGUsXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS1zZWxlY3RlZCc6IGRheS5kYXRlID09PSAkY3RybC5zZWxlY3RlZERhdGUuZGF0ZSB9XFxcIiBkYXRhLW5nLWNsaWNrPSRjdHJsLnNlbGVjdERhdGUoZGF5KSBkYXRhLW5nLXJlcGVhdD1cXFwiZGF5IGluIHZtLmJjQ29sbGVjdGlvbiB0cmFjayBieSAkaW5kZXhcXFwiIHRpdGxlPWRheS5kYXRlPiA8bmctaW5jbHVkZSBzcmM9dm0uZGF5VGVtcGxhdGU+PC9uZy1pbmNsdWRlPiA8L3NwYW4+XCI7XG5cdHdpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xuXHRtb2R1bGUuZXhwb3J0cyA9IHBhdGg7XG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5iY1llYXJEaXJlY3RpdmUgPSBiY1llYXJEaXJlY3RpdmU7XG5cdFxuXHR2YXIgX3llYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF95ZWFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3llYXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIGJjWWVhckRpcmVjdGl2ZSgpIHtcblx0ICAgICduZ0luamVjdCc7XG5cdFxuXHQgICAgdmFyIGRpcmVjdGl2ZSA9IHtcblx0ICAgICAgICByZXN0cmljdDogJ0UnLFxuXHQgICAgICAgIHNjb3BlOiB0cnVlLFxuXHQgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0ICAgICAgICAgICAgYmNDb2xsZWN0aW9uOiAnPSdcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHRlbXBsYXRlVXJsOiBfeWVhcjIuZGVmYXVsdCxcblx0ICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbiBjb250cm9sbGVyKCkge30sXG5cdCAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBkaXJlY3RpdmU7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmJjTW9udGhEaXJlY3RpdmUgPSBiY01vbnRoRGlyZWN0aXZlO1xuXHRcblx0dmFyIF9tb250aCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX21vbnRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21vbnRoKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBiY01vbnRoRGlyZWN0aXZlKCkge1xuXHQgICAgJ25nSW5qZWN0Jztcblx0XG5cdCAgICB2YXIgZGlyZWN0aXZlID0ge1xuXHQgICAgICAgIHJlc3RyaWN0OiAnRScsXG5cdCAgICAgICAgc2NvcGU6IHRydWUsXG5cdCAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuXHQgICAgICAgICAgICBiY0NvbGxlY3Rpb246ICc9Jyxcblx0ICAgICAgICAgICAgYmNXZWVrZGF5c0hlYWRlcjogJz0nXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0ZW1wbGF0ZVVybDogX21vbnRoMi5kZWZhdWx0LFxuXHQgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uIGNvbnRyb2xsZXIoKSB7fSxcblx0ICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuYmNXZWVrRGlyZWN0aXZlID0gYmNXZWVrRGlyZWN0aXZlO1xuXHRcblx0dmFyIF93ZWVrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBfd2VlazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93ZWVrKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBiY1dlZWtEaXJlY3RpdmUoKSB7XG5cdCAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgIHZhciBkaXJlY3RpdmUgPSB7XG5cdCAgICAgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgICAgICBzY29wZTogdHJ1ZSxcblx0ICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG5cdCAgICAgICAgICAgIGJjQ29sbGVjdGlvbjogJz0nXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0ZW1wbGF0ZVVybDogX3dlZWsyLmRlZmF1bHQsXG5cdCAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gY29udHJvbGxlcigpIHt9LFxuXHQgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gZGlyZWN0aXZlO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0YmNEYXlEaXJlY3RpdmUuJGluamVjdCA9IFtcImJjQ2FsZW5kYXJDb25maWdcIl07XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuYmNEYXlEaXJlY3RpdmUgPSBiY0RheURpcmVjdGl2ZTtcblx0XG5cdHZhciBfZGF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHR2YXIgX2RheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kYXkpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIGJjRGF5RGlyZWN0aXZlKGJjQ2FsZW5kYXJDb25maWcpIHtcblx0ICAgICduZ0luamVjdCc7XG5cdFxuXHQgICAgdmFyIGRpcmVjdGl2ZSA9IHtcblx0ICAgICAgICByZXN0cmljdDogJ0UnLFxuXHQgICAgICAgIHNjb3BlOiB0cnVlLFxuXHQgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0ICAgICAgICAgICAgYmNDb2xsZWN0aW9uOiAnPSdcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHRlbXBsYXRlVXJsOiBfZGF5Mi5kZWZhdWx0LFxuXHQgICAgICAgIGNvbnRyb2xsZXI6IFtcImJjQ2FsZW5kYXJTZXJ2aWNlXCIsIGZ1bmN0aW9uIGNvbnRyb2xsZXIoYmNDYWxlbmRhclNlcnZpY2UpIHtcblx0ICAgICAgICAgICAgJ25nSW5qZWN0Jztcblx0XG5cdCAgICAgICAgICAgIC8vIEdldCB0aGUgaW5uZXItZGF5IHRlbXBsYXRlIGZyb20gdGhlIHNlcnZpY2Vcblx0XG5cdCAgICAgICAgICAgIHRoaXMuZGF5VGVtcGxhdGUgPSBiY0NhbGVuZGFyU2VydmljZS5nZXREYXlUZW1wbGF0ZSgpO1xuXHQgICAgICAgIH1dLFxuXHQgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gZGlyZWN0aXZlO1xuXHR9XG5cbi8qKiovIH1cbi8qKioqKiovIF0pXG59KTtcbjtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBhbmd1bGFyLWpzb24tY2FsZW5kYXIubWluLmpzXG4gKiovIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCBlZmM2MzFiNjMzNDY0NzllZTE4NVxuICoqLyIsImltcG9ydCB7IGJjQ2FsZW5kYXJDb25maWcgfSBmcm9tICcuL2NhbGVuZGFyLnByb3ZpZGVyJztcbmltcG9ydCB7IGJjQ2FsZW5kYXJTZXJ2aWNlIH0gZnJvbSAnLi9jYWxlbmRhci5zZXJ2aWNlJztcbmltcG9ydCB7IGJjQ2FsZW5kYXJEaXJlY3RpdmUgfSBmcm9tICcuL2NhbGVuZGFyLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBiY1llYXJEaXJlY3RpdmUgfSBmcm9tICcuL3llYXIuZGlyZWN0aXZlJztcbmltcG9ydCB7IGJjTW9udGhEaXJlY3RpdmUgfSBmcm9tICcuL21vbnRoLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBiY1dlZWtEaXJlY3RpdmUgfSBmcm9tICcuL3dlZWsuZGlyZWN0aXZlJztcbmltcG9ydCB7IGJjRGF5RGlyZWN0aXZlIH0gZnJvbSAnLi9kYXkuZGlyZWN0aXZlJztcblxuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoJ2JjLkpzb25DYWxlbmRhcicsIFtdKVxuICAgIC5wcm92aWRlcignYmNDYWxlbmRhckNvbmZpZycsIGJjQ2FsZW5kYXJDb25maWcpXG4gICAgLnNlcnZpY2UoJ2JjQ2FsZW5kYXJTZXJ2aWNlJywgYmNDYWxlbmRhclNlcnZpY2UpXG4gICAgLmRpcmVjdGl2ZSgnYmNDYWxlbmRhcicsIGJjQ2FsZW5kYXJEaXJlY3RpdmUpXG4gICAgLmRpcmVjdGl2ZSgnYmNZZWFyJywgYmNZZWFyRGlyZWN0aXZlKVxuICAgIC5kaXJlY3RpdmUoJ2JjTW9udGgnLCBiY01vbnRoRGlyZWN0aXZlKVxuICAgIC5kaXJlY3RpdmUoJ2JjV2VlaycsIGJjV2Vla0RpcmVjdGl2ZSlcbiAgICAuZGlyZWN0aXZlKCdiY0RheScsIGJjRGF5RGlyZWN0aXZlKVxuO1xuXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9pbmRleC5qc1xuICoqLyIsImltcG9ydCBkYXlUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlcy9kYXkuaW5uZXIuaHRtbCc7XG5cbmV4cG9ydCBjbGFzcyBiY0NhbGVuZGFyQ29uZmlnIHtcblxuICAgIC8vIERlZmluZSBkZWZhdWx0c1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAnbmdJbmplY3QnO1xuXG4gICAgICAgIC8vIFRoZSBjYWxlbmRhciB3aWxsIGJlZ2luIHdpdGggdG9kYXlcbiAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQobmV3IERhdGUoKSkuc3RhcnRPZignZGF5JykuZm9ybWF0KCk7XG5cbiAgICAgICAgLy8gVGhlIGRlZmF1bHQgaW50ZXJ2YWwgdHlwZSBbZGF5fHdlZWt8bW9udGhdXG4gICAgICAgIHRoaXMubmVzdGluZ0RlcHRoID0gJ21vbnRoJztcblxuICAgICAgICAvLyBIb3cgbWFueSBkYXlzIHNob3VsZCBiZSBnZW5lcmF0ZWRcbiAgICAgICAgdGhpcy5kYXlzID0gMzA7XG5cbiAgICAgICAgLy8gRGVmaW5lIHRoZSBkaWZmZXJlbnQgcG9zc2libGUgcmVwcmVzZW50YXRpb25zIG9mIHRoZSB3ZWVrZGF5XG4gICAgICAgIHRoaXMud2Vla2RheVN0eWxlID0ge1xuICAgICAgICAgICAgbGV0dGVyOiBbXG4gICAgICAgICAgICAgICAgJ1MnLFxuICAgICAgICAgICAgICAgICdNJyxcbiAgICAgICAgICAgICAgICAnVCcsXG4gICAgICAgICAgICAgICAgJ1cnLFxuICAgICAgICAgICAgICAgICdUJyxcbiAgICAgICAgICAgICAgICAnRicsXG4gICAgICAgICAgICAgICAgJ1MnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGFiYnJldmlhdGlvbjogW1xuICAgICAgICAgICAgICAgICdTdW4nLFxuICAgICAgICAgICAgICAgICdNb24nLFxuICAgICAgICAgICAgICAgICdUdWUnLFxuICAgICAgICAgICAgICAgICdXZWQnLFxuICAgICAgICAgICAgICAgICdUaHVyJyxcbiAgICAgICAgICAgICAgICAnRnJpJyxcbiAgICAgICAgICAgICAgICAnU2F0JyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB3b3JkOiBbXG4gICAgICAgICAgICAgICAgJ1N1bmRheScsXG4gICAgICAgICAgICAgICAgJ01vbmRheScsXG4gICAgICAgICAgICAgICAgJ1R1ZXNkYXknLFxuICAgICAgICAgICAgICAgICdXZWRuZXNkYXknLFxuICAgICAgICAgICAgICAgICdUaHVyc2RheScsXG4gICAgICAgICAgICAgICAgJ0ZyaWRheScsXG4gICAgICAgICAgICAgICAgJ1NhdHVyZGF5JyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU2V0IHRoZSBkZWZhdWx0IHdvcmQgdHlwZSAoTSB2cyBNb24gdnMgTW9uZGF5KVxuICAgICAgICB0aGlzLmRheVRpdGxlRm9ybWF0ID0gJ2FiYnJldmlhdGlvbic7XG5cbiAgICAgICAgLy8gU2hvdWxkIHRoZSBjYWxlbmRhciBzaG93IHRoZSB3ZWVrZGF5IG5hbWVzIGFib3ZlIGVhY2ggY29sdW1uP1xuICAgICAgICB0aGlzLnNob3dXZWVrZGF5cyA9IHRydWU7XG5cbiAgICAgICAgLy8gRGVmaW5lIHRoZSBkZWZhdWx0IHRlbXBsYXRlIGZvciBhIGRheVxuICAgICAgICB0aGlzLmRheVRlbXBsYXRlID0gZGF5VGVtcGxhdGU7XG5cbiAgICAgICAgLy8gQWxsb3cgdGhlIHVzZXIgdG8gc2V0IGEgY3VzdG9tIHRlbXBsYXRlXG4gICAgICAgIHRoaXMuc2V0RGF5VGVtcGxhdGUgPSAodGVtcGxhdGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXNlckRheVRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWZpbmUgdGhlIGRlZmF1bHQgZm9ybWF0IGZvciBhIGRheVxuICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSAnRCc7XG5cbiAgICAgICAgLy8gRGVmaW5lIHRoZSBkZWZhdWx0IGZvcm1hdCBmb3IgYSBtb250aCB0aXRsZVxuICAgICAgICB0aGlzLm1vbnRoVGl0bGVGb3JtYXQgPSAnTU1NTSdcblxuICAgICAgICAvLyBTaG91bGQgbW9udGggdGl0bGVzIGJlIHNob3duIGJ5IGRlZmF1bHQ/XG4gICAgICAgIHRoaXMuc2hvd01vbnRoVGl0bGVzID0gdHJ1ZTtcblxuICAgIH1cblxuXG5cblxuICAgICRnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuXG59XG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2NhbGVuZGFyLnByb3ZpZGVyLmpzXG4gKiovIiwidmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvZGF5LmlubmVyLmh0bWwnO1xudmFyIGh0bWwgPSBcIjx0aW1lIGRhdGV0aW1lPVxcXCJ7eyBkYXkuZGF0ZSB8IGRhdGU6J3l5eXktTU0tZGQnIH19XFxcIiBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5LXRpbWUgdGl0bGU9XFxcInt7IGRheS5kYXRlIH19XFxcIiBkYXRhLW5nLWlmPWRheS5kYXRlPiA8c3BhbiBkYXRhLW5nLWJpbmQ9XFxcIiRjdHJsLmZvcm1hdERhdGUoZGF5LmRhdGUsICRjdHJsLmRhdGVGb3JtYXQpXFxcIj48L3NwYW4+IDwvdGltZT5cIjtcbndpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xubW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdGVtcGxhdGVzL2RheS5pbm5lci5odG1sXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJleHBvcnQgY2xhc3MgYmNDYWxlbmRhclNlcnZpY2Uge1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgKSB7XG4gICAgICAgICduZ0luamVjdCc7XG5cbiAgICAgICAgdGhpcy5XRUVLX0xFTkdUSCA9IDc7XG4gICAgICAgIHRoaXMuZGF5VGVtcGxhdGU7XG5cbiAgICB9XG5cblxuXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB0byBzZWUgaWYgdGhlIGRheSBpcyBwcmlvciB0byB0aGUgY3VycmVudCBkYXRlXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGRpc2FibGUgdGhlIHVuc2VsZWN0YWJsZSBkYXlzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVxuICAgICAqIEByZXR1cm4ge0Jvb2x9IGlzQmVmb3JlXG4gICAgICovXG4gICAgZGF0ZUlzQmVmb3JlVG9kYXkoZGF0ZSkge1xuICAgICAgICBjb25zdCB0b2RheSA9IG1vbWVudChuZXcgRGF0ZSgpKS5zdGFydE9mKCdkYXknKS5mb3JtYXQoKTtcblxuICAgICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmlzQmVmb3JlKHRvZGF5KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHRvIHNlZSBpZiB0aGUgZGF5IG1hdGNoZXMgdGhlIGN1cnJlbnQgZGF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZTJcbiAgICAgKiBAcmV0dXJuIHtCb29sfSBpc1RvZGF5XG4gICAgICovXG4gICAgaXNEYXlUb2RheShkYXRlLCBkYXRlMiA9IG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoKSkge1xuICAgICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmlzU2FtZShkYXRlMik7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBUdXJuIGEgaW50ZWdlciAoZS5nLiAnNicpIGludG8gYW4gYXJyYXk6ICdbMSwyLDMsNCw1LDZdJ1xuICAgICAqXG4gICAgICogQHBhcmFtIHtJbnRlZ2VyfSBjb3VudFxuICAgICAqIEByZXR1cm4ge0FycmF5fSBkYXlzXG4gICAgICovXG4gICAgaW50ZWdlclRvQXJyYXkoY291bnQpIHtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGNvbnN0IGRheXMgPSBbXTtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQ7IGkgKz0gMSkge1xuICAgICAgICAgICAgZGF5cy5wdXNoKGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRheXM7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBQYWQgdGhlIGJlZ2lubmluZyBvZiBhIHdlZWtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdGFydERhdGUgLSBkYXRlIHRvIHRvIHdvcmsgYmFjayBmcm9tXG4gICAgICogQHBhcmFtIHtBcnJheX0gY291bnQgLSBob3cgbWFueSBkYXlzIHRvIHBhZFxuICAgICAqIEByZXR1cm4ge0FycmF5fSBwYWRcbiAgICAgKi9cbiAgICBwYWREYXlzTGVmdChzdGFydERhdGUsIGNvdW50KSB7XG4gICAgICAgIGNvbnN0IHBhZCA9IFtdO1xuICAgICAgICBjb25zdCBtaXNzaW5nRGF5cyA9IHRoaXMuaW50ZWdlclRvQXJyYXkoY291bnQpO1xuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBtaXNzaW5nIGRheXNcbiAgICAgICAgZm9yIChjb25zdCBkYXkgaW4gbWlzc2luZ0RheXMpIHtcbiAgICAgICAgICAgIC8vIEhvdyBtYW55IGRheXMgdG8gZ28gYmFja1xuICAgICAgICAgICAgY29uc3Qgc3VidHJhY3Rpb24gPSBwYXJzZUludChkYXksIDEwKSArIDE7XG5cbiAgICAgICAgICAgIC8vIEZpbmQgdGhhdCBkYXlcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzID0gbW9tZW50KHN0YXJ0RGF0ZSkuc3VidHJhY3QoKHN1YnRyYWN0aW9uKSwgJ2RheXMnKS50b0lTT1N0cmluZygpO1xuXG4gICAgICAgICAgICAvLyBBZGQgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAgICAgICAgICAgIHBhZC51bnNoaWZ0KHtcbiAgICAgICAgICAgICAgICBkYXRlOiBwcmV2aW91cyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhZDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFBhZCBhIGNvbGxlY3Rpb24gd2l0aCBibGFuayB0aWxlc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gY29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gY291bnRcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gcGFkZGVkQ29sbGVjdGlvblxuICAgICAqL1xuICAgIHBhZEJsYW5rVGlsZXMoY29sbGVjdGlvbiwgY291bnQsIGRpcmVjdGlvbiA9ICdsZWZ0Jykge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgY29uc3QgZGF5cyA9IFtdO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhcnJheVxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQ7IGkgKz0gMSkge1xuICAgICAgICAgICAgZGF5cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBkYXRlOiBudWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBkaXJlY3Rpb24gaXMgJ3JpZ2h0J1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAvLyBwYWQgdGhlIGVuZFxuICAgICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb24uY29uY2F0KGRheXMpO1xuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgcGFkIHRoZSBiZWdpbm5pbmdcbiAgICAgICAgICAgIHJldHVybiBkYXlzLmNvbmNhdChjb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBTcGxpdCBhbiBhcnJheSBpbnRvIGNodW5rcyBhbmQgcmV0dXJuIGFuIGFycmF5IG9mIHRoZXNlIGNodW5rc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZ3JvdXBcbiAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IGdyb3Vwc2l6ZSAtIENodW5rIHNpemUuIERlZmF1bHRzIHRvIDcgKG9uZSB3ZWVrKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gY2h1bmtzXG4gICAgICovXG4gICAgY2h1bmsoZ3JvdXAsIGdyb3Vwc2l6ZSA9IHRoaXMuV0VFS19MRU5HVEgpIHtcbiAgICAgICAgY29uc3Qgc2V0cyA9IFtdO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IGdyb3VwLmxlbmd0aCAvIHBhcnNlSW50KGdyb3Vwc2l6ZSwgMTApO1xuXG4gICAgICAgIHdoaWxlKGkgPCBjaHVua3MpIHtcbiAgICAgICAgICAgIHNldHNbaV0gPSBncm91cC5zcGxpY2UoMCwgZ3JvdXBzaXplKTtcbiAgICAgICAgICAgIGkgPSBpICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZXRzO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkdXJhdGlvbiBpbiBkYXlzIGJldHdlZW4gdHdvIGRhdGVzIElOQ0xVRElORyBib3RoIGRhdGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RhcnRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZW5kXG4gICAgICogQHJldHVybiB7SW50ZWdlcn0gZGF5c1xuICAgICAqL1xuICAgIGR1cmF0aW9uSW5EYXlzKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgY29uc3QgbmV3U3RhcnQgPSBtb21lbnQoc3RhcnQpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICAvLyBBZGQgYSBkYXkgc28gdGhlIGVuZCBkYXRlIGlzIGluY2x1ZGVkIGluIHRoZSBjYWxjdWxhdGlvblxuICAgICAgICBjb25zdCBuZXdFbmQgPSBtb21lbnQoZW5kKS5zdGFydE9mKCdkYXknKS5hZGQoMSwgJ2RheXMnKTtcblxuICAgICAgICByZXR1cm4gbmV3RW5kLmRpZmYobmV3U3RhcnQsICAnZGF5cycpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogT3JnYW5pemUgYSBjb2xsZWN0aW9uIG9mIGRheXMgaW50byBzdWIgY29sbGVjdGlvbnMgb2Ygd2Vla3NcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGRheXMgLSBhcnJheSBvZiBkYXlzXG4gICAgICogQHJldHVybiB7QXJyYXl9IGNvbGxlY3Rpb25cbiAgICAgKi9cbiAgICBvcmdhbml6ZVdlZWtzKGRheXMpIHtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBkYXkgb2YgdGhlIHdlZWsgdGhhdCB0aGUgY2FsZW5kYXIgc3RhcnRzIGFuZCBlbmRzIG9uXG4gICAgICAgIGNvbnN0IGZpcnN0RGF5ID0gbW9tZW50KGRheXNbMF0uZGF0ZSkuZGF5KCk7XG4gICAgICAgIGNvbnN0IGxhc3REYXkgPSBtb21lbnQoZGF5c1tkYXlzLmxlbmd0aCAtIDFdLmRhdGUpLmRheSgpO1xuICAgICAgICBjb25zdCBTQVRVUkRBWSA9IDY7XG4gICAgICAgIGNvbnN0IFNVTkRBWSA9IDA7XG5cbiAgICAgICAgLy8gSWYgdGhlIGZpcnN0IGRheSBpcyBhZnRlciBTdW5kYXlcbiAgICAgICAgaWYgKGZpcnN0RGF5ID4gU1VOREFZKSB7XG4gICAgICAgICAgICAvLyBQYWQgd2l0aCBibGFuayB0aWxlcyBzbyB0aGUgZmlyc3QgZGF5IGlzIGxpbmVkIHVwIGluIHRoZSBjb3JyZWN0IHdlZWtkYXkgY29sdW1uXG4gICAgICAgICAgICBkYXlzID0gdGhpcy5wYWRCbGFua1RpbGVzKGRheXMsIGZpcnN0RGF5LCAnbGVmdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlIGxhc3QgZGF5IGlzIGJlZm9yZSBTYXR1cmRheVxuICAgICAgICBpZiAobGFzdERheSA8IFNBVFVSREFZKSB7XG4gICAgICAgICAgICAvLyBQYWQgd2l0aCBibGFuayB0aWxlcyBzbyB0aGF0IHRoZSBsYXN0IHdlZWsncyBkYXlzIGFyZSBpbiB0aGUgY29ycmVjdCB3ZWVrZGF5IGNvbHVtblxuICAgICAgICAgICAgZGF5cyA9IHRoaXMucGFkQmxhbmtUaWxlcyhkYXlzLHRoaXMuV0VFS19MRU5HVEggLSAobGFzdERheSArIDEpLCAncmlnaHQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmNodW5rKGRheXMpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogT3JnYW5pemUgYnkgbW9udGhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFsbERheXMgLSBBbiBhcnJheSBvZiBhbGwgZGF5c1xuICAgICAqIEByZXR1cm4ge0FycmF5fSBjb2xsZWN0aW9uIC0gZGF5cyBvcmdhbml6ZWQgaW50byB3ZWVrcyBhbmQgbW9udGhzXG4gICAgICovXG4gICAgb3JnYW5pemVNb250aHMoYWxsRGF5cykge1xuICAgICAgICBjb25zdCBjYWxlbmRhciA9IFtdO1xuICAgICAgICBjb25zdCBTQVRVUkRBWSA9IDY7XG4gICAgICAgIGNvbnN0IFNVTkRBWSA9IDA7XG4gICAgICAgIGxldCBjb2xsZWN0aW9uID0gYWxsRGF5cztcbiAgICAgICAgbGV0IG1vbnRoO1xuICAgICAgICBsZXQgZGF5T2ZNb250aCA9IG1vbWVudChjb2xsZWN0aW9uWzBdLmRhdGUpLmRhdGUoKTtcbiAgICAgICAgbGV0IGRheXNJbk1vbnRoID0gbW9tZW50KGNvbGxlY3Rpb25bMF0uZGF0ZSkuZGF5c0luTW9udGgoKTtcblxuICAgICAgICAvLyBQYWQgdGhlIGJlZ2lubmluZyBvZiB0aGUgbW9udGggd2l0aCBhbnkgbWlzc2luZyBkYXlzXG4gICAgICAgIC8vIElmIHRoZSBmaXJzdCBkYXkgaXMgbm90IHRoZSBmaXJzdCBkYXkgb2YgdGhlIG1vbnRoXG4gICAgICAgIGlmIChtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXRlKCkgPiAwKSB7XG4gICAgICAgICAgICAvLyBQdWxsIHRoaXMgbW9udGgncyBkYXlzIGZyb20gdGhlIGNvbGxlY3Rpb25cbiAgICAgICAgICAgIG1vbnRoID0gY29sbGVjdGlvbi5zbGljZSgwLCAoZGF5c0luTW9udGggLSAoZGF5T2ZNb250aCAtIDEpKSk7XG5cbiAgICAgICAgICAgIC8vIEZpbGwgdGhlIG1pc3NpbmcgZGF5cyBmcm9tIHRoZSBtb250aFxuICAgICAgICAgICAgY29uc3QgcGFkID0gdGhpcy5wYWREYXlzTGVmdChtb250aFswXS5kYXRlLCAoZGF5T2ZNb250aCAtIDEpKTtcblxuICAgICAgICAgICAgLy8gQ29tYmluZSB3aXRoIHRoZSBleGlzdGluZyBhcnJheVxuICAgICAgICAgICAgY29sbGVjdGlvbiA9IHBhZC5jb25jYXQoY29sbGVjdGlvbik7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIFNwbGl0IGludG8gbW9udGhzXG4gICAgICAgIC8vIEFzIGxvbmcgYXMgdGhlcmUgYXJlIGRheXMgbGVmdCBpbiB0aGUgY29sbGVjdGlvblxuICAgICAgICB3aGlsZSAoY29sbGVjdGlvbi5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgZGF5IG9mIHRoZSBtb250aCBmb3IgdGhlIGZpcnN0IGRhdGUgb2YgdGhlIGNvbGxlY3Rpb24gZWcuICcyNCdcbiAgICAgICAgICAgIGRheU9mTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXRlKCk7XG5cbiAgICAgICAgICAgIC8vIERldGVybWluZSBob3cgbWFueSBkYXlzIHRoZXJlIGFyZSB0aGlzIG1vbnRoICh0b3RhbClcbiAgICAgICAgICAgIGRheXNJbk1vbnRoID0gbW9tZW50KGNvbGxlY3Rpb25bMF0uZGF0ZSkuZGF5c0luTW9udGgoKTtcblxuICAgICAgICAgICAgLy8gUHVsbCB0aGlzIG1vbnRoJ3MgZGF5cyBmcm9tIHRoZSBjb2xsZWN0aW9uXG4gICAgICAgICAgICBtb250aCA9IGNvbGxlY3Rpb24uc3BsaWNlKDAsIChkYXlzSW5Nb250aCAtIChkYXlPZk1vbnRoIC0gMSkpKTtcblxuICAgICAgICAgICAgLy8gSG93IG1hbnkgd2Vla2RheXMgYXJlIHByaW9yIHRvIHRoZSBmaXJzdCBkYXkgb2YgdGhpcyBtb250aD9cbiAgICAgICAgICAgIGNvbnN0IGZpcnN0RGF5ID0gbW9tZW50KG1vbnRoWzBdLmRhdGUpLmRheSgpO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgZmlyc3QgZGF5IGlzIGFmdGVyIFN1bmRheVxuICAgICAgICAgICAgaWYgKGZpcnN0RGF5ID4gU1VOREFZKSB7XG4gICAgICAgICAgICAgICAgLy8gUGFkIHdpdGggYmxhbmsgdGlsZXMgc28gdGhhdCB0aGUgZmlyc3QgZGF5IGlzIGxpbmVkIHVwIGluIHRoZSBjb3JyZWN0IGNvbHVtblxuICAgICAgICAgICAgICAgIG1vbnRoID0gdGhpcy5wYWRCbGFua1RpbGVzKG1vbnRoLCBmaXJzdERheSwgJ2xlZnQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSG93IG1hbnkgd2Vla2RheXMgYXJlIGFmdGVyIHRoZSBsYXN0IGRheSBvZiB0aGUgbW9udGg/XG4gICAgICAgICAgICAvLyAocmVtZW1iZXI6IHdlZWtzIGFyZSB6ZXJvLWJhc2VkKVxuICAgICAgICAgICAgY29uc3QgbGFzdERheSA9IG1vbWVudChtb250aFttb250aC5sZW5ndGggLSAxXS5kYXRlKS5kYXkoKTtcblxuICAgICAgICAgICAgLy8gSWYgYmxhbmsgdGlsZXMgYXJlIG5lZWRlZCBmb3IgdGhlIGxhc3Qgd2Vla1xuICAgICAgICAgICAgaWYgKGxhc3REYXkgPCBTQVRVUkRBWSkge1xuICAgICAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoYXQgdGhlIGZpcnN0IGRheSBpcyBsaW5lZCB1cCBpbiB0aGUgY29ycmVjdCBjb2x1bW5cbiAgICAgICAgICAgICAgICBtb250aCA9IHRoaXMucGFkQmxhbmtUaWxlcyhtb250aCwgdGhpcy5XRUVLX0xFTkdUSCAtIChsYXN0RGF5ICsgMSksICdyaWdodCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBPcmdhbml6ZSBpbnRvIHdlZWtzIGFuZCBhZGQgdG8gdGhlIGNhbGVuZGFyIGFycmF5XG4gICAgICAgICAgICBjYWxlbmRhci5wdXNoKHRoaXMuY2h1bmsobW9udGgpKTtcblxuICAgICAgICB9XG5cblxuICAgICAgICByZXR1cm4gY2FsZW5kYXI7XG5cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEJ1aWxkIGFuIGFycmF5IG9mIGRheXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gbGltaXQgLSBob3cgbWFueSBkYXlzIHRvIGNyZWF0ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdGFydCAtIHRoZSBzdGFydGluZyBkYXRlXG4gICAgICogQHJldHVybiB7QXJyYXl9IGRheXNcbiAgICAgKi9cbiAgICBidWlsZERheXMobGltaXQsIHN0YXJ0ID0gbmV3IERhdGUoKSkge1xuICAgICAgICBsZXQgY291bnRlciA9IDA7XG4gICAgICAgIGNvbnN0IGRheXMgPSBbXTtcbiAgICAgICAgbGV0IGRheTtcblxuICAgICAgICB3aGlsZSAoY291bnRlciA8IGxpbWl0KSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGRheVxuICAgICAgICAgICAgZGF5ID0gbW9tZW50KHN0YXJ0KS5hZGQoY291bnRlciwgJ2RheXMnKS50b0lTT1N0cmluZygpO1xuXG4gICAgICAgICAgICAvLyBBZGQgdG8gdGhlIGFycmF5XG4gICAgICAgICAgICBkYXlzLnB1c2goe1xuICAgICAgICAgICAgICAgIGRhdGU6IGRheSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBJbmNyZW1lbnQgdGhlIGNvdW50ZXJcbiAgICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXlzO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBpbm5lciBkYXkgdGVtcGxhdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVxuICAgICAqL1xuICAgIHN0b3JlRGF5VGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgICAgICAgdGhpcy5kYXlUZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpbm5lciBkYXkgdGVtcGxhdGVcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gdGVtcGxhdGVcbiAgICAgKi9cbiAgICBnZXREYXlUZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF5VGVtcGxhdGU7XG4gICAgfVxuXG5cbn1cblxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY2FsZW5kYXIuc2VydmljZS5qc1xuICoqLyIsImltcG9ydCB7IENhbGVuZGFyQ29udHJvbGxlciB9IGZyb20gJy4vY2FsZW5kYXIuY29udHJvbGxlcic7XG5pbXBvcnQgY2FsZW5kYXJUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlcy9jYWxlbmRhci5odG1sJztcbmltcG9ydCB5ZWFyVGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZXMveWVhci5odG1sJztcbmltcG9ydCBtb250aFRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGVzL21vbnRoLmh0bWwnO1xuaW1wb3J0IHdlZWtUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlcy93ZWVrLmh0bWwnO1xuaW1wb3J0IGRheVRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGVzL2RheS5odG1sJztcblxuZXhwb3J0IGZ1bmN0aW9uIGJjQ2FsZW5kYXJEaXJlY3RpdmUoXG4pIHtcbiAgICAnbmdJbmplY3QnO1xuXG4gICAgLy8gRGVmaW5lIHBvc3NpYmxlIHRlbXBsYXRlc1xuICAgIGNvbnN0IHRlbXBsYXRlcyA9IHtcbiAgICAgICAgeWVhcjogeWVhclRlbXBsYXRlLFxuICAgICAgICBtb250aDogbW9udGhUZW1wbGF0ZSxcbiAgICAgICAgd2Vlazogd2Vla1RlbXBsYXRlLFxuICAgICAgICBkYXk6IGRheVRlbXBsYXRlLFxuICAgIH07XG5cbiAgICBjb25zdCBkaXJlY3RpdmUgPSB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuICAgICAgICAgICAgYmNTdGFydERhdGU6ICdAPycsICAgICAgICAvLyBkYXRlIC0gZGVmYXVsdCB0byB0b2RheVxuICAgICAgICAgICAgYmNFbmREYXRlOiAnQD8nLCAgICAgICAgICAvLyBkYXRlIC0gaWYgbm90IHByZXNlbnQsIHVzZSBjcmVhdGUgdXNpbmcgYmNEYXlzXG4gICAgICAgICAgICBiY05lc3RpbmdEZXB0aDogJ0A/JywgICAgIC8vIHN0cmluZyBbbW9udGh8d2Vla3xkYXldIC0gZGVmYXVsdHM6IG1vbnRoXG4gICAgICAgICAgICBiY0RheXM6ICdAPycsICAgICAgICAgICAgIC8vIGludGVnZXIgLSBkZWZhdWx0IHRvIDMwICh1c2VkIHRvIGNyZWF0ZSBiY0VuZERhdGUpXG4gICAgICAgICAgICBiY0RheVRpdGxlRm9ybWF0OiAnQD8nLCAgIC8vIHN0cmluZyBbd29yZHxhYmJyZXZpYXRpb258bGV0dGVyXSAtIGRlZmF1bHQ6IGFiYnJldmlhdGlvblxuICAgICAgICAgICAgYmNNb250aFRpdGxlRm9ybWF0OiAnQD8nLCAvLyBzdHJpbmcgLSBhbnkgdmFsaWQgTW9tZW50IGRhdGUgZm9ybWF0IC0gZGVmYXVsdDogTU1NTVxuICAgICAgICAgICAgYmNEYXRlU2VsZWN0ZWQ6ICcmJywgICAgICAvLyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aGVuIGEgZGF0ZSBpcyBzZWxlY3RlZCAodGFwL2NsaWNrKVxuICAgICAgICAgICAgYmNTaG93V2Vla2RheXM6ICc9PycsICAgICAvLyBkZXRlcm1pbmUgaWYgdGhlIHdlZWtkYXlzIGhlYWRlciBzaG91bGQgYmUgY3JlYXRlZFxuICAgICAgICAgICAgYmNTaG93TW9udGhUaXRsZXM6ICc9PycsICAvLyBkZXRlcm1pbmUgaWYgdGhlIG1vbnRoIHRpdGxlcyBzaG91bGQgYmUgdmlzaWJsZVxuICAgICAgICAgICAgYmNEYXlUZW1wbGF0ZTogJ0A/JywgICAgICAvLyBvdmVyd3JpdGUgdGhlIGRlZmF1bHQgJ2RheScgdGVtcGxhdGVcbiAgICAgICAgICAgIGJjRGF0ZUZvcm1hdDogJ0A/JywgICAgICAgLy8gZGVmaW5lIGEgY3VzdG9tIGRhdGUgZm9ybWF0IGZvciB0aGUgZGF5XG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGxpbmtGdW5jdGlvbixcbiAgICAgICAgdGVtcGxhdGVVcmw6IGNhbGVuZGFyVGVtcGxhdGUsXG4gICAgICAgIGNvbnRyb2xsZXI6IENhbGVuZGFyQ29udHJvbGxlcixcbiAgICAgICAgY29udHJvbGxlckFzOiAnJGN0cmwnLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG5cblxuXG4gICAgLyoqXG4gICAgICogTGlua1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxpbmtGdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsICRjdHJsKSB7XG5cbiAgICAgICAgLy8gU2V0IHRoZSBjb3JyZWN0IHRlbXBsYXRlIGJhc2VkIG9uIHRoZSBkZXNpcmVkIG5lc3RpbmcgZGVwdGhcbiAgICAgICAgJGN0cmwuZ2V0VGVtcGxhdGVVcmwgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGVzWyRjdHJsLm5lc3RpbmdEZXB0aF07XG4gICAgICAgIH07XG5cbiAgICB9XG5cblxuXG59XG5cblxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY2FsZW5kYXIuZGlyZWN0aXZlLmpzXG4gKiovIiwiZXhwb3J0IGNsYXNzIENhbGVuZGFyQ29udHJvbGxlciB7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgJHRlbXBsYXRlQ2FjaGUsXG4gICAgICAgIGJjQ2FsZW5kYXJDb25maWcsIGJjQ2FsZW5kYXJTZXJ2aWNlXG4gICAgKSB7XG4gICAgICAgICduZ0luamVjdCc7XG5cbiAgICAgICAgdGhpcy4kdGVtcGxhdGVDYWNoZSA9ICR0ZW1wbGF0ZUNhY2hlO1xuICAgICAgICB0aGlzLmJjQ2FsZW5kYXJDb25maWcgPSBiY0NhbGVuZGFyQ29uZmlnO1xuICAgICAgICB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlID0gYmNDYWxlbmRhclNlcnZpY2U7XG5cblxuICAgICAgICB0aGlzLl9hY3RpdmF0ZSgpO1xuXG4gICAgfVxuXG5cblxuXG4gICAgX2FjdGl2YXRlKCkge1xuICAgICAgICAvLyBEZWZpbmUgdG9kYXkncyBkYXRlXG4gICAgICAgIHRoaXMudG9kYXkgPSBtb21lbnQobmV3IERhdGUoKSkuc3RhcnRPZignZGF5Jyk7XG5cbiAgICAgICAgLy8gRGVmaW5lIHRoZSBzdGFydCBkYXRlIGZvciB0aGUgY2FsZW5kYXJcbiAgICAgICAgdGhpcy5zdGFydERhdGUgPSB0aGlzLmJjU3RhcnREYXRlIHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5zdGFydERhdGU7XG5cbiAgICAgICAgLy8gSWYgdGhlIGVuZCBkYXRlIHdhcyBkZWZpbmVkXG4gICAgICAgIGlmICh0aGlzLmJjRW5kRGF0ZSkge1xuXG4gICAgICAgICAgICAvLyBEZWZpbmUgaG93IG1hbnkgZGF5cyBhcmUgbmVlZGVkIHVzaW5nIHRoZSBlbmQgZGF0ZVxuICAgICAgICAgICAgdGhpcy5kYXlzID0gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5kdXJhdGlvbkluRGF5cyh0aGlzLnN0YXJ0RGF0ZSwgdGhpcy5iY0VuZERhdGUpO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIC8vIERlZmluZSBob3cgbWFueSBkYXlzIGFyZSBuZWVkZWQgZnJvbSB0aGUgY291bnQgcGFzc2VkIGluIG9yIHRoZSBjb25maWdcbiAgICAgICAgICAgIHRoaXMuZGF5cyA9IHBhcnNlSW50KHRoaXMuYmNEYXlzIHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5kYXlzLCAxMCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlZmluZSBob3cgZGVlcCB0byBvcmdhbml6ZSB0aGUgY2FsZW5kYXJcbiAgICAgICAgdGhpcy5uZXN0aW5nRGVwdGggPSB0aGlzLmJjTmVzdGluZ0RlcHRoIHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5uZXN0aW5nRGVwdGg7XG5cbiAgICAgICAgLy8gRGVmaW5lIHRoZSB3ZWVrZGF5IGhlYWRlcnMgZm9ybWF0XG4gICAgICAgIHRoaXMud2Vla2RheXMgPSB0aGlzLmJjRGF5VGl0bGVGb3JtYXQgP1xuICAgICAgICAgICAgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLndlZWtkYXlTdHlsZVt0aGlzLmJjRGF5VGl0bGVGb3JtYXRdIDpcbiAgICAgICAgICAgIHRoaXMuYmNDYWxlbmRhckNvbmZpZy53ZWVrZGF5U3R5bGVbdGhpcy5iY0NhbGVuZGFyQ29uZmlnLmRheVRpdGxlRm9ybWF0XTtcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIGZvcm1hdCBmb3IgdGhlIG1vbnRoIHRpdGxlXG4gICAgICAgIHRoaXMubW9udGhUaXRsZUZvcm1hdCA9IHRoaXMuYmNNb250aFRpdGxlRm9ybWF0IHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5tb250aFRpdGxlRm9ybWF0O1xuXG4gICAgICAgIC8vIERlZmluZSBpZiBtb250aCB0aXRsZXMgc2hvdWxkIGJlIHZpc2libGVcbiAgICAgICAgdGhpcy5zaG93TW9udGhUaXRsZXMgPSB0eXBlb2YodGhpcy5iY1Nob3dNb250aFRpdGxlcykgPT09ICdib29sZWFuJyA/XG4gICAgICAgICAgICB0aGlzLmJjU2hvd01vbnRoVGl0bGVzIDogdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnNob3dNb250aFRpdGxlcztcblxuICAgICAgICAvLyBJbml0aWFsbHkgbm8gZGF0ZSBpcyBzZWxlY3RlZFxuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgLy8gU2V0IHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBjYWxlbmRhciB3ZWVrZGF5cyBoZWFkZXJzXG4gICAgICAgIHRoaXMuc2hvd1dlZWtkYXlzID0gdHlwZW9mKHRoaXMuYmNTaG93V2Vla2RheXMpID09PSAnYm9vbGVhbicgP1xuICAgICAgICAgICAgdGhpcy5iY1Nob3dXZWVrZGF5cyA6IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5zaG93V2Vla2RheXM7XG5cblxuICAgICAgICAvLyBJZiBhIGN1c3RvbSBkYXkgdGVtcGxhdGUgaGFzIGJlZW4gc2V0IGluIGVpdGhlciBsb2NhdGlvbiAoYXR0cmlidXRlIG9yIHByb3ZpZGVyKVxuICAgICAgICBpZiAodGhpcy5iY0RheVRlbXBsYXRlIHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy51c2VyRGF5VGVtcGxhdGUpIHtcbiAgICAgICAgICAgIC8vIE5hbWUgdGhlIHRlbXBsYXRlIGxvY2F0aW9uXG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUxvY2F0aW9uID0gJ3VzZXJEYXlUZW1wbGF0ZS5odG1sJztcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgc2V0IGEgdGVtcGxhdGUgdmlhIHRoZSBkaXJlY3RpdmUgYXR0cmlidXRlXG4gICAgICAgICAgICBpZiAodGhpcy5iY0RheVRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgLy8gUHV0IHRoZSB1c2VyIHRlbXBsYXRlIGludG8gdGhlIGNhY2hlXG4gICAgICAgICAgICAgICAgdGhpcy4kdGVtcGxhdGVDYWNoZS5wdXQodGVtcGxhdGVMb2NhdGlvbiwgdGhpcy5iY0RheVRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgZGVmaW5lZCBhIHRlbXBsYXRlIHVzaW5nIHRoZSBwcm92aWRlclxuICAgICAgICAgICAgaWYgKHRoaXMuYmNDYWxlbmRhckNvbmZpZy51c2VyRGF5VGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBQdXQgdGhlIHVzZXIgdGVtcGxhdGUgaW50byB0aGUgY2FjaGVcbiAgICAgICAgICAgICAgICB0aGlzLiR0ZW1wbGF0ZUNhY2hlLnB1dCh0ZW1wbGF0ZUxvY2F0aW9uLCB0aGlzLmJjQ2FsZW5kYXJDb25maWcudXNlckRheVRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGlubmVyLWRheSB0ZW1wbGF0ZSBvbiB0aGUgc2VydmljZVxuICAgICAgICAgICAgdGhpcy5iY0NhbGVuZGFyU2VydmljZS5zdG9yZURheVRlbXBsYXRlKHRlbXBsYXRlTG9jYXRpb24pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBObyBjdXN0b20gdGVtcGxhdGUgd2FzIGRlZmluZWRcblxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGlubmVyLWRheSB0ZW1wbGF0ZSBvbiB0aGUgc2VydmljZVxuICAgICAgICAgICAgdGhpcy5iY0NhbGVuZGFyU2VydmljZS5zdG9yZURheVRlbXBsYXRlKHRoaXMuYmNDYWxlbmRhckNvbmZpZy5kYXlUZW1wbGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWZpbmUgdGhlIGRhdGUgZm9ybWF0IGZvciB0aGUgaW5kaXZpZHVhbCBkYXlcbiAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gdGhpcy5iY0RhdGVGb3JtYXQgfHwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLmRhdGVGb3JtYXQ7XG5cbiAgICAgICAgLy8gQnVpbGQgYXJyYXkgb2YgZGF5c1xuICAgICAgICBjb25zdCBkYXlzID0gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5idWlsZERheXModGhpcy5kYXlzLCB0aGlzLnN0YXJ0RGF0ZSk7XG5cbiAgICAgICAgLy8gQnVpbGQgdGhlIGNhbGVuZGFyIEpTT04gYW5kIGV4cG9zZSB0byB0aGUgRE9NXG4gICAgICAgIHRoaXMuX2J1aWxkQ2FsZW5kYXIoZGF5cywgdGhpcy5uZXN0aW5nRGVwdGgpO1xuXG4gICAgfVxuXG5cblxuXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB0byBzZWUgaWYgdGhlIGRheSBpcyBwcmlvciB0byB0aGUgY3VycmVudCBkYXRlXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGRpc2FibGUgdGhlIHVuc2VsZWN0YWJsZSBkYXlzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RhdGV9IGRhdGVcbiAgICAgKiBAcmV0dXJuIHtCb29sfVxuICAgICAqL1xuICAgIGlzQmVmb3JlVG9kYXkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5kYXRlSXNCZWZvcmVUb2RheShkYXRlKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHRvIHNlZSBpZiB0aGUgZGF5IG1hdGNoZXMgdGhlIGN1cnJlbnQgZGF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtEYXRlfSBkYXRlXG4gICAgICogQHJldHVybiB7Qm9vbH1cbiAgICAgKi9cbiAgICBpc0RheVRvZGF5KGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmNDYWxlbmRhclNlcnZpY2UuaXNEYXlUb2RheShkYXRlLCB0aGlzLnN0YXJ0RGF0ZSk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBTZWxlY3QgYSBkYXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF5XG4gICAgICovXG4gICAgc2VsZWN0RGF0ZShkYXkpIHtcbiAgICAgICAgLy8gU2V0IHRoZSBzZWxlY3RlZCBkYXlcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSBkYXk7XG5cbiAgICAgICAgLy8gT25seSBjYWxsIHRoZSBwYXNzZWQgbWV0aG9kIGlmIGl0IGV4aXN0cyBhbmQgYSB2YWxpZCBkYXRlIHdhcyBjaG9zZW5cbiAgICAgICAgaWYgKGRheS5kYXRlICYmIHRoaXMuYmNEYXRlU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYmNEYXRlU2VsZWN0ZWQoe1xuICAgICAgICAgICAgICAgIGRhdGU6IGRheS5kYXRlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBhIGRhdGUgdXNpbmcgbW9tZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb3JtYXRcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IGZvcm1hdHRlZERhdGVcbiAgICAgKi9cbiAgICBmb3JtYXREYXRlKGRhdGUsIGZvcm1hdCkge1xuICAgICAgICBpZiAoIWRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KGZvcm1hdCk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBCdWlsZCB0aGUgY2FsZW5kYXIgSlNPTlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZGF5c1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkZXB0aFxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgKi9cbiAgICBfYnVpbGRDYWxlbmRhcihkYXlzLCBkZXB0aCkge1xuXG4gICAgICAgIC8vIENhbGwgdGhlIGNvcnJlY3Qgb3JnYW5pemF0aW9uIG1ldGhvZCBiYXNlZCBvbiB0aGUgbmVzdGluZyBkZXB0aFxuICAgICAgICBpZiAoZGVwdGggPT09ICdtb250aCcpIHtcblxuICAgICAgICAgICAgdGhpcy5iY0NvbGxlY3Rpb24gPSB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLm9yZ2FuaXplTW9udGhzKGRheXMpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoZGVwdGggPT09ICd3ZWVrJykge1xuXG4gICAgICAgICAgICB0aGlzLmJjQ29sbGVjdGlvbiA9IHRoaXMuYmNDYWxlbmRhclNlcnZpY2Uub3JnYW5pemVXZWVrcyhkYXlzKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGRlcHRoID09PSAnZGF5Jykge1xuXG4gICAgICAgICAgICB0aGlzLmJjQ29sbGVjdGlvbiA9IGRheXM7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG5cbn1cblxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY2FsZW5kYXIuY29udHJvbGxlci5qc1xuICoqLyIsInZhciBwYXRoID0gJy9Vc2Vycy9iYy9Db2RlL29wZW4tc291cmNlL2FuZ3VsYXItanNvbi1jYWxlbmRhci9zcmMvdGVtcGxhdGVzL2NhbGVuZGFyLmh0bWwnO1xudmFyIGh0bWwgPSBcIjxzZWN0aW9uIGNsYXNzPWJjLWNhbGVuZGFyPiA8c3BhbiBjbGFzcz1iYy1jYWxlbmRhcl9fd2Vla2RheXMgZGF0YS1uZy1pZj1cXFwiJGN0cmwuc2hvd1dlZWtkYXlzICYmICRjdHJsLm5lc3RpbmdEZXB0aCA9PT0gJ3dlZWsnXFxcIj4gPHNwYW4gY2xhc3M9XFxcImJjLWNhbGVuZGFyX19kYXkgYmMtY2FsZW5kYXJfX2RheS0td2Vla2RheXNcXFwiIGRhdGEtbmctcmVwZWF0PVxcXCJkYXkgaW4gJGN0cmwud2Vla2RheXMgdHJhY2sgYnkgJGluZGV4XFxcIj4gPHN0cm9uZyBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5LXRpdGxlPiB7eyBkYXkgfX0gPC9zdHJvbmc+IDwvc3Bhbj4gPC9zcGFuPiA8YmMteWVhciBkYXRhLW5nLWlmPVxcXCIkY3RybC5uZXN0aW5nRGVwdGggPT09ICd5ZWFyJ1xcXCIgY2xhc3M9YmMtY2FsZW5kYXJfX3llYXItd3JhcHBlciBiYy1jb2xsZWN0aW9uPSRjdHJsLmJjQ29sbGVjdGlvbj48L2JjLXllYXI+IDxiYy1tb250aCBkYXRhLW5nLWlmPVxcXCIkY3RybC5uZXN0aW5nRGVwdGggPT09ICdtb250aCdcXFwiIGNsYXNzPWJjLWNhbGVuZGFyX19tb250aC13cmFwcGVyIGJjLWNvbGxlY3Rpb249JGN0cmwuYmNDb2xsZWN0aW9uPjwvYmMtbW9udGg+IDxiYy13ZWVrIGRhdGEtbmctaWY9XFxcIiRjdHJsLm5lc3RpbmdEZXB0aCA9PT0gJ3dlZWsnXFxcIiBjbGFzcz1iYy1jYWxlbmRhcl9fd2Vlay13cmFwcGVyIGJjLWNvbGxlY3Rpb249JGN0cmwuYmNDb2xsZWN0aW9uPjwvYmMtd2Vlaz4gPGJjLWRheSBkYXRhLW5nLWlmPVxcXCIkY3RybC5uZXN0aW5nRGVwdGggPT09ICdkYXknXFxcIiBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5LXdyYXBwZXIgYmMtY29sbGVjdGlvbj0kY3RybC5iY0NvbGxlY3Rpb24+PC9iYy1kYXk+IDwvc2VjdGlvbj5cIjtcbndpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xubW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdGVtcGxhdGVzL2NhbGVuZGFyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA2XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsInZhciBwYXRoID0gJy9Vc2Vycy9iYy9Db2RlL29wZW4tc291cmNlL2FuZ3VsYXItanNvbi1jYWxlbmRhci9zcmMvdGVtcGxhdGVzL3llYXIuaHRtbCc7XG52YXIgaHRtbCA9IFwiPGRpdiBjbGFzcz1iYy1jYWxlbmRhcl9feWVhciBkYXRhLW5nLXJlcGVhdD1cXFwieWVhciBpbiB2bS5iY0NvbGxlY3Rpb24gdHJhY2sgYnkgJGluZGV4XFxcIj4gPGJjLW1vbnRoIGJjLWNvbGxlY3Rpb249eWVhciBiYy13ZWVrcy1oZWFkZXI9JGN0cmwud2Vla2RheXNIZWFkZXIgY2xhc3M9YmMtY2FsZW5kYXJfX21vbnRoLXdyYXBwZXI+PC9iYy1tb250aD4gPC9kaXY+XCI7XG53aW5kb3cuYW5ndWxhci5tb2R1bGUoJ25nJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbihjKSB7IGMucHV0KHBhdGgsIGh0bWwpIH1dKTtcbm1vZHVsZS5leHBvcnRzID0gcGF0aDtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL3RlbXBsYXRlcy95ZWFyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsInZhciBwYXRoID0gJy9Vc2Vycy9iYy9Db2RlL29wZW4tc291cmNlL2FuZ3VsYXItanNvbi1jYWxlbmRhci9zcmMvdGVtcGxhdGVzL21vbnRoLmh0bWwnO1xudmFyIGh0bWwgPSBcIjx0aW1lIGNsYXNzPWJjLWNhbGVuZGFyX19tb250aCBkYXRldGltZT1cXFwie3sgbW9udGhbMF1bbW9udGhbMF0ubGVuZ3RoIC0gMV0uZGF0ZSB8IGRhdGU6J3l5eXktTU0nIH19XFxcIiBkYXRhLW5nLXJlcGVhdD1cXFwibW9udGggaW4gdm0uYmNDb2xsZWN0aW9uIHRyYWNrIGJ5ICRpbmRleFxcXCI+IDxzcGFuIGNsYXNzPWJjLWNhbGVuZGFyX19tb250aC10aXRsZSBkYXRhLW5nLWJpbmQ9XFxcIiRjdHJsLmZvcm1hdERhdGUobW9udGhbMF1bbW9udGhbMF0ubGVuZ3RoIC0gMV0uZGF0ZSwgJGN0cmwubW9udGhUaXRsZUZvcm1hdClcXFwiIGRhdGEtbmctaWY9JGN0cmwuc2hvd01vbnRoVGl0bGVzPjwvc3Bhbj4gPHNwYW4gY2xhc3M9YmMtY2FsZW5kYXJfX3dlZWtkYXlzIGRhdGEtbmctaWY9JGN0cmwuc2hvd1dlZWtkYXlzPiA8c3BhbiBjbGFzcz1cXFwiYmMtY2FsZW5kYXJfX2RheSBiYy1jYWxlbmRhcl9fZGF5LS13ZWVrZGF5c1xcXCIgZGF0YS1uZy1yZXBlYXQ9XFxcImRheSBpbiAkY3RybC53ZWVrZGF5cyB0cmFjayBieSAkaW5kZXhcXFwiPiA8c3Ryb25nIGNsYXNzPWJjLWNhbGVuZGFyX19kYXktdGl0bGU+IHt7IGRheSB9fSA8L3N0cm9uZz4gPC9zcGFuPiA8L3NwYW4+IDxiYy13ZWVrIGJjLWNvbGxlY3Rpb249bW9udGggY2xhc3M9YmMtY2FsZW5kYXJfX3dlZWstd3JhcHBlcj48L2JjLXdlZWs+IDwvdGltZT5cIjtcbndpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xubW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdGVtcGxhdGVzL21vbnRoLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsInZhciBwYXRoID0gJy9Vc2Vycy9iYy9Db2RlL29wZW4tc291cmNlL2FuZ3VsYXItanNvbi1jYWxlbmRhci9zcmMvdGVtcGxhdGVzL3dlZWsuaHRtbCc7XG52YXIgaHRtbCA9IFwiPHRpbWUgY2xhc3M9YmMtY2FsZW5kYXJfX3dlZWsgZGF0ZXRpbWU9XFxcInt7IHdlZWtbd2Vlay5sZW5ndGggLSAxXS5kYXRlIHwgZGF0ZToneXl5eS13dycgfX1cXFwiIGRhdGEtbmctcmVwZWF0PVxcXCJ3ZWVrIGluIHZtLmJjQ29sbGVjdGlvbiB0cmFjayBieSAkaW5kZXhcXFwiPiA8YmMtZGF5IGJjLWNvbGxlY3Rpb249d2VlayBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5LXdyYXBwZXI+PC9iYy1kYXk+IDwvdGltZT5cIjtcbndpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xubW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdGVtcGxhdGVzL3dlZWsuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwidmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvZGF5Lmh0bWwnO1xudmFyIGh0bWwgPSBcIjxzcGFuIGNsYXNzPWJjLWNhbGVuZGFyX19kYXkgZGF0YS1uZy1jbGFzcz1cXFwieyAnYmMtY2FsZW5kYXJfX2RheS0tZGlzYWJsZWQnOiAkY3RybC5pc0JlZm9yZVRvZGF5KGRheS5kYXRlKSxcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLXRvZGF5JzogJGN0cmwuaXNEYXlUb2RheShkYXkuZGF0ZSksXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS1ldmVuJzogJGV2ZW4sXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS1vZGQnOiAkb2RkLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tcGFkJzogIWRheS5kYXRlLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tdmFsaWQnOiBkYXkuZGF0ZSxcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLXNlbGVjdGVkJzogZGF5LmRhdGUgPT09ICRjdHJsLnNlbGVjdGVkRGF0ZS5kYXRlIH1cXFwiIGRhdGEtbmctY2xpY2s9JGN0cmwuc2VsZWN0RGF0ZShkYXkpIGRhdGEtbmctcmVwZWF0PVxcXCJkYXkgaW4gdm0uYmNDb2xsZWN0aW9uIHRyYWNrIGJ5ICRpbmRleFxcXCIgdGl0bGU9ZGF5LmRhdGU+IDxuZy1pbmNsdWRlIHNyYz12bS5kYXlUZW1wbGF0ZT48L25nLWluY2x1ZGU+IDwvc3Bhbj5cIjtcbndpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xubW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdGVtcGxhdGVzL2RheS5odG1sXG4gKiogbW9kdWxlIGlkID0gMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwiaW1wb3J0IHllYXJUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlcy95ZWFyLmh0bWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gYmNZZWFyRGlyZWN0aXZlKFxuKSB7XG4gICAgJ25nSW5qZWN0JztcblxuICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgIGJjQ29sbGVjdGlvbjogJz0nLFxuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogeWVhclRlbXBsYXRlLFxuICAgICAgICBjb250cm9sbGVyOiAoKSA9PiB7fSxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG59XG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3llYXIuZGlyZWN0aXZlLmpzXG4gKiovIiwiaW1wb3J0IG1vbnRoVGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZXMvbW9udGguaHRtbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBiY01vbnRoRGlyZWN0aXZlKFxuKSB7XG4gICAgJ25nSW5qZWN0JztcblxuICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgIGJjQ29sbGVjdGlvbjogJz0nLFxuICAgICAgICAgICAgYmNXZWVrZGF5c0hlYWRlcjogJz0nLFxuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogbW9udGhUZW1wbGF0ZSxcbiAgICAgICAgY29udHJvbGxlcjogKCkgPT4ge30sXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxufVxuXG5cblxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbW9udGguZGlyZWN0aXZlLmpzXG4gKiovIiwiaW1wb3J0IHdlZWtUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlcy93ZWVrLmh0bWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gYmNXZWVrRGlyZWN0aXZlKFxuKSB7XG4gICAgJ25nSW5qZWN0JztcblxuICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICAgICAgIGJjQ29sbGVjdGlvbjogJz0nLFxuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogd2Vla1RlbXBsYXRlLFxuICAgICAgICBjb250cm9sbGVyOiAoKSA9PiB7fSxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG59XG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3dlZWsuZGlyZWN0aXZlLmpzXG4gKiovIiwiaW1wb3J0IGRheVdyYXBwZXJUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlcy9kYXkuaHRtbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBiY0RheURpcmVjdGl2ZShcbiAgICBiY0NhbGVuZGFyQ29uZmlnXG4pIHtcbiAgICAnbmdJbmplY3QnO1xuXG4gICAgY29uc3QgZGlyZWN0aXZlID0ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZTogdHJ1ZSxcbiAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuICAgICAgICAgICAgYmNDb2xsZWN0aW9uOiAnPScsXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiBkYXlXcmFwcGVyVGVtcGxhdGUsXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKGJjQ2FsZW5kYXJTZXJ2aWNlKSB7XG4gICAgICAgICAgICAnbmdJbmplY3QnO1xuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGlubmVyLWRheSB0ZW1wbGF0ZSBmcm9tIHRoZSBzZXJ2aWNlXG4gICAgICAgICAgICB0aGlzLmRheVRlbXBsYXRlID0gYmNDYWxlbmRhclNlcnZpY2UuZ2V0RGF5VGVtcGxhdGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG59XG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2RheS5kaXJlY3RpdmUuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9