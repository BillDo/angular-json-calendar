!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("angular-json-calendar",[],t):"object"==typeof exports?exports["angular-json-calendar"]=t():e["angular-json-calendar"]=t()}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(3),o=a(4),i=a(11),c=a(12),l=a(13),d=a(14);t["default"]=angular.module("bc.JsonCalendar",[]).provider("bcCalendarConfig",n.bcCalendarConfig).service("bcCalendarService",r.bcCalendarService).directive("bcCalendar",o.bcCalendarDirective).directive("bcYear",i.bcYearDirective).directive("bcMonth",c.bcMonthDirective).directive("bcWeek",l.bcWeekDirective).directive("bcDay",d.bcDayDirective)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.bcCalendarConfig=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(2),c=n(i);t.bcCalendarConfig=function(){function e(){"ngInject";var t=this;r(this,e),this.startDate=moment(new Date).startOf("day").format(),this.nestingDepth="month",this.days=30,this.weekdayStyle={letter:["S","M","T","W","T","F","S"],abbreviation:["Sun","Mon","Tue","Wed","Thur","Fri","Sat"],word:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},this.dayTitleFormat="abbreviation",this.showWeekdays=!0,this.dayTemplate=c["default"],this.setDayTemplate=function(e){t.userDayTemplate=e},this.dateFormat="D",this.monthTitleFormat="MMMM",this.showMonthTitles=!0}return o(e,[{key:"$get",value:function(){return this}}]),e}()},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/day.inner.html",n='<time datetime="{{ day.date | date:\'yyyy-MM-dd\' }}" class=bc-calendar__day-time title="{{ day.date }}" data-ng-if=day.date> <span data-ng-bind="vm.formatDate(day.date, vm.dateFormat)"></span> </time>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.bcCalendarService=function(){function e(){"ngInject";a(this,e),this.WEEK_LENGTH=7}return n(e,[{key:"dateIsBeforeToday",value:function(e){var t=moment(new Date).startOf("day").format();return moment(e).isBefore(t)}},{key:"isDayToday",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?moment(new Date).format():arguments[1];return moment(e).isSame(t)}},{key:"integerToArray",value:function(e){var t=void 0,a=[];for(t=0;t<e;t+=1)a.push(t);return a}},{key:"padDaysLeft",value:function(e,t){var a=[],n=this.integerToArray(t);for(var r in n){var o=parseInt(r,10)+1,i=moment(e).subtract(o,"days").toISOString();a.unshift({date:i})}return a}},{key:"padBlankTiles",value:function(e,t){var a=arguments.length<=2||void 0===arguments[2]?"left":arguments[2],n=void 0,r=[];for(n=0;n<t;n+=1)r.push({date:null});return"right"===a?e.concat(r):"left"===a?r.concat(e):void 0}},{key:"chunk",value:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?this.WEEK_LENGTH:arguments[1],a=[],n=0,r=e.length/parseInt(t,10);n<r;)a[n]=e.splice(0,t),n+=1;return a}},{key:"durationInDays",value:function(e,t){var a=moment(e).startOf("day"),n=moment(t).startOf("day").add(1,"days");return n.diff(a,"days")}},{key:"organizeWeeks",value:function(e){var t=moment(e[0].date).day(),a=moment(e[e.length-1].date).day(),n=6,r=0;return t>r&&(e=this.padBlankTiles(e,t,"left")),a<n&&(e=this.padBlankTiles(e,this.WEEK_LENGTH-(a+1),"right")),this.chunk(e)}},{key:"organizeMonths",value:function(e){var t=[],a=6,n=0,r=e,o=void 0,i=moment(r[0].date).date(),c=moment(r[0].date).daysInMonth();if(moment(r[0].date).date()>0){o=r.slice(0,c-(i-1));var l=this.padDaysLeft(o[0].date,i-1);r=l.concat(r)}for(;r.length>0;){i=moment(r[0].date).date(),c=moment(r[0].date).daysInMonth(),o=r.splice(0,c-(i-1));var d=moment(o[0].date).day();d>n&&(o=this.padBlankTiles(o,d,"left"));var s=moment(o[o.length-1].date).day();s<a&&(o=this.padBlankTiles(o,this.WEEK_LENGTH-(s+1),"right")),t.push(this.chunk(o))}return t}},{key:"buildDays",value:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?new Date:arguments[1],a=0,n=[],r=void 0;a<e;)r=moment(t).add(a,"days").toISOString(),n.push({date:r}),a+=1;return n}}]),e}()},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";function e(e,a,n,r){r.getTemplateUrl=function(){return t[r.nestingDepth]}}var t={year:d["default"],month:u["default"],week:y["default"],day:f["default"]},a={restrict:"E",replace:!0,scope:{},bindToController:{bcStartDate:"@?",bcEndDate:"@?",bcNestingDepth:"@?",bcDays:"@?",bcDayTitleFormat:"@?",bcMonthTitleFormat:"@?",bcDateSelected:"&",bcShowWeekdays:"=?",bcShowMonthTitles:"=?",bcDayTemplate:"@?",bcDateFormat:"@?"},link:e,templateUrl:c["default"],controller:o.CalendarController,controllerAs:"vm"};return a}Object.defineProperty(t,"__esModule",{value:!0}),t.bcCalendarDirective=r;var o=a(5),i=a(6),c=n(i),l=a(7),d=n(l),s=a(8),u=n(s),h=a(9),y=n(h),b=a(10),f=n(b)},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.CalendarController=function(){function e(t,n,r){"ngInject";a(this,e),this.$templateCache=t,this.bcCalendarConfig=n,this.bcCalendarService=r,this._activate()}return e.$inject=["$templateCache","bcCalendarConfig","bcCalendarService"],n(e,[{key:"_activate",value:function(){if(this.today=moment(new Date).startOf("day"),this.startDate=this.bcStartDate||this.bcCalendarConfig.startDate,this.bcEndDate?this.days=this.bcCalendarService.durationInDays(this.startDate,this.bcEndDate):this.days=parseInt(this.bcDays||this.bcCalendarConfig.days,10),this.nestingDepth=this.bcNestingDepth||this.bcCalendarConfig.nestingDepth,this.weekdays=this.bcDayTitleFormat?this.bcCalendarConfig.weekdayStyle[this.bcDayTitleFormat]:this.bcCalendarConfig.weekdayStyle[this.bcCalendarConfig.dayTitleFormat],this.monthTitleFormat=this.bcMonthTitleFormat||this.bcCalendarConfig.monthTitleFormat,this.showMonthTitles="boolean"==typeof this.bcShowMonthTitles?this.bcShowMonthTitles:this.bcCalendarConfig.showMonthTitles,this.selectedDate=null,this.showWeekdays="boolean"==typeof this.bcShowWeekdays?this.bcShowWeekdays:this.bcCalendarConfig.showWeekdays,this.bcDayTemplate){var e="userDayTemplate.html";this.$templateCache.put(e,this.bcDayTemplate),this.dayTemplate=e}else if(this.bcCalendarConfig.userDayTemplate){var t="userDayTemplate.html";this.$templateCache.put(t,this.bcCalendarConfig.userDayTemplate),this.dayTemplate=t}else this.dayTemplate=this.bcCalendarConfig.dayTemplate;this.dateFormat=this.bcDateFormat||this.bcCalendarConfig.dateFormat;var a=this.bcCalendarService.buildDays(this.days,this.startDate);this._buildCalendar(a,this.nestingDepth)}},{key:"isBeforeToday",value:function(e){return this.bcCalendarService.dateIsBeforeToday(e)}},{key:"isDayToday",value:function(e){return this.bcCalendarService.isDayToday(e,this.startDate)}},{key:"selectDate",value:function(e){this.selectedDate=e,e.date&&this.bcDateSelected&&this.bcDateSelected({date:e.date})}},{key:"formatDate",value:function(e,t){return!!e&&moment(e).format(t)}},{key:"_buildCalendar",value:function(e,t){"month"===t?this.bcCollection=this.bcCalendarService.organizeMonths(e):"week"===t?this.bcCollection=this.bcCalendarService.organizeWeeks(e):"day"===t&&(this.bcCollection=e)}}]),e}()},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/calendar.html",n='<section class=bc-calendar> <span class=bc-calendar__weekdays data-ng-if="vm.showWeekdays && vm.nestingDepth === \'week\'"> <span class="bc-calendar__day bc-calendar__day--weekdays" data-ng-repeat="day in vm.weekdays track by $index"> <strong class=bc-calendar__day-title> {{ day }} </strong> </span> </span> <bc-year bc-collection=vm.bcCollection data-ng-if="vm.nestingDepth === \'year\'"></bc-year> <bc-month bc-collection=vm.bcCollection data-ng-if="vm.nestingDepth === \'month\'"></bc-month> <bc-week bc-collection=vm.bcCollection data-ng-if="vm.nestingDepth === \'week\'"></bc-week> <bc-day bc-collection=vm.bcCollection data-ng-if="vm.nestingDepth === \'day\'"></bc-day> </section>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/year.html",n='<div class=bc-calendar__year data-ng-repeat="year in vm.bcCollection track by $index"> <bc-month bc-collection=year bc-weeks-header=vm.weekdaysHeader></bc-month> </div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/month.html",n='<time class=bc-calendar__month datetime="{{ month[0][month[0].length - 1].date | date:\'yyyy-MM\' }}" data-ng-repeat="month in vm.bcCollection track by $index"> <span class=bc-calendar__month-title data-ng-bind="vm.formatDate(month[0][month[0].length - 1].date, vm.monthTitleFormat)" data-ng-if=vm.showMonthTitles></span> <span class=bc-calendar__weekdays data-ng-if=vm.showWeekdays> <span class="bc-calendar__day bc-calendar__day--weekdays" data-ng-repeat="day in vm.weekdays track by $index"> <strong class=bc-calendar__day-title> {{ day }} </strong> </span> </span> <bc-week bc-collection=month></bc-week> </time>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/week.html",n='<time class=bc-calendar__week datetime="{{ week[week.length - 1].date | date:\'yyyy-ww\' }}" data-ng-repeat="week in vm.bcCollection track by $index"> <bc-day bc-collection=week></bc-day> </time>';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t){var a="/Users/bc/Code/open-source/angular-json-calendar/src/templates/day.html",n="<span class=bc-calendar__day data-ng-class=\"{ 'bc-calendar__day--disabled': vm.isBeforeToday(day.date),\n                   'bc-calendar__day--today': vm.isDayToday(day.date),\n                   'bc-calendar__day--even': $even,\n                   'bc-calendar__day--odd': $odd,\n                   'bc-calendar__day--pad': !day.date,\n                   'bc-calendar__day--valid': day.date,\n                   'bc-calendar__day--selected': day.date === vm.selectedDate.date }\" data-ng-click=vm.selectDate(day) data-ng-repeat=\"day in vm.bcCollection track by $index\" title=day.date> <ng-include src=vm.dayTemplate></ng-include> </span>";window.angular.module("ng").run(["$templateCache",function(e){e.put(a,n)}]),e.exports=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";var e={restrict:"E",replace:!0,scope:{},bindToController:{bcCollection:"="},templateUrl:i["default"],controller:function(){console.log("in YEAR directive: ",this.bcCollection)},controllerAs:"vm"};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.bcYearDirective=r;var o=a(7),i=n(o)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";var e={restrict:"E",replace:!0,scope:{},bindToController:{bcCollection:"=",bcWeekdaysHeader:"="},templateUrl:i["default"],controller:function(){console.log("in MONTH directive: ",this.bcCollection)},controllerAs:"vm"};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.bcMonthDirective=r;var o=a(8),i=n(o)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){"ngInject";var e={restrict:"E",replace:!0,scope:{},bindToController:{bcCollection:"="},templateUrl:i["default"],controller:function(){console.log("in WEEK directive: ",this.bcCollection)},controllerAs:"vm"};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.bcWeekDirective=r;var o=a(9),i=n(o)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){"ngInject";var t={restrict:"E",replace:!0,scope:{},bindToController:{bcCollection:"="},templateUrl:i["default"],controller:function(){console.log("in DAY directive: ",this.bcCollection)},controllerAs:"vm"};return t}r.$inject=["bcCalendarConfig"],Object.defineProperty(t,"__esModule",{value:!0}),t.bcDayDirective=r;var o=a(10),i=n(o)}])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uPzVjYTYiLCJ3ZWJwYWNrOi8vL2FuZ3VsYXItanNvbi1jYWxlbmRhci5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDZlOTc5ZWM2OTY2NjVhNTcwZjU5PzVhNTYiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzPzk1NTIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyLnByb3ZpZGVyLmpzPzQ2YjAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RlbXBsYXRlcy9kYXkuaW5uZXIuaHRtbD9lYzZmIiwid2VicGFjazovLy8uL3NyYy9jYWxlbmRhci5zZXJ2aWNlLmpzPzI2MzkiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbGVuZGFyLmRpcmVjdGl2ZS5qcz8xNGU3Iiwid2VicGFjazovLy8uL3NyYy9jYWxlbmRhci5jb250cm9sbGVyLmpzPzNlYjgiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RlbXBsYXRlcy9jYWxlbmRhci5odG1sPzIxNDQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RlbXBsYXRlcy95ZWFyLmh0bWw/NTc1OSIsIndlYnBhY2s6Ly8vLi9zcmMvdGVtcGxhdGVzL21vbnRoLmh0bWw/ZWY2MSIsIndlYnBhY2s6Ly8vLi9zcmMvdGVtcGxhdGVzL3dlZWsuaHRtbD80ODA3Iiwid2VicGFjazovLy8uL3NyYy90ZW1wbGF0ZXMvZGF5Lmh0bWw/OTMwNiIsIndlYnBhY2s6Ly8vLi9zcmMveWVhci5kaXJlY3RpdmUuanM/Mjk5YyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9udGguZGlyZWN0aXZlLmpzPzRkN2QiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlZWsuZGlyZWN0aXZlLmpzP2ViNWYiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RheS5kaXJlY3RpdmUuanM/YTNjMSJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX2NhbGVuZGFyIiwiX2NhbGVuZGFyMiIsIl9jYWxlbmRhcjMiLCJfeWVhciIsIl9tb250aCIsIl93ZWVrIiwiX2RheSIsImFuZ3VsYXIiLCJwcm92aWRlciIsImJjQ2FsZW5kYXJDb25maWciLCJzZXJ2aWNlIiwiYmNDYWxlbmRhclNlcnZpY2UiLCJkaXJlY3RpdmUiLCJiY0NhbGVuZGFyRGlyZWN0aXZlIiwiYmNZZWFyRGlyZWN0aXZlIiwiYmNNb250aERpcmVjdGl2ZSIsImJjV2Vla0RpcmVjdGl2ZSIsImJjRGF5RGlyZWN0aXZlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsInVuZGVmaW5lZCIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX2RheUlubmVyIiwiX2RheUlubmVyMiIsIl90aGlzIiwic3RhcnREYXRlIiwibW9tZW50IiwiRGF0ZSIsInN0YXJ0T2YiLCJmb3JtYXQiLCJuZXN0aW5nRGVwdGgiLCJkYXlzIiwid2Vla2RheVN0eWxlIiwibGV0dGVyIiwiYWJicmV2aWF0aW9uIiwid29yZCIsImRheVRpdGxlRm9ybWF0Iiwic2hvd1dlZWtkYXlzIiwiZGF5VGVtcGxhdGUiLCJzZXREYXlUZW1wbGF0ZSIsInRlbXBsYXRlIiwidXNlckRheVRlbXBsYXRlIiwiZGF0ZUZvcm1hdCIsIm1vbnRoVGl0bGVGb3JtYXQiLCJzaG93TW9udGhUaXRsZXMiLCJwYXRoIiwiaHRtbCIsIndpbmRvdyIsInJ1biIsInB1dCIsIldFRUtfTEVOR1RIIiwiZGF0ZSIsInRvZGF5IiwiaXNCZWZvcmUiLCJkYXRlMiIsImFyZ3VtZW50cyIsImlzU2FtZSIsImNvdW50IiwicHVzaCIsInBhZCIsIm1pc3NpbmdEYXlzIiwiaW50ZWdlclRvQXJyYXkiLCJkYXkiLCJzdWJ0cmFjdGlvbiIsInBhcnNlSW50IiwicHJldmlvdXMiLCJzdWJ0cmFjdCIsInRvSVNPU3RyaW5nIiwidW5zaGlmdCIsImNvbGxlY3Rpb24iLCJkaXJlY3Rpb24iLCJjb25jYXQiLCJncm91cCIsImdyb3Vwc2l6ZSIsInNldHMiLCJjaHVua3MiLCJzcGxpY2UiLCJzdGFydCIsImVuZCIsIm5ld1N0YXJ0IiwibmV3RW5kIiwiYWRkIiwiZGlmZiIsImZpcnN0RGF5IiwibGFzdERheSIsIlNBVFVSREFZIiwiU1VOREFZIiwicGFkQmxhbmtUaWxlcyIsImNodW5rIiwiYWxsRGF5cyIsImNhbGVuZGFyIiwibW9udGgiLCJkYXlPZk1vbnRoIiwiZGF5c0luTW9udGgiLCJzbGljZSIsInBhZERheXNMZWZ0IiwibGltaXQiLCJjb3VudGVyIiwibGlua0Z1bmN0aW9uIiwiJHNjb3BlIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCJ2bSIsImdldFRlbXBsYXRlVXJsIiwidGVtcGxhdGVzIiwieWVhciIsIl95ZWFyMiIsIl9tb250aDIiLCJ3ZWVrIiwiX3dlZWsyIiwiX2RheTIiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJzY29wZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJiY1N0YXJ0RGF0ZSIsImJjRW5kRGF0ZSIsImJjTmVzdGluZ0RlcHRoIiwiYmNEYXlzIiwiYmNEYXlUaXRsZUZvcm1hdCIsImJjTW9udGhUaXRsZUZvcm1hdCIsImJjRGF0ZVNlbGVjdGVkIiwiYmNTaG93V2Vla2RheXMiLCJiY1Nob3dNb250aFRpdGxlcyIsImJjRGF5VGVtcGxhdGUiLCJiY0RhdGVGb3JtYXQiLCJsaW5rIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiQ2FsZW5kYXJDb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwiJHRlbXBsYXRlQ2FjaGUiLCJfYWN0aXZhdGUiLCIkaW5qZWN0IiwiZHVyYXRpb25JbkRheXMiLCJ3ZWVrZGF5cyIsInNlbGVjdGVkRGF0ZSIsInRlbXBsYXRlTG9jYXRpb24iLCJfdGVtcGxhdGVMb2NhdGlvbiIsImJ1aWxkRGF5cyIsIl9idWlsZENhbGVuZGFyIiwiZGF0ZUlzQmVmb3JlVG9kYXkiLCJpc0RheVRvZGF5IiwiZGVwdGgiLCJiY0NvbGxlY3Rpb24iLCJvcmdhbml6ZU1vbnRocyIsIm9yZ2FuaXplV2Vla3MiLCJjb25zb2xlIiwibG9nIiwiYmNXZWVrZGF5c0hlYWRlciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxnQkFBQUMsVUFBQSxnQkFBQUMsUUFDQUEsT0FBQUQsUUFBQUQsSUFDQSxrQkFBQUcsZ0JBQUFDLElBQ0FELE9BQUEsMkJBQUFILEdBQ0EsZ0JBQUFDLFNBQ0FBLFFBQUEseUJBQUFELElBRUFELEVBQUEseUJBQUFDLEtBQ0NLLEtBQUEsV0FDRCxNQ0FnQixVQUFVQyxHQ04xQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQVAsT0FHQSxJQUFBQyxHQUFBTyxFQUFBRCxJQUNBUCxXQUNBUyxHQUFBRixFQUNBRyxRQUFBLEVBVUEsT0FOQUwsR0FBQUUsR0FBQUksS0FBQVYsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQU0sR0FHQUwsRUFBQVMsUUFBQSxFQUdBVCxFQUFBRCxRQXZCQSxHQUFBUSxLQXFDQSxPQVRBRixHQUFBTSxFQUFBUCxFQUdBQyxFQUFBTyxFQUFBTCxFQUdBRixFQUFBUSxFQUFBLEdBR0FSLEVBQUEsS0RnQk0sU0FBU0wsRUFBUUQsRUFBU00sR0V0RGhDLFlBRUFTLFFBQU9DLGVBQWVoQixFQUFTLGNBQzNCaUIsT0FBTyxHQUhYLElBQUFD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QUFZLFdBQ1JtQixRQUFRQyxJQUFJLHFCQUFzQnJMLEtBQUtpTCxlQUUzQ2QsYUFBYyxLQUdsQixPQUFPekksR2hCazVCVkssRUFBZXVJLFNBQVcsb0JnQnI2QjNCM0osT0FBT0MsZUFBZWhCLEVBQVMsY0FDM0JpQixPQUFPLElBRVhqQixFQUhnQm1DLGdCQUZoQixJQUFBWCxHQUFBbEIsRUFBQSxJQVNJNkksRUFBUS9HLEVBQXVCWiIsImZpbGUiOiJhbmd1bGFyLWpzb24tY2FsZW5kYXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJhbmd1bGFyLWpzb24tY2FsZW5kYXJcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYW5ndWxhci1qc29uLWNhbGVuZGFyXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImFuZ3VsYXItanNvbi1jYWxlbmRhclwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIFxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvblxuICoqLyIsIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiYW5ndWxhci1qc29uLWNhbGVuZGFyXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImFuZ3VsYXItanNvbi1jYWxlbmRhclwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJhbmd1bGFyLWpzb24tY2FsZW5kYXJcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NhbGVuZGFyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfY2FsZW5kYXIyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY2FsZW5kYXIzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfeWVhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0dmFyIF9tb250aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0dmFyIF93ZWVrID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHR2YXIgX2RheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gYW5ndWxhci5tb2R1bGUoJ2JjLkpzb25DYWxlbmRhcicsIFtdKS5wcm92aWRlcignYmNDYWxlbmRhckNvbmZpZycsIF9jYWxlbmRhci5iY0NhbGVuZGFyQ29uZmlnKS5zZXJ2aWNlKCdiY0NhbGVuZGFyU2VydmljZScsIF9jYWxlbmRhcjIuYmNDYWxlbmRhclNlcnZpY2UpLmRpcmVjdGl2ZSgnYmNDYWxlbmRhcicsIF9jYWxlbmRhcjMuYmNDYWxlbmRhckRpcmVjdGl2ZSkuZGlyZWN0aXZlKCdiY1llYXInLCBfeWVhci5iY1llYXJEaXJlY3RpdmUpLmRpcmVjdGl2ZSgnYmNNb250aCcsIF9tb250aC5iY01vbnRoRGlyZWN0aXZlKS5kaXJlY3RpdmUoJ2JjV2VlaycsIF93ZWVrLmJjV2Vla0RpcmVjdGl2ZSkuZGlyZWN0aXZlKCdiY0RheScsIF9kYXkuYmNEYXlEaXJlY3RpdmUpO1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5iY0NhbGVuZGFyQ29uZmlnID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfZGF5SW5uZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9kYXlJbm5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kYXlJbm5lcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBiY0NhbGVuZGFyQ29uZmlnID0gZXhwb3J0cy5iY0NhbGVuZGFyQ29uZmlnID0gZnVuY3Rpb24gKCkge1xuXHRcblx0ICAgIC8vIERlZmluZSBkZWZhdWx0c1xuXHQgICAgZnVuY3Rpb24gYmNDYWxlbmRhckNvbmZpZygpIHtcblx0ICAgICAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgICAgICAvLyBUaGUgY2FsZW5kYXIgd2lsbCBiZWdpbiB3aXRoIHRvZGF5XG5cdFxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBiY0NhbGVuZGFyQ29uZmlnKTtcblx0XG5cdCAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQobmV3IERhdGUoKSkuc3RhcnRPZignZGF5JykuZm9ybWF0KCk7XG5cdFxuXHQgICAgICAgIC8vIFRoZSBkZWZhdWx0IGludGVydmFsIHR5cGUgW2RheXx3ZWVrfG1vbnRoXVxuXHQgICAgICAgIHRoaXMubmVzdGluZ0RlcHRoID0gJ21vbnRoJztcblx0XG5cdCAgICAgICAgLy8gSG93IG1hbnkgZGF5cyBzaG91bGQgYmUgZ2VuZXJhdGVkXG5cdCAgICAgICAgdGhpcy5kYXlzID0gMzA7XG5cdFxuXHQgICAgICAgIC8vIERlZmluZSB0aGUgZGlmZmVyZW50IHBvc3NpYmxlIHJlcHJlc2VudGF0aW9ucyBvZiB0aGUgd2Vla2RheVxuXHQgICAgICAgIHRoaXMud2Vla2RheVN0eWxlID0ge1xuXHQgICAgICAgICAgICBsZXR0ZXI6IFsnUycsICdNJywgJ1QnLCAnVycsICdUJywgJ0YnLCAnUyddLFxuXHQgICAgICAgICAgICBhYmJyZXZpYXRpb246IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodXInLCAnRnJpJywgJ1NhdCddLFxuXHQgICAgICAgICAgICB3b3JkOiBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J11cblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICAvLyBTZXQgdGhlIGRlZmF1bHQgd29yZCB0eXBlIChNIHZzIE1vbiB2cyBNb25kYXkpXG5cdCAgICAgICAgdGhpcy5kYXlUaXRsZUZvcm1hdCA9ICdhYmJyZXZpYXRpb24nO1xuXHRcblx0ICAgICAgICAvLyBTaG91bGQgdGhlIGNhbGVuZGFyIHNob3cgdGhlIHdlZWtkYXkgbmFtZXMgYWJvdmUgZWFjaCBjb2x1bW4/XG5cdCAgICAgICAgdGhpcy5zaG93V2Vla2RheXMgPSB0cnVlO1xuXHRcblx0ICAgICAgICAvLyBEZWZpbmUgdGhlIGRlZmF1bHQgdGVtcGxhdGUgZm9yIGEgZGF5XG5cdCAgICAgICAgdGhpcy5kYXlUZW1wbGF0ZSA9IF9kYXlJbm5lcjIuZGVmYXVsdDtcblx0XG5cdCAgICAgICAgLy8gQWxsb3cgdGhlIHVzZXIgdG8gc2V0IGEgY3VzdG9tIHRlbXBsYXRlXG5cdCAgICAgICAgdGhpcy5zZXREYXlUZW1wbGF0ZSA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSkge1xuXHQgICAgICAgICAgICBfdGhpcy51c2VyRGF5VGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICAvLyBEZWZpbmUgdGhlIGRlZmF1bHQgZm9ybWF0IGZvciBhIGRheVxuXHQgICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9ICdEJztcblx0XG5cdCAgICAgICAgLy8gRGVmaW5lIHRoZSBkZWZhdWx0IGZvcm1hdCBmb3IgYSBtb250aCB0aXRsZVxuXHQgICAgICAgIHRoaXMubW9udGhUaXRsZUZvcm1hdCA9ICdNTU1NJztcblx0XG5cdCAgICAgICAgLy8gU2hvdWxkIG1vbnRoIHRpdGxlcyBiZSBzaG93biBieSBkZWZhdWx0P1xuXHQgICAgICAgIHRoaXMuc2hvd01vbnRoVGl0bGVzID0gdHJ1ZTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoYmNDYWxlbmRhckNvbmZpZywgW3tcblx0ICAgICAgICBrZXk6ICckZ2V0Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gJGdldCgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBiY0NhbGVuZGFyQ29uZmlnO1xuXHR9KCk7XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgcGF0aCA9ICcvVXNlcnMvYmMvQ29kZS9vcGVuLXNvdXJjZS9hbmd1bGFyLWpzb24tY2FsZW5kYXIvc3JjL3RlbXBsYXRlcy9kYXkuaW5uZXIuaHRtbCc7XG5cdHZhciBodG1sID0gXCI8dGltZSBkYXRldGltZT1cXFwie3sgZGF5LmRhdGUgfCBkYXRlOid5eXl5LU1NLWRkJyB9fVxcXCIgY2xhc3M9YmMtY2FsZW5kYXJfX2RheS10aW1lIHRpdGxlPVxcXCJ7eyBkYXkuZGF0ZSB9fVxcXCIgZGF0YS1uZy1pZj1kYXkuZGF0ZT4gPHNwYW4gZGF0YS1uZy1iaW5kPVxcXCJ2bS5mb3JtYXREYXRlKGRheS5kYXRlLCB2bS5kYXRlRm9ybWF0KVxcXCI+PC9zcGFuPiA8L3RpbWU+XCI7XG5cdHdpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xuXHRtb2R1bGUuZXhwb3J0cyA9IHBhdGg7XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgYmNDYWxlbmRhclNlcnZpY2UgPSBleHBvcnRzLmJjQ2FsZW5kYXJTZXJ2aWNlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gYmNDYWxlbmRhclNlcnZpY2UoKSB7XG5cdCAgICAgICAgJ25nSW5qZWN0Jztcblx0XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIGJjQ2FsZW5kYXJTZXJ2aWNlKTtcblx0XG5cdCAgICAgICAgdGhpcy5XRUVLX0xFTkdUSCA9IDc7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDaGVjayB0byBzZWUgaWYgdGhlIGRheSBpcyBwcmlvciB0byB0aGUgY3VycmVudCBkYXRlXG5cdCAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZGlzYWJsZSB0aGUgdW5zZWxlY3RhYmxlIGRheXNcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVxuXHQgICAgICogQHJldHVybiB7Qm9vbH0gaXNCZWZvcmVcblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoYmNDYWxlbmRhclNlcnZpY2UsIFt7XG5cdCAgICAgICAga2V5OiAnZGF0ZUlzQmVmb3JlVG9kYXknLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkYXRlSXNCZWZvcmVUb2RheShkYXRlKSB7XG5cdCAgICAgICAgICAgIHZhciB0b2RheSA9IG1vbWVudChuZXcgRGF0ZSgpKS5zdGFydE9mKCdkYXknKS5mb3JtYXQoKTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuaXNCZWZvcmUodG9kYXkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBkYXkgbWF0Y2hlcyB0aGUgY3VycmVudCBkYXRlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVxuXHQgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlMlxuXHQgICAgICAgICAqIEByZXR1cm4ge0Jvb2x9IGlzVG9kYXlcblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnaXNEYXlUb2RheScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRGF5VG9kYXkoZGF0ZSkge1xuXHQgICAgICAgICAgICB2YXIgZGF0ZTIgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBtb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KCkgOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmlzU2FtZShkYXRlMik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBUdXJuIGEgaW50ZWdlciAoZS5nLiAnNicpIGludG8gYW4gYXJyYXk6ICdbMSwyLDMsNCw1LDZdJ1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtJbnRlZ2VyfSBjb3VudFxuXHQgICAgICAgICAqIEByZXR1cm4ge0FycmF5fSBkYXlzXG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2ludGVnZXJUb0FycmF5Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW50ZWdlclRvQXJyYXkoY291bnQpIHtcblx0ICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG5cdCAgICAgICAgICAgIHZhciBkYXlzID0gW107XG5cdFxuXHQgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQ7IGkgKz0gMSkge1xuXHQgICAgICAgICAgICAgICAgZGF5cy5wdXNoKGkpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gZGF5cztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIFBhZCB0aGUgYmVnaW5uaW5nIG9mIGEgd2Vla1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXJ0RGF0ZSAtIGRhdGUgdG8gdG8gd29yayBiYWNrIGZyb21cblx0ICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBjb3VudCAtIGhvdyBtYW55IGRheXMgdG8gcGFkXG5cdCAgICAgICAgICogQHJldHVybiB7QXJyYXl9IHBhZFxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdwYWREYXlzTGVmdCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBhZERheXNMZWZ0KHN0YXJ0RGF0ZSwgY291bnQpIHtcblx0ICAgICAgICAgICAgdmFyIHBhZCA9IFtdO1xuXHQgICAgICAgICAgICB2YXIgbWlzc2luZ0RheXMgPSB0aGlzLmludGVnZXJUb0FycmF5KGNvdW50KTtcblx0XG5cdCAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBtaXNzaW5nIGRheXNcblx0ICAgICAgICAgICAgZm9yICh2YXIgZGF5IGluIG1pc3NpbmdEYXlzKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBIb3cgbWFueSBkYXlzIHRvIGdvIGJhY2tcblx0ICAgICAgICAgICAgICAgIHZhciBzdWJ0cmFjdGlvbiA9IHBhcnNlSW50KGRheSwgMTApICsgMTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBGaW5kIHRoYXQgZGF5XG5cdCAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXMgPSBtb21lbnQoc3RhcnREYXRlKS5zdWJ0cmFjdChzdWJ0cmFjdGlvbiwgJ2RheXMnKS50b0lTT1N0cmluZygpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEFkZCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuXHQgICAgICAgICAgICAgICAgcGFkLnVuc2hpZnQoe1xuXHQgICAgICAgICAgICAgICAgICAgIGRhdGU6IHByZXZpb3VzXG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHBhZDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIFBhZCBhIGNvbGxlY3Rpb24gd2l0aCBibGFuayB0aWxlc1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtBcnJheX0gY29sbGVjdGlvblxuXHQgICAgICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gY291bnRcblx0ICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX0gcGFkZGVkQ29sbGVjdGlvblxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdwYWRCbGFua1RpbGVzJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGFkQmxhbmtUaWxlcyhjb2xsZWN0aW9uLCBjb3VudCkge1xuXHQgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gJ2xlZnQnIDogYXJndW1lbnRzWzJdO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG5cdCAgICAgICAgICAgIHZhciBkYXlzID0gW107XG5cdFxuXHQgICAgICAgICAgICAvLyBDcmVhdGUgYXJyYXlcblx0ICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyBpICs9IDEpIHtcblx0ICAgICAgICAgICAgICAgIGRheXMucHVzaCh7XG5cdCAgICAgICAgICAgICAgICAgICAgZGF0ZTogbnVsbFxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIC8vIElmIGRpcmVjdGlvbiBpcyAncmlnaHQnXG5cdCAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcblx0ICAgICAgICAgICAgICAgIC8vIHBhZCB0aGUgZW5kXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5jb25jYXQoZGF5cyk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcblx0ICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBwYWQgdGhlIGJlZ2lubmluZ1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGRheXMuY29uY2F0KGNvbGxlY3Rpb24pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBTcGxpdCBhbiBhcnJheSBpbnRvIGNodW5rcyBhbmQgcmV0dXJuIGFuIGFycmF5IG9mIHRoZXNlIGNodW5rc1xuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZ3JvdXBcblx0ICAgICAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IGdyb3Vwc2l6ZSAtIENodW5rIHNpemUuIERlZmF1bHRzIHRvIDcgKG9uZSB3ZWVrKS5cblx0ICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX0gY2h1bmtzXG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2NodW5rJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2h1bmsoZ3JvdXApIHtcblx0ICAgICAgICAgICAgdmFyIGdyb3Vwc2l6ZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHRoaXMuV0VFS19MRU5HVEggOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgICAgICAgICAgICB2YXIgc2V0cyA9IFtdO1xuXHQgICAgICAgICAgICB2YXIgaSA9IDA7XG5cdCAgICAgICAgICAgIHZhciBjaHVua3MgPSBncm91cC5sZW5ndGggLyBwYXJzZUludChncm91cHNpemUsIDEwKTtcblx0XG5cdCAgICAgICAgICAgIHdoaWxlIChpIDwgY2h1bmtzKSB7XG5cdCAgICAgICAgICAgICAgICBzZXRzW2ldID0gZ3JvdXAuc3BsaWNlKDAsIGdyb3Vwc2l6ZSk7XG5cdCAgICAgICAgICAgICAgICBpID0gaSArIDE7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBzZXRzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogR2V0IHRoZSBkdXJhdGlvbiBpbiBkYXlzIGJldHdlZW4gdHdvIGRhdGVzIElOQ0xVRElORyBib3RoIGRhdGVzXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RhcnRcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZW5kXG5cdCAgICAgICAgICogQHJldHVybiB7SW50ZWdlcn0gZGF5c1xuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdkdXJhdGlvbkluRGF5cycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGR1cmF0aW9uSW5EYXlzKHN0YXJ0LCBlbmQpIHtcblx0ICAgICAgICAgICAgdmFyIG5ld1N0YXJ0ID0gbW9tZW50KHN0YXJ0KS5zdGFydE9mKCdkYXknKTtcblx0ICAgICAgICAgICAgLy8gQWRkIGEgZGF5IHNvIHRoZSBlbmQgZGF0ZSBpcyBpbmNsdWRlZCBpbiB0aGUgY2FsY3VsYXRpb25cblx0ICAgICAgICAgICAgdmFyIG5ld0VuZCA9IG1vbWVudChlbmQpLnN0YXJ0T2YoJ2RheScpLmFkZCgxLCAnZGF5cycpO1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIG5ld0VuZC5kaWZmKG5ld1N0YXJ0LCAnZGF5cycpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogT3JnYW5pemUgYSBjb2xsZWN0aW9uIG9mIGRheXMgaW50byBzdWIgY29sbGVjdGlvbnMgb2Ygd2Vla3Ncblx0ICAgICAgICAgKlxuXHQgICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGRheXMgLSBhcnJheSBvZiBkYXlzXG5cdCAgICAgICAgICogQHJldHVybiB7QXJyYXl9IGNvbGxlY3Rpb25cblx0ICAgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnb3JnYW5pemVXZWVrcycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9yZ2FuaXplV2Vla3MoZGF5cykge1xuXHQgICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGRheSBvZiB0aGUgd2VlayB0aGF0IHRoZSBjYWxlbmRhciBzdGFydHMgYW5kIGVuZHMgb25cblx0ICAgICAgICAgICAgdmFyIGZpcnN0RGF5ID0gbW9tZW50KGRheXNbMF0uZGF0ZSkuZGF5KCk7XG5cdCAgICAgICAgICAgIHZhciBsYXN0RGF5ID0gbW9tZW50KGRheXNbZGF5cy5sZW5ndGggLSAxXS5kYXRlKS5kYXkoKTtcblx0ICAgICAgICAgICAgdmFyIFNBVFVSREFZID0gNjtcblx0ICAgICAgICAgICAgdmFyIFNVTkRBWSA9IDA7XG5cdFxuXHQgICAgICAgICAgICAvLyBJZiB0aGUgZmlyc3QgZGF5IGlzIGFmdGVyIFN1bmRheVxuXHQgICAgICAgICAgICBpZiAoZmlyc3REYXkgPiBTVU5EQVkpIHtcblx0ICAgICAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoZSBmaXJzdCBkYXkgaXMgbGluZWQgdXAgaW4gdGhlIGNvcnJlY3Qgd2Vla2RheSBjb2x1bW5cblx0ICAgICAgICAgICAgICAgIGRheXMgPSB0aGlzLnBhZEJsYW5rVGlsZXMoZGF5cywgZmlyc3REYXksICdsZWZ0Jyk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIC8vIElmIHRoZSBsYXN0IGRheSBpcyBiZWZvcmUgU2F0dXJkYXlcblx0ICAgICAgICAgICAgaWYgKGxhc3REYXkgPCBTQVRVUkRBWSkge1xuXHQgICAgICAgICAgICAgICAgLy8gUGFkIHdpdGggYmxhbmsgdGlsZXMgc28gdGhhdCB0aGUgbGFzdCB3ZWVrJ3MgZGF5cyBhcmUgaW4gdGhlIGNvcnJlY3Qgd2Vla2RheSBjb2x1bW5cblx0ICAgICAgICAgICAgICAgIGRheXMgPSB0aGlzLnBhZEJsYW5rVGlsZXMoZGF5cywgdGhpcy5XRUVLX0xFTkdUSCAtIChsYXN0RGF5ICsgMSksICdyaWdodCcpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5jaHVuayhkYXlzKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIE9yZ2FuaXplIGJ5IG1vbnRoXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhbGxEYXlzIC0gQW4gYXJyYXkgb2YgYWxsIGRheXNcblx0ICAgICAgICAgKiBAcmV0dXJuIHtBcnJheX0gY29sbGVjdGlvbiAtIGRheXMgb3JnYW5pemVkIGludG8gd2Vla3MgYW5kIG1vbnRoc1xuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdvcmdhbml6ZU1vbnRocycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9yZ2FuaXplTW9udGhzKGFsbERheXMpIHtcblx0ICAgICAgICAgICAgdmFyIGNhbGVuZGFyID0gW107XG5cdCAgICAgICAgICAgIHZhciBTQVRVUkRBWSA9IDY7XG5cdCAgICAgICAgICAgIHZhciBTVU5EQVkgPSAwO1xuXHQgICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IGFsbERheXM7XG5cdCAgICAgICAgICAgIHZhciBtb250aCA9IHZvaWQgMDtcblx0ICAgICAgICAgICAgdmFyIGRheU9mTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXRlKCk7XG5cdCAgICAgICAgICAgIHZhciBkYXlzSW5Nb250aCA9IG1vbWVudChjb2xsZWN0aW9uWzBdLmRhdGUpLmRheXNJbk1vbnRoKCk7XG5cdFxuXHQgICAgICAgICAgICAvLyBQYWQgdGhlIGJlZ2lubmluZyBvZiB0aGUgbW9udGggd2l0aCBhbnkgbWlzc2luZyBkYXlzXG5cdCAgICAgICAgICAgIC8vIElmIHRoZSBmaXJzdCBkYXkgaXMgbm90IHRoZSBmaXJzdCBkYXkgb2YgdGhlIG1vbnRoXG5cdCAgICAgICAgICAgIGlmIChtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXRlKCkgPiAwKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBQdWxsIHRoaXMgbW9udGgncyBkYXlzIGZyb20gdGhlIGNvbGxlY3Rpb25cblx0ICAgICAgICAgICAgICAgIG1vbnRoID0gY29sbGVjdGlvbi5zbGljZSgwLCBkYXlzSW5Nb250aCAtIChkYXlPZk1vbnRoIC0gMSkpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEZpbGwgdGhlIG1pc3NpbmcgZGF5cyBmcm9tIHRoZSBtb250aFxuXHQgICAgICAgICAgICAgICAgdmFyIHBhZCA9IHRoaXMucGFkRGF5c0xlZnQobW9udGhbMF0uZGF0ZSwgZGF5T2ZNb250aCAtIDEpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIENvbWJpbmUgd2l0aCB0aGUgZXhpc3RpbmcgYXJyYXlcblx0ICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBwYWQuY29uY2F0KGNvbGxlY3Rpb24pO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAvLyBTcGxpdCBpbnRvIG1vbnRoc1xuXHQgICAgICAgICAgICAvLyBBcyBsb25nIGFzIHRoZXJlIGFyZSBkYXlzIGxlZnQgaW4gdGhlIGNvbGxlY3Rpb25cblx0ICAgICAgICAgICAgd2hpbGUgKGNvbGxlY3Rpb24ubGVuZ3RoID4gMCkge1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgZGF5IG9mIHRoZSBtb250aCBmb3IgdGhlIGZpcnN0IGRhdGUgb2YgdGhlIGNvbGxlY3Rpb24gZWcuICcyNCdcblx0ICAgICAgICAgICAgICAgIGRheU9mTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXRlKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGhvdyBtYW55IGRheXMgdGhlcmUgYXJlIHRoaXMgbW9udGggKHRvdGFsKVxuXHQgICAgICAgICAgICAgICAgZGF5c0luTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXlzSW5Nb250aCgpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIFB1bGwgdGhpcyBtb250aCdzIGRheXMgZnJvbSB0aGUgY29sbGVjdGlvblxuXHQgICAgICAgICAgICAgICAgbW9udGggPSBjb2xsZWN0aW9uLnNwbGljZSgwLCBkYXlzSW5Nb250aCAtIChkYXlPZk1vbnRoIC0gMSkpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IHdlZWtkYXlzIGFyZSBwcmlvciB0byB0aGUgZmlyc3QgZGF5IG9mIHRoaXMgbW9udGg/XG5cdCAgICAgICAgICAgICAgICB2YXIgZmlyc3REYXkgPSBtb21lbnQobW9udGhbMF0uZGF0ZSkuZGF5KCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGZpcnN0IGRheSBpcyBhZnRlciBTdW5kYXlcblx0ICAgICAgICAgICAgICAgIGlmIChmaXJzdERheSA+IFNVTkRBWSkge1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoYXQgdGhlIGZpcnN0IGRheSBpcyBsaW5lZCB1cCBpbiB0aGUgY29ycmVjdCBjb2x1bW5cblx0ICAgICAgICAgICAgICAgICAgICBtb250aCA9IHRoaXMucGFkQmxhbmtUaWxlcyhtb250aCwgZmlyc3REYXksICdsZWZ0Jyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gSG93IG1hbnkgd2Vla2RheXMgYXJlIGFmdGVyIHRoZSBsYXN0IGRheSBvZiB0aGUgbW9udGg/XG5cdCAgICAgICAgICAgICAgICAvLyAocmVtZW1iZXI6IHdlZWtzIGFyZSB6ZXJvLWJhc2VkKVxuXHQgICAgICAgICAgICAgICAgdmFyIGxhc3REYXkgPSBtb21lbnQobW9udGhbbW9udGgubGVuZ3RoIC0gMV0uZGF0ZSkuZGF5KCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gSWYgYmxhbmsgdGlsZXMgYXJlIG5lZWRlZCBmb3IgdGhlIGxhc3Qgd2Vla1xuXHQgICAgICAgICAgICAgICAgaWYgKGxhc3REYXkgPCBTQVRVUkRBWSkge1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoYXQgdGhlIGZpcnN0IGRheSBpcyBsaW5lZCB1cCBpbiB0aGUgY29ycmVjdCBjb2x1bW5cblx0ICAgICAgICAgICAgICAgICAgICBtb250aCA9IHRoaXMucGFkQmxhbmtUaWxlcyhtb250aCwgdGhpcy5XRUVLX0xFTkdUSCAtIChsYXN0RGF5ICsgMSksICdyaWdodCcpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIC8vIE9yZ2FuaXplIGludG8gd2Vla3MgYW5kIGFkZCB0byB0aGUgY2FsZW5kYXIgYXJyYXlcblx0ICAgICAgICAgICAgICAgIGNhbGVuZGFyLnB1c2godGhpcy5jaHVuayhtb250aCkpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gY2FsZW5kYXI7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBCdWlsZCBhbiBhcnJheSBvZiBkYXlzXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IGxpbWl0IC0gaG93IG1hbnkgZGF5cyB0byBjcmVhdGVcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RhcnQgLSB0aGUgc3RhcnRpbmcgZGF0ZVxuXHQgICAgICAgICAqIEByZXR1cm4ge0FycmF5fSBkYXlzXG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2J1aWxkRGF5cycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkRGF5cyhsaW1pdCkge1xuXHQgICAgICAgICAgICB2YXIgc3RhcnQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBuZXcgRGF0ZSgpIDogYXJndW1lbnRzWzFdO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSAwO1xuXHQgICAgICAgICAgICB2YXIgZGF5cyA9IFtdO1xuXHQgICAgICAgICAgICB2YXIgZGF5ID0gdm9pZCAwO1xuXHRcblx0ICAgICAgICAgICAgd2hpbGUgKGNvdW50ZXIgPCBsaW1pdCkge1xuXHQgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBkYXlcblx0ICAgICAgICAgICAgICAgIGRheSA9IG1vbWVudChzdGFydCkuYWRkKGNvdW50ZXIsICdkYXlzJykudG9JU09TdHJpbmcoKTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBBZGQgdG8gdGhlIGFycmF5XG5cdCAgICAgICAgICAgICAgICBkYXlzLnB1c2goe1xuXHQgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRheVxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gSW5jcmVtZW50IHRoZSBjb3VudGVyXG5cdCAgICAgICAgICAgICAgICBjb3VudGVyID0gY291bnRlciArIDE7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBkYXlzO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gYmNDYWxlbmRhclNlcnZpY2U7XG5cdH0oKTtcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuYmNDYWxlbmRhckRpcmVjdGl2ZSA9IGJjQ2FsZW5kYXJEaXJlY3RpdmU7XG5cdFxuXHR2YXIgX2NhbGVuZGFyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfY2FsZW5kYXIyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfY2FsZW5kYXIzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2FsZW5kYXIyKTtcblx0XG5cdHZhciBfeWVhciA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX3llYXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfeWVhcik7XG5cdFxuXHR2YXIgX21vbnRoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfbW9udGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW9udGgpO1xuXHRcblx0dmFyIF93ZWVrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBfd2VlazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93ZWVrKTtcblx0XG5cdHZhciBfZGF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHR2YXIgX2RheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kYXkpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIGJjQ2FsZW5kYXJEaXJlY3RpdmUoKSB7XG5cdCAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgIC8vIERlZmluZSBwb3NzaWJsZSB0ZW1wbGF0ZXNcblx0XG5cdCAgICB2YXIgdGVtcGxhdGVzID0ge1xuXHQgICAgICAgIHllYXI6IF95ZWFyMi5kZWZhdWx0LFxuXHQgICAgICAgIG1vbnRoOiBfbW9udGgyLmRlZmF1bHQsXG5cdCAgICAgICAgd2VlazogX3dlZWsyLmRlZmF1bHQsXG5cdCAgICAgICAgZGF5OiBfZGF5Mi5kZWZhdWx0XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBkaXJlY3RpdmUgPSB7XG5cdCAgICAgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgICAgICByZXBsYWNlOiB0cnVlLFxuXHQgICAgICAgIHNjb3BlOiB7fSxcblx0ICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG5cdCAgICAgICAgICAgIGJjU3RhcnREYXRlOiAnQD8nLCAvLyBkYXRlIC0gZGVmYXVsdCB0byB0b2RheVxuXHQgICAgICAgICAgICBiY0VuZERhdGU6ICdAPycsIC8vIGRhdGUgLSBpZiBub3QgcHJlc2VudCwgdXNlIGNyZWF0ZSB1c2luZyBiY0RheXNcblx0ICAgICAgICAgICAgYmNOZXN0aW5nRGVwdGg6ICdAPycsIC8vIHN0cmluZyBbbW9udGh8d2Vla3xkYXldIC0gZGVmYXVsdHM6IG1vbnRoXG5cdCAgICAgICAgICAgIGJjRGF5czogJ0A/JywgLy8gaW50ZWdlciAtIGRlZmF1bHQgdG8gMzAgKHVzZWQgdG8gY3JlYXRlIGJjRW5kRGF0ZSlcblx0ICAgICAgICAgICAgYmNEYXlUaXRsZUZvcm1hdDogJ0A/JywgLy8gc3RyaW5nIFt3b3JkfGFiYnJldmlhdGlvbnxsZXR0ZXJdIC0gZGVmYXVsdDogYWJicmV2aWF0aW9uXG5cdCAgICAgICAgICAgIGJjTW9udGhUaXRsZUZvcm1hdDogJ0A/JywgLy8gc3RyaW5nIC0gYW55IHZhbGlkIE1vbWVudCBkYXRlIGZvcm1hdCAtIGRlZmF1bHQ6IE1NTU1cblx0ICAgICAgICAgICAgYmNEYXRlU2VsZWN0ZWQ6ICcmJywgLy8gZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRhdGUgaXMgc2VsZWN0ZWQgKHRhcC9jbGljaylcblx0ICAgICAgICAgICAgYmNTaG93V2Vla2RheXM6ICc9PycsIC8vIGRldGVybWluZSBpZiB0aGUgd2Vla2RheXMgaGVhZGVyIHNob3VsZCBiZSBjcmVhdGVkXG5cdCAgICAgICAgICAgIGJjU2hvd01vbnRoVGl0bGVzOiAnPT8nLCAvLyBkZXRlcm1pbmUgaWYgdGhlIG1vbnRoIHRpdGxlcyBzaG91bGQgYmUgdmlzaWJsZVxuXHQgICAgICAgICAgICBiY0RheVRlbXBsYXRlOiAnQD8nLCAvLyBvdmVyd3JpdGUgdGhlIGRlZmF1bHQgJ2RheScgdGVtcGxhdGVcblx0ICAgICAgICAgICAgYmNEYXRlRm9ybWF0OiAnQD8nIH0sXG5cdCAgICAgICAgbGluazogbGlua0Z1bmN0aW9uLFxuXHQgICAgICAgIHRlbXBsYXRlVXJsOiBfY2FsZW5kYXIzLmRlZmF1bHQsXG5cdCAgICAgICAgY29udHJvbGxlcjogX2NhbGVuZGFyLkNhbGVuZGFyQ29udHJvbGxlcixcblx0ICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIExpbmtcblx0ICAgICAqL1xuXHQgICAgZnVuY3Rpb24gbGlua0Z1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgdm0pIHtcblx0XG5cdCAgICAgICAgLy8gU2V0IHRoZSBjb3JyZWN0IHRlbXBsYXRlIGJhc2VkIG9uIHRoZSBkZXNpcmVkIG5lc3RpbmcgZGVwdGhcblx0ICAgICAgICB2bS5nZXRUZW1wbGF0ZVVybCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlc1t2bS5uZXN0aW5nRGVwdGhdO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBDYWxlbmRhckNvbnRyb2xsZXIgPSBleHBvcnRzLkNhbGVuZGFyQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIENhbGVuZGFyQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHRlbXBsYXRlQ2FjaGVcIiwgXCJiY0NhbGVuZGFyQ29uZmlnXCIsIFwiYmNDYWxlbmRhclNlcnZpY2VcIl07XG5cdCAgICBmdW5jdGlvbiBDYWxlbmRhckNvbnRyb2xsZXIoJHRlbXBsYXRlQ2FjaGUsIGJjQ2FsZW5kYXJDb25maWcsIGJjQ2FsZW5kYXJTZXJ2aWNlKSB7XG5cdCAgICAgICAgJ25nSW5qZWN0Jztcblx0XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhbGVuZGFyQ29udHJvbGxlcik7XG5cdFxuXHQgICAgICAgIHRoaXMuJHRlbXBsYXRlQ2FjaGUgPSAkdGVtcGxhdGVDYWNoZTtcblx0ICAgICAgICB0aGlzLmJjQ2FsZW5kYXJDb25maWcgPSBiY0NhbGVuZGFyQ29uZmlnO1xuXHQgICAgICAgIHRoaXMuYmNDYWxlbmRhclNlcnZpY2UgPSBiY0NhbGVuZGFyU2VydmljZTtcblx0XG5cdCAgICAgICAgdGhpcy5fYWN0aXZhdGUoKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoQ2FsZW5kYXJDb250cm9sbGVyLCBbe1xuXHQgICAgICAgIGtleTogJ19hY3RpdmF0ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hY3RpdmF0ZSgpIHtcblx0ICAgICAgICAgICAgLy8gRGVmaW5lIHRvZGF5J3MgZGF0ZVxuXHQgICAgICAgICAgICB0aGlzLnRvZGF5ID0gbW9tZW50KG5ldyBEYXRlKCkpLnN0YXJ0T2YoJ2RheScpO1xuXHRcblx0ICAgICAgICAgICAgLy8gRGVmaW5lIHRoZSBzdGFydCBkYXRlIGZvciB0aGUgY2FsZW5kYXJcblx0ICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSB0aGlzLmJjU3RhcnREYXRlIHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5zdGFydERhdGU7XG5cdFxuXHQgICAgICAgICAgICAvLyBJZiB0aGUgZW5kIGRhdGUgd2FzIGRlZmluZWRcblx0ICAgICAgICAgICAgaWYgKHRoaXMuYmNFbmREYXRlKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gRGVmaW5lIGhvdyBtYW55IGRheXMgYXJlIG5lZWRlZCB1c2luZyB0aGUgZW5kIGRhdGVcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGF5cyA9IHRoaXMuYmNDYWxlbmRhclNlcnZpY2UuZHVyYXRpb25JbkRheXModGhpcy5zdGFydERhdGUsIHRoaXMuYmNFbmREYXRlKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBEZWZpbmUgaG93IG1hbnkgZGF5cyBhcmUgbmVlZGVkIGZyb20gdGhlIGNvdW50IHBhc3NlZCBpbiBvciB0aGUgY29uZmlnXG5cdCAgICAgICAgICAgICAgICB0aGlzLmRheXMgPSBwYXJzZUludCh0aGlzLmJjRGF5cyB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcuZGF5cywgMTApO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAvLyBEZWZpbmUgaG93IGRlZXAgdG8gb3JnYW5pemUgdGhlIGNhbGVuZGFyXG5cdCAgICAgICAgICAgIHRoaXMubmVzdGluZ0RlcHRoID0gdGhpcy5iY05lc3RpbmdEZXB0aCB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcubmVzdGluZ0RlcHRoO1xuXHRcblx0ICAgICAgICAgICAgLy8gRGVmaW5lIHRoZSB3ZWVrZGF5IGhlYWRlcnMgZm9ybWF0XG5cdCAgICAgICAgICAgIHRoaXMud2Vla2RheXMgPSB0aGlzLmJjRGF5VGl0bGVGb3JtYXQgPyB0aGlzLmJjQ2FsZW5kYXJDb25maWcud2Vla2RheVN0eWxlW3RoaXMuYmNEYXlUaXRsZUZvcm1hdF0gOiB0aGlzLmJjQ2FsZW5kYXJDb25maWcud2Vla2RheVN0eWxlW3RoaXMuYmNDYWxlbmRhckNvbmZpZy5kYXlUaXRsZUZvcm1hdF07XG5cdFxuXHQgICAgICAgICAgICAvLyBEZWZpbmUgdGhlIGZvcm1hdCBmb3IgdGhlIG1vbnRoIHRpdGxlXG5cdCAgICAgICAgICAgIHRoaXMubW9udGhUaXRsZUZvcm1hdCA9IHRoaXMuYmNNb250aFRpdGxlRm9ybWF0IHx8IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5tb250aFRpdGxlRm9ybWF0O1xuXHRcblx0ICAgICAgICAgICAgLy8gRGVmaW5lIGlmIG1vbnRoIHRpdGxlcyBzaG91bGQgYmUgdmlzaWJsZVxuXHQgICAgICAgICAgICB0aGlzLnNob3dNb250aFRpdGxlcyA9IHR5cGVvZiB0aGlzLmJjU2hvd01vbnRoVGl0bGVzID09PSAnYm9vbGVhbicgPyB0aGlzLmJjU2hvd01vbnRoVGl0bGVzIDogdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnNob3dNb250aFRpdGxlcztcblx0XG5cdCAgICAgICAgICAgIC8vIEluaXRpYWxseSBubyBkYXRlIGlzIHNlbGVjdGVkXG5cdCAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gbnVsbDtcblx0XG5cdCAgICAgICAgICAgIC8vIFNldCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgY2FsZW5kYXIgd2Vla2RheXMgaGVhZGVyc1xuXHQgICAgICAgICAgICB0aGlzLnNob3dXZWVrZGF5cyA9IHR5cGVvZiB0aGlzLmJjU2hvd1dlZWtkYXlzID09PSAnYm9vbGVhbicgPyB0aGlzLmJjU2hvd1dlZWtkYXlzIDogdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnNob3dXZWVrZGF5cztcblx0XG5cdCAgICAgICAgICAgIC8vIERlZmluZSB0aGUgdGVtcGxhdGUgZm9yIGFuIGluZGl2aWR1YWwgZGF5XG5cdCAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGRlZmluZWQgYSB0ZW1wbGF0ZSBvbiB0aGUgZGlyZWN0aXZlXG5cdCAgICAgICAgICAgIGlmICh0aGlzLmJjRGF5VGVtcGxhdGUpIHtcblx0ICAgICAgICAgICAgICAgIC8vIE5hbWUgdGhlIHRlbXBsYXRlIGxvY2F0aW9uXG5cdCAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVMb2NhdGlvbiA9ICd1c2VyRGF5VGVtcGxhdGUuaHRtbCc7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gUHV0IHRoZSB1c2VyIHRlbXBsYXRlIGludG8gdGhlIGNhY2hlXG5cdCAgICAgICAgICAgICAgICB0aGlzLiR0ZW1wbGF0ZUNhY2hlLnB1dCh0ZW1wbGF0ZUxvY2F0aW9uLCB0aGlzLmJjRGF5VGVtcGxhdGUpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEV4cG9zZSB0aGUgbG9jYXRpb24gdG8gdGhlIGRpcmVjdGl2ZVxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXlUZW1wbGF0ZSA9IHRlbXBsYXRlTG9jYXRpb247XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5iY0NhbGVuZGFyQ29uZmlnLnVzZXJEYXlUZW1wbGF0ZSkge1xuXHQgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgZGVmaW5lZCBhIHRlbXBsYXRlIGluIHRoZSBwcm92aWRlclxuXHRcblx0ICAgICAgICAgICAgICAgIC8vIE5hbWUgdGhlIHRlbXBsYXRlIGxvY2F0aW9uXG5cdCAgICAgICAgICAgICAgICB2YXIgX3RlbXBsYXRlTG9jYXRpb24gPSAndXNlckRheVRlbXBsYXRlLmh0bWwnO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIFB1dCB0aGUgdXNlciB0ZW1wbGF0ZSBpbnRvIHRoZSBjYWNoZVxuXHQgICAgICAgICAgICAgICAgdGhpcy4kdGVtcGxhdGVDYWNoZS5wdXQoX3RlbXBsYXRlTG9jYXRpb24sIHRoaXMuYmNDYWxlbmRhckNvbmZpZy51c2VyRGF5VGVtcGxhdGUpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEV4cG9zZSB0aGUgbG9jYXRpb24gdG8gdGhlIGRpcmVjdGl2ZVxuXHQgICAgICAgICAgICAgICAgdGhpcy5kYXlUZW1wbGF0ZSA9IF90ZW1wbGF0ZUxvY2F0aW9uO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgLy8gbm8gdGVtcGxhdGUgZnJvbSB0aGUgdXNlclxuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEV4cG9zZSB0aGUgZGVmYXVsdCB0ZW1wbGF0ZSBsb2NhdGlvbiB0byB0aGUgZGlyZWN0aXZlXG5cdCAgICAgICAgICAgICAgICB0aGlzLmRheVRlbXBsYXRlID0gdGhpcy5iY0NhbGVuZGFyQ29uZmlnLmRheVRlbXBsYXRlO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAvLyBEZWZpbmUgdGhlIGRhdGUgZm9ybWF0IGZvciB0aGUgaW5kaXZpZHVhbCBkYXlcblx0ICAgICAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gdGhpcy5iY0RhdGVGb3JtYXQgfHwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLmRhdGVGb3JtYXQ7XG5cdFxuXHQgICAgICAgICAgICAvLyBCdWlsZCBhcnJheSBvZiBkYXlzXG5cdCAgICAgICAgICAgIHZhciBkYXlzID0gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5idWlsZERheXModGhpcy5kYXlzLCB0aGlzLnN0YXJ0RGF0ZSk7XG5cdFxuXHQgICAgICAgICAgICAvLyBCdWlsZCB0aGUgY2FsZW5kYXIgSlNPTiBhbmQgZXhwb3NlIHRvIHRoZSBET01cblx0ICAgICAgICAgICAgdGhpcy5fYnVpbGRDYWxlbmRhcihkYXlzLCB0aGlzLm5lc3RpbmdEZXB0aCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDaGVjayB0byBzZWUgaWYgdGhlIGRheSBpcyBwcmlvciB0byB0aGUgY3VycmVudCBkYXRlXG5cdCAgICAgICAgICogVGhpcyBpcyB1c2VkIHRvIGRpc2FibGUgdGhlIHVuc2VsZWN0YWJsZSBkYXlzXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge0RhdGV9IGRhdGVcblx0ICAgICAgICAgKiBAcmV0dXJuIHtCb29sfVxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdpc0JlZm9yZVRvZGF5Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNCZWZvcmVUb2RheShkYXRlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLmRhdGVJc0JlZm9yZVRvZGF5KGRhdGUpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBkYXkgbWF0Y2hlcyB0aGUgY3VycmVudCBkYXRlXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge0RhdGV9IGRhdGVcblx0ICAgICAgICAgKiBAcmV0dXJuIHtCb29sfVxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdpc0RheVRvZGF5Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNEYXlUb2RheShkYXRlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLmlzRGF5VG9kYXkoZGF0ZSwgdGhpcy5zdGFydERhdGUpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogU2VsZWN0IGEgZGF0ZVxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRheVxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdzZWxlY3REYXRlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0RGF0ZShkYXkpIHtcblx0ICAgICAgICAgICAgLy8gU2V0IHRoZSBzZWxlY3RlZCBkYXlcblx0ICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSBkYXk7XG5cdFxuXHQgICAgICAgICAgICAvLyBPbmx5IGNhbGwgdGhlIHBhc3NlZCBtZXRob2QgaWYgaXQgZXhpc3RzIGFuZCBhIHZhbGlkIGRhdGUgd2FzIGNob3NlblxuXHQgICAgICAgICAgICBpZiAoZGF5LmRhdGUgJiYgdGhpcy5iY0RhdGVTZWxlY3RlZCkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5iY0RhdGVTZWxlY3RlZCh7XG5cdCAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF5LmRhdGVcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBGb3JtYXQgYSBkYXRlIHVzaW5nIG1vbWVudFxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGVcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9ybWF0XG5cdCAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSBmb3JtYXR0ZWREYXRlXG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2Zvcm1hdERhdGUnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUsIGZvcm1hdCkge1xuXHQgICAgICAgICAgICBpZiAoIWRhdGUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoZm9ybWF0KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIEJ1aWxkIHRoZSBjYWxlbmRhciBKU09OXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBkYXlzXG5cdCAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGRlcHRoXG5cdCAgICAgICAgICogQHJldHVybiB7RWxlbWVudH0gZWxlbWVudFxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdfYnVpbGRDYWxlbmRhcicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9idWlsZENhbGVuZGFyKGRheXMsIGRlcHRoKSB7XG5cdFxuXHQgICAgICAgICAgICAvLyBDYWxsIHRoZSBjb3JyZWN0IG9yZ2FuaXphdGlvbiBtZXRob2QgYmFzZWQgb24gdGhlIG5lc3RpbmcgZGVwdGhcblx0ICAgICAgICAgICAgaWYgKGRlcHRoID09PSAnbW9udGgnKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgdGhpcy5iY0NvbGxlY3Rpb24gPSB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLm9yZ2FuaXplTW9udGhzKGRheXMpO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGRlcHRoID09PSAnd2VlaycpIHtcblx0XG5cdCAgICAgICAgICAgICAgICB0aGlzLmJjQ29sbGVjdGlvbiA9IHRoaXMuYmNDYWxlbmRhclNlcnZpY2Uub3JnYW5pemVXZWVrcyhkYXlzKTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChkZXB0aCA9PT0gJ2RheScpIHtcblx0XG5cdCAgICAgICAgICAgICAgICB0aGlzLmJjQ29sbGVjdGlvbiA9IGRheXM7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIENhbGVuZGFyQ29udHJvbGxlcjtcblx0fSgpO1xuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvY2FsZW5kYXIuaHRtbCc7XG5cdHZhciBodG1sID0gXCI8c2VjdGlvbiBjbGFzcz1iYy1jYWxlbmRhcj4gPHNwYW4gY2xhc3M9YmMtY2FsZW5kYXJfX3dlZWtkYXlzIGRhdGEtbmctaWY9XFxcInZtLnNob3dXZWVrZGF5cyAmJiB2bS5uZXN0aW5nRGVwdGggPT09ICd3ZWVrJ1xcXCI+IDxzcGFuIGNsYXNzPVxcXCJiYy1jYWxlbmRhcl9fZGF5IGJjLWNhbGVuZGFyX19kYXktLXdlZWtkYXlzXFxcIiBkYXRhLW5nLXJlcGVhdD1cXFwiZGF5IGluIHZtLndlZWtkYXlzIHRyYWNrIGJ5ICRpbmRleFxcXCI+IDxzdHJvbmcgY2xhc3M9YmMtY2FsZW5kYXJfX2RheS10aXRsZT4ge3sgZGF5IH19IDwvc3Ryb25nPiA8L3NwYW4+IDwvc3Bhbj4gPGJjLXllYXIgYmMtY29sbGVjdGlvbj12bS5iY0NvbGxlY3Rpb24gZGF0YS1uZy1pZj1cXFwidm0ubmVzdGluZ0RlcHRoID09PSAneWVhcidcXFwiPjwvYmMteWVhcj4gPGJjLW1vbnRoIGJjLWNvbGxlY3Rpb249dm0uYmNDb2xsZWN0aW9uIGRhdGEtbmctaWY9XFxcInZtLm5lc3RpbmdEZXB0aCA9PT0gJ21vbnRoJ1xcXCI+PC9iYy1tb250aD4gPGJjLXdlZWsgYmMtY29sbGVjdGlvbj12bS5iY0NvbGxlY3Rpb24gZGF0YS1uZy1pZj1cXFwidm0ubmVzdGluZ0RlcHRoID09PSAnd2VlaydcXFwiPjwvYmMtd2Vlaz4gPGJjLWRheSBiYy1jb2xsZWN0aW9uPXZtLmJjQ29sbGVjdGlvbiBkYXRhLW5nLWlmPVxcXCJ2bS5uZXN0aW5nRGVwdGggPT09ICdkYXknXFxcIj48L2JjLWRheT4gPC9zZWN0aW9uPlwiO1xuXHR3aW5kb3cuYW5ndWxhci5tb2R1bGUoJ25nJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbihjKSB7IGMucHV0KHBhdGgsIGh0bWwpIH1dKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMveWVhci5odG1sJztcblx0dmFyIGh0bWwgPSBcIjxkaXYgY2xhc3M9YmMtY2FsZW5kYXJfX3llYXIgZGF0YS1uZy1yZXBlYXQ9XFxcInllYXIgaW4gdm0uYmNDb2xsZWN0aW9uIHRyYWNrIGJ5ICRpbmRleFxcXCI+IDxiYy1tb250aCBiYy1jb2xsZWN0aW9uPXllYXIgYmMtd2Vla3MtaGVhZGVyPXZtLndlZWtkYXlzSGVhZGVyPjwvYmMtbW9udGg+IDwvZGl2PlwiO1xuXHR3aW5kb3cuYW5ndWxhci5tb2R1bGUoJ25nJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbihjKSB7IGMucHV0KHBhdGgsIGh0bWwpIH1dKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvbW9udGguaHRtbCc7XG5cdHZhciBodG1sID0gXCI8dGltZSBjbGFzcz1iYy1jYWxlbmRhcl9fbW9udGggZGF0ZXRpbWU9XFxcInt7IG1vbnRoWzBdW21vbnRoWzBdLmxlbmd0aCAtIDFdLmRhdGUgfCBkYXRlOid5eXl5LU1NJyB9fVxcXCIgZGF0YS1uZy1yZXBlYXQ9XFxcIm1vbnRoIGluIHZtLmJjQ29sbGVjdGlvbiB0cmFjayBieSAkaW5kZXhcXFwiPiA8c3BhbiBjbGFzcz1iYy1jYWxlbmRhcl9fbW9udGgtdGl0bGUgZGF0YS1uZy1iaW5kPVxcXCJ2bS5mb3JtYXREYXRlKG1vbnRoWzBdW21vbnRoWzBdLmxlbmd0aCAtIDFdLmRhdGUsIHZtLm1vbnRoVGl0bGVGb3JtYXQpXFxcIiBkYXRhLW5nLWlmPXZtLnNob3dNb250aFRpdGxlcz48L3NwYW4+IDxzcGFuIGNsYXNzPWJjLWNhbGVuZGFyX193ZWVrZGF5cyBkYXRhLW5nLWlmPXZtLnNob3dXZWVrZGF5cz4gPHNwYW4gY2xhc3M9XFxcImJjLWNhbGVuZGFyX19kYXkgYmMtY2FsZW5kYXJfX2RheS0td2Vla2RheXNcXFwiIGRhdGEtbmctcmVwZWF0PVxcXCJkYXkgaW4gdm0ud2Vla2RheXMgdHJhY2sgYnkgJGluZGV4XFxcIj4gPHN0cm9uZyBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5LXRpdGxlPiB7eyBkYXkgfX0gPC9zdHJvbmc+IDwvc3Bhbj4gPC9zcGFuPiA8YmMtd2VlayBiYy1jb2xsZWN0aW9uPW1vbnRoPjwvYmMtd2Vlaz4gPC90aW1lPlwiO1xuXHR3aW5kb3cuYW5ndWxhci5tb2R1bGUoJ25nJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbihjKSB7IGMucHV0KHBhdGgsIGh0bWwpIH1dKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvd2Vlay5odG1sJztcblx0dmFyIGh0bWwgPSBcIjx0aW1lIGNsYXNzPWJjLWNhbGVuZGFyX193ZWVrIGRhdGV0aW1lPVxcXCJ7eyB3ZWVrW3dlZWsubGVuZ3RoIC0gMV0uZGF0ZSB8IGRhdGU6J3l5eXktd3cnIH19XFxcIiBkYXRhLW5nLXJlcGVhdD1cXFwid2VlayBpbiB2bS5iY0NvbGxlY3Rpb24gdHJhY2sgYnkgJGluZGV4XFxcIj4gPGJjLWRheSBiYy1jb2xsZWN0aW9uPXdlZWs+PC9iYy1kYXk+IDwvdGltZT5cIjtcblx0d2luZG93LmFuZ3VsYXIubW9kdWxlKCduZycpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oYykgeyBjLnB1dChwYXRoLCBodG1sKSB9XSk7XG5cdG1vZHVsZS5leHBvcnRzID0gcGF0aDtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgcGF0aCA9ICcvVXNlcnMvYmMvQ29kZS9vcGVuLXNvdXJjZS9hbmd1bGFyLWpzb24tY2FsZW5kYXIvc3JjL3RlbXBsYXRlcy9kYXkuaHRtbCc7XG5cdHZhciBodG1sID0gXCI8c3BhbiBjbGFzcz1iYy1jYWxlbmRhcl9fZGF5IGRhdGEtbmctY2xhc3M9XFxcInsgJ2JjLWNhbGVuZGFyX19kYXktLWRpc2FibGVkJzogdm0uaXNCZWZvcmVUb2RheShkYXkuZGF0ZSksXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS10b2RheSc6IHZtLmlzRGF5VG9kYXkoZGF5LmRhdGUpLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tZXZlbic6ICRldmVuLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tb2RkJzogJG9kZCxcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLXBhZCc6ICFkYXkuZGF0ZSxcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLXZhbGlkJzogZGF5LmRhdGUsXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS1zZWxlY3RlZCc6IGRheS5kYXRlID09PSB2bS5zZWxlY3RlZERhdGUuZGF0ZSB9XFxcIiBkYXRhLW5nLWNsaWNrPXZtLnNlbGVjdERhdGUoZGF5KSBkYXRhLW5nLXJlcGVhdD1cXFwiZGF5IGluIHZtLmJjQ29sbGVjdGlvbiB0cmFjayBieSAkaW5kZXhcXFwiIHRpdGxlPWRheS5kYXRlPiA8bmctaW5jbHVkZSBzcmM9dm0uZGF5VGVtcGxhdGU+PC9uZy1pbmNsdWRlPiA8L3NwYW4+XCI7XG5cdHdpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xuXHRtb2R1bGUuZXhwb3J0cyA9IHBhdGg7XG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5iY1llYXJEaXJlY3RpdmUgPSBiY1llYXJEaXJlY3RpdmU7XG5cdFxuXHR2YXIgX3llYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF95ZWFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3llYXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIGJjWWVhckRpcmVjdGl2ZSgpIHtcblx0ICAgICduZ0luamVjdCc7XG5cdFxuXHQgICAgdmFyIGRpcmVjdGl2ZSA9IHtcblx0ICAgICAgICByZXN0cmljdDogJ0UnLFxuXHQgICAgICAgIHJlcGxhY2U6IHRydWUsXG5cdCAgICAgICAgc2NvcGU6IHt9LFxuXHQgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0ICAgICAgICAgICAgYmNDb2xsZWN0aW9uOiAnPSdcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHRlbXBsYXRlVXJsOiBfeWVhcjIuZGVmYXVsdCxcblx0ICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbiBjb250cm9sbGVyKCkge1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZygnaW4gWUVBUiBkaXJlY3RpdmU6ICcsIHRoaXMuYmNDb2xsZWN0aW9uKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gZGlyZWN0aXZlO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5iY01vbnRoRGlyZWN0aXZlID0gYmNNb250aERpcmVjdGl2ZTtcblx0XG5cdHZhciBfbW9udGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9tb250aDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tb250aCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gYmNNb250aERpcmVjdGl2ZSgpIHtcblx0ICAgICduZ0luamVjdCc7XG5cdFxuXHQgICAgdmFyIGRpcmVjdGl2ZSA9IHtcblx0ICAgICAgICByZXN0cmljdDogJ0UnLFxuXHQgICAgICAgIHJlcGxhY2U6IHRydWUsXG5cdCAgICAgICAgc2NvcGU6IHt9LFxuXHQgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0ICAgICAgICAgICAgYmNDb2xsZWN0aW9uOiAnPScsXG5cdCAgICAgICAgICAgIGJjV2Vla2RheXNIZWFkZXI6ICc9J1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdGVtcGxhdGVVcmw6IF9tb250aDIuZGVmYXVsdCxcblx0ICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbiBjb250cm9sbGVyKCkge1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZygnaW4gTU9OVEggZGlyZWN0aXZlOiAnLCB0aGlzLmJjQ29sbGVjdGlvbik7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuYmNXZWVrRGlyZWN0aXZlID0gYmNXZWVrRGlyZWN0aXZlO1xuXHRcblx0dmFyIF93ZWVrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBfd2VlazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93ZWVrKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBiY1dlZWtEaXJlY3RpdmUoKSB7XG5cdCAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgIHZhciBkaXJlY3RpdmUgPSB7XG5cdCAgICAgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgICAgICByZXBsYWNlOiB0cnVlLFxuXHQgICAgICAgIHNjb3BlOiB7fSxcblx0ICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG5cdCAgICAgICAgICAgIGJjQ29sbGVjdGlvbjogJz0nXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0ZW1wbGF0ZVVybDogX3dlZWsyLmRlZmF1bHQsXG5cdCAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gY29udHJvbGxlcigpIHtcblx0ICAgICAgICAgICAgY29uc29sZS5sb2coJ2luIFdFRUsgZGlyZWN0aXZlOiAnLCB0aGlzLmJjQ29sbGVjdGlvbik7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIGRpcmVjdGl2ZTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGJjRGF5RGlyZWN0aXZlLiRpbmplY3QgPSBbXCJiY0NhbGVuZGFyQ29uZmlnXCJdO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmJjRGF5RGlyZWN0aXZlID0gYmNEYXlEaXJlY3RpdmU7XG5cdFxuXHR2YXIgX2RheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0dmFyIF9kYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGF5KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBiY0RheURpcmVjdGl2ZShiY0NhbGVuZGFyQ29uZmlnKSB7XG5cdCAgICAnbmdJbmplY3QnO1xuXHRcblx0ICAgIHZhciBkaXJlY3RpdmUgPSB7XG5cdCAgICAgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgICAgICByZXBsYWNlOiB0cnVlLFxuXHQgICAgICAgIHNjb3BlOiB7fSxcblx0ICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG5cdCAgICAgICAgICAgIGJjQ29sbGVjdGlvbjogJz0nXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0ZW1wbGF0ZVVybDogX2RheTIuZGVmYXVsdCxcblx0ICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbiBjb250cm9sbGVyKCkge1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZygnaW4gREFZIGRpcmVjdGl2ZTogJywgdGhpcy5iY0NvbGxlY3Rpb24pO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBkaXJlY3RpdmU7XG5cdH1cblxuLyoqKi8gfVxuLyoqKioqKi8gXSlcbn0pO1xuO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGFuZ3VsYXItanNvbi1jYWxlbmRhci5taW4uanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIDZlOTc5ZWM2OTY2NjVhNTcwZjU5XG4gKiovIiwiaW1wb3J0IHsgYmNDYWxlbmRhckNvbmZpZyB9IGZyb20gJy4vY2FsZW5kYXIucHJvdmlkZXInO1xuaW1wb3J0IHsgYmNDYWxlbmRhclNlcnZpY2UgfSBmcm9tICcuL2NhbGVuZGFyLnNlcnZpY2UnO1xuaW1wb3J0IHsgYmNDYWxlbmRhckRpcmVjdGl2ZSB9IGZyb20gJy4vY2FsZW5kYXIuZGlyZWN0aXZlJztcbmltcG9ydCB7IGJjWWVhckRpcmVjdGl2ZSB9IGZyb20gJy4veWVhci5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgYmNNb250aERpcmVjdGl2ZSB9IGZyb20gJy4vbW9udGguZGlyZWN0aXZlJztcbmltcG9ydCB7IGJjV2Vla0RpcmVjdGl2ZSB9IGZyb20gJy4vd2Vlay5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgYmNEYXlEaXJlY3RpdmUgfSBmcm9tICcuL2RheS5kaXJlY3RpdmUnO1xuXG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnYmMuSnNvbkNhbGVuZGFyJywgW10pXG4gICAgLnByb3ZpZGVyKCdiY0NhbGVuZGFyQ29uZmlnJywgYmNDYWxlbmRhckNvbmZpZylcbiAgICAuc2VydmljZSgnYmNDYWxlbmRhclNlcnZpY2UnLCBiY0NhbGVuZGFyU2VydmljZSlcbiAgICAuZGlyZWN0aXZlKCdiY0NhbGVuZGFyJywgYmNDYWxlbmRhckRpcmVjdGl2ZSlcbiAgICAuZGlyZWN0aXZlKCdiY1llYXInLCBiY1llYXJEaXJlY3RpdmUpXG4gICAgLmRpcmVjdGl2ZSgnYmNNb250aCcsIGJjTW9udGhEaXJlY3RpdmUpXG4gICAgLmRpcmVjdGl2ZSgnYmNXZWVrJywgYmNXZWVrRGlyZWN0aXZlKVxuICAgIC5kaXJlY3RpdmUoJ2JjRGF5JywgYmNEYXlEaXJlY3RpdmUpXG47XG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2luZGV4LmpzXG4gKiovIiwiaW1wb3J0IGRheVRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGVzL2RheS5pbm5lci5odG1sJztcblxuZXhwb3J0IGNsYXNzIGJjQ2FsZW5kYXJDb25maWcge1xuXG4gICAgLy8gRGVmaW5lIGRlZmF1bHRzXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICduZ0luamVjdCc7XG5cbiAgICAgICAgLy8gVGhlIGNhbGVuZGFyIHdpbGwgYmVnaW4gd2l0aCB0b2RheVxuICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IG1vbWVudChuZXcgRGF0ZSgpKS5zdGFydE9mKCdkYXknKS5mb3JtYXQoKTtcblxuICAgICAgICAvLyBUaGUgZGVmYXVsdCBpbnRlcnZhbCB0eXBlIFtkYXl8d2Vla3xtb250aF1cbiAgICAgICAgdGhpcy5uZXN0aW5nRGVwdGggPSAnbW9udGgnO1xuXG4gICAgICAgIC8vIEhvdyBtYW55IGRheXMgc2hvdWxkIGJlIGdlbmVyYXRlZFxuICAgICAgICB0aGlzLmRheXMgPSAzMDtcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIGRpZmZlcmVudCBwb3NzaWJsZSByZXByZXNlbnRhdGlvbnMgb2YgdGhlIHdlZWtkYXlcbiAgICAgICAgdGhpcy53ZWVrZGF5U3R5bGUgPSB7XG4gICAgICAgICAgICBsZXR0ZXI6IFtcbiAgICAgICAgICAgICAgICAnUycsXG4gICAgICAgICAgICAgICAgJ00nLFxuICAgICAgICAgICAgICAgICdUJyxcbiAgICAgICAgICAgICAgICAnVycsXG4gICAgICAgICAgICAgICAgJ1QnLFxuICAgICAgICAgICAgICAgICdGJyxcbiAgICAgICAgICAgICAgICAnUycsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYWJicmV2aWF0aW9uOiBbXG4gICAgICAgICAgICAgICAgJ1N1bicsXG4gICAgICAgICAgICAgICAgJ01vbicsXG4gICAgICAgICAgICAgICAgJ1R1ZScsXG4gICAgICAgICAgICAgICAgJ1dlZCcsXG4gICAgICAgICAgICAgICAgJ1RodXInLFxuICAgICAgICAgICAgICAgICdGcmknLFxuICAgICAgICAgICAgICAgICdTYXQnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHdvcmQ6IFtcbiAgICAgICAgICAgICAgICAnU3VuZGF5JyxcbiAgICAgICAgICAgICAgICAnTW9uZGF5JyxcbiAgICAgICAgICAgICAgICAnVHVlc2RheScsXG4gICAgICAgICAgICAgICAgJ1dlZG5lc2RheScsXG4gICAgICAgICAgICAgICAgJ1RodXJzZGF5JyxcbiAgICAgICAgICAgICAgICAnRnJpZGF5JyxcbiAgICAgICAgICAgICAgICAnU2F0dXJkYXknLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTZXQgdGhlIGRlZmF1bHQgd29yZCB0eXBlIChNIHZzIE1vbiB2cyBNb25kYXkpXG4gICAgICAgIHRoaXMuZGF5VGl0bGVGb3JtYXQgPSAnYWJicmV2aWF0aW9uJztcblxuICAgICAgICAvLyBTaG91bGQgdGhlIGNhbGVuZGFyIHNob3cgdGhlIHdlZWtkYXkgbmFtZXMgYWJvdmUgZWFjaCBjb2x1bW4/XG4gICAgICAgIHRoaXMuc2hvd1dlZWtkYXlzID0gdHJ1ZTtcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIGRlZmF1bHQgdGVtcGxhdGUgZm9yIGEgZGF5XG4gICAgICAgIHRoaXMuZGF5VGVtcGxhdGUgPSBkYXlUZW1wbGF0ZTtcblxuICAgICAgICAvLyBBbGxvdyB0aGUgdXNlciB0byBzZXQgYSBjdXN0b20gdGVtcGxhdGVcbiAgICAgICAgdGhpcy5zZXREYXlUZW1wbGF0ZSA9ICh0ZW1wbGF0ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy51c2VyRGF5VGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlZmluZSB0aGUgZGVmYXVsdCBmb3JtYXQgZm9yIGEgZGF5XG4gICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9ICdEJztcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIGRlZmF1bHQgZm9ybWF0IGZvciBhIG1vbnRoIHRpdGxlXG4gICAgICAgIHRoaXMubW9udGhUaXRsZUZvcm1hdCA9ICdNTU1NJ1xuXG4gICAgICAgIC8vIFNob3VsZCBtb250aCB0aXRsZXMgYmUgc2hvd24gYnkgZGVmYXVsdD9cbiAgICAgICAgdGhpcy5zaG93TW9udGhUaXRsZXMgPSB0cnVlO1xuXG4gICAgfVxuXG5cblxuXG4gICAgJGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG5cbn1cblxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY2FsZW5kYXIucHJvdmlkZXIuanNcbiAqKi8iLCJ2YXIgcGF0aCA9ICcvVXNlcnMvYmMvQ29kZS9vcGVuLXNvdXJjZS9hbmd1bGFyLWpzb24tY2FsZW5kYXIvc3JjL3RlbXBsYXRlcy9kYXkuaW5uZXIuaHRtbCc7XG52YXIgaHRtbCA9IFwiPHRpbWUgZGF0ZXRpbWU9XFxcInt7IGRheS5kYXRlIHwgZGF0ZToneXl5eS1NTS1kZCcgfX1cXFwiIGNsYXNzPWJjLWNhbGVuZGFyX19kYXktdGltZSB0aXRsZT1cXFwie3sgZGF5LmRhdGUgfX1cXFwiIGRhdGEtbmctaWY9ZGF5LmRhdGU+IDxzcGFuIGRhdGEtbmctYmluZD1cXFwidm0uZm9ybWF0RGF0ZShkYXkuZGF0ZSwgdm0uZGF0ZUZvcm1hdClcXFwiPjwvc3Bhbj4gPC90aW1lPlwiO1xud2luZG93LmFuZ3VsYXIubW9kdWxlKCduZycpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oYykgeyBjLnB1dChwYXRoLCBodG1sKSB9XSk7XG5tb2R1bGUuZXhwb3J0cyA9IHBhdGg7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy90ZW1wbGF0ZXMvZGF5LmlubmVyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsImV4cG9ydCBjbGFzcyBiY0NhbGVuZGFyU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICApIHtcbiAgICAgICAgJ25nSW5qZWN0JztcblxuICAgICAgICB0aGlzLldFRUtfTEVOR1RIID0gNztcblxuICAgIH1cblxuXG5cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHRvIHNlZSBpZiB0aGUgZGF5IGlzIHByaW9yIHRvIHRoZSBjdXJyZW50IGRhdGVcbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZGlzYWJsZSB0aGUgdW5zZWxlY3RhYmxlIGRheXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlXG4gICAgICogQHJldHVybiB7Qm9vbH0gaXNCZWZvcmVcbiAgICAgKi9cbiAgICBkYXRlSXNCZWZvcmVUb2RheShkYXRlKSB7XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbW9tZW50KG5ldyBEYXRlKCkpLnN0YXJ0T2YoJ2RheScpLmZvcm1hdCgpO1xuXG4gICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuaXNCZWZvcmUodG9kYXkpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBkYXkgbWF0Y2hlcyB0aGUgY3VycmVudCBkYXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlMlxuICAgICAqIEByZXR1cm4ge0Jvb2x9IGlzVG9kYXlcbiAgICAgKi9cbiAgICBpc0RheVRvZGF5KGRhdGUsIGRhdGUyID0gbW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCgpKSB7XG4gICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuaXNTYW1lKGRhdGUyKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFR1cm4gYSBpbnRlZ2VyIChlLmcuICc2JykgaW50byBhbiBhcnJheTogJ1sxLDIsMyw0LDUsNl0nXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IGNvdW50XG4gICAgICogQHJldHVybiB7QXJyYXl9IGRheXNcbiAgICAgKi9cbiAgICBpbnRlZ2VyVG9BcnJheShjb3VudCkge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgY29uc3QgZGF5cyA9IFtdO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSArPSAxKSB7XG4gICAgICAgICAgICBkYXlzLnB1c2goaSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF5cztcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFBhZCB0aGUgYmVnaW5uaW5nIG9mIGEgd2Vla1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXJ0RGF0ZSAtIGRhdGUgdG8gdG8gd29yayBiYWNrIGZyb21cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBjb3VudCAtIGhvdyBtYW55IGRheXMgdG8gcGFkXG4gICAgICogQHJldHVybiB7QXJyYXl9IHBhZFxuICAgICAqL1xuICAgIHBhZERheXNMZWZ0KHN0YXJ0RGF0ZSwgY291bnQpIHtcbiAgICAgICAgY29uc3QgcGFkID0gW107XG4gICAgICAgIGNvbnN0IG1pc3NpbmdEYXlzID0gdGhpcy5pbnRlZ2VyVG9BcnJheShjb3VudCk7XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIG1pc3NpbmcgZGF5c1xuICAgICAgICBmb3IgKGNvbnN0IGRheSBpbiBtaXNzaW5nRGF5cykge1xuICAgICAgICAgICAgLy8gSG93IG1hbnkgZGF5cyB0byBnbyBiYWNrXG4gICAgICAgICAgICBjb25zdCBzdWJ0cmFjdGlvbiA9IHBhcnNlSW50KGRheSwgMTApICsgMTtcblxuICAgICAgICAgICAgLy8gRmluZCB0aGF0IGRheVxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXMgPSBtb21lbnQoc3RhcnREYXRlKS5zdWJ0cmFjdCgoc3VidHJhY3Rpb24pLCAnZGF5cycpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICAgICAgICAgICAgcGFkLnVuc2hpZnQoe1xuICAgICAgICAgICAgICAgIGRhdGU6IHByZXZpb3VzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGFkO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogUGFkIGEgY29sbGVjdGlvbiB3aXRoIGJsYW5rIHRpbGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBjb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtJbnRlZ2VyfSBjb3VudFxuICAgICAqIEByZXR1cm4ge0FycmF5fSBwYWRkZWRDb2xsZWN0aW9uXG4gICAgICovXG4gICAgcGFkQmxhbmtUaWxlcyhjb2xsZWN0aW9uLCBjb3VudCwgZGlyZWN0aW9uID0gJ2xlZnQnKSB7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBjb25zdCBkYXlzID0gW107XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFycmF5XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSArPSAxKSB7XG4gICAgICAgICAgICBkYXlzLnB1c2goe1xuICAgICAgICAgICAgICAgIGRhdGU6IG51bGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGRpcmVjdGlvbiBpcyAncmlnaHQnXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIC8vIHBhZCB0aGUgZW5kXG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5jb25jYXQoZGF5cyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSBwYWQgdGhlIGJlZ2lubmluZ1xuICAgICAgICAgICAgcmV0dXJuIGRheXMuY29uY2F0KGNvbGxlY3Rpb24pO1xuICAgICAgICB9XG5cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFNwbGl0IGFuIGFycmF5IGludG8gY2h1bmtzIGFuZCByZXR1cm4gYW4gYXJyYXkgb2YgdGhlc2UgY2h1bmtzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBncm91cFxuICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gZ3JvdXBzaXplIC0gQ2h1bmsgc2l6ZS4gRGVmYXVsdHMgdG8gNyAob25lIHdlZWspLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBjaHVua3NcbiAgICAgKi9cbiAgICBjaHVuayhncm91cCwgZ3JvdXBzaXplID0gdGhpcy5XRUVLX0xFTkdUSCkge1xuICAgICAgICBjb25zdCBzZXRzID0gW107XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgY29uc3QgY2h1bmtzID0gZ3JvdXAubGVuZ3RoIC8gcGFyc2VJbnQoZ3JvdXBzaXplLCAxMCk7XG5cbiAgICAgICAgd2hpbGUoaSA8IGNodW5rcykge1xuICAgICAgICAgICAgc2V0c1tpXSA9IGdyb3VwLnNwbGljZSgwLCBncm91cHNpemUpO1xuICAgICAgICAgICAgaSA9IGkgKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNldHM7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGR1cmF0aW9uIGluIGRheXMgYmV0d2VlbiB0d28gZGF0ZXMgSU5DTFVESU5HIGJvdGggZGF0ZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdGFydFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBlbmRcbiAgICAgKiBAcmV0dXJuIHtJbnRlZ2VyfSBkYXlzXG4gICAgICovXG4gICAgZHVyYXRpb25JbkRheXMoc3RhcnQsIGVuZCkge1xuICAgICAgICBjb25zdCBuZXdTdGFydCA9IG1vbWVudChzdGFydCkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgIC8vIEFkZCBhIGRheSBzbyB0aGUgZW5kIGRhdGUgaXMgaW5jbHVkZWQgaW4gdGhlIGNhbGN1bGF0aW9uXG4gICAgICAgIGNvbnN0IG5ld0VuZCA9IG1vbWVudChlbmQpLnN0YXJ0T2YoJ2RheScpLmFkZCgxLCAnZGF5cycpO1xuXG4gICAgICAgIHJldHVybiBuZXdFbmQuZGlmZihuZXdTdGFydCwgICdkYXlzJyk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBPcmdhbml6ZSBhIGNvbGxlY3Rpb24gb2YgZGF5cyBpbnRvIHN1YiBjb2xsZWN0aW9ucyBvZiB3ZWVrc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZGF5cyAtIGFycmF5IG9mIGRheXNcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gY29sbGVjdGlvblxuICAgICAqL1xuICAgIG9yZ2FuaXplV2Vla3MoZGF5cykge1xuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGRheSBvZiB0aGUgd2VlayB0aGF0IHRoZSBjYWxlbmRhciBzdGFydHMgYW5kIGVuZHMgb25cbiAgICAgICAgY29uc3QgZmlyc3REYXkgPSBtb21lbnQoZGF5c1swXS5kYXRlKS5kYXkoKTtcbiAgICAgICAgY29uc3QgbGFzdERheSA9IG1vbWVudChkYXlzW2RheXMubGVuZ3RoIC0gMV0uZGF0ZSkuZGF5KCk7XG4gICAgICAgIGNvbnN0IFNBVFVSREFZID0gNjtcbiAgICAgICAgY29uc3QgU1VOREFZID0gMDtcblxuICAgICAgICAvLyBJZiB0aGUgZmlyc3QgZGF5IGlzIGFmdGVyIFN1bmRheVxuICAgICAgICBpZiAoZmlyc3REYXkgPiBTVU5EQVkpIHtcbiAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoZSBmaXJzdCBkYXkgaXMgbGluZWQgdXAgaW4gdGhlIGNvcnJlY3Qgd2Vla2RheSBjb2x1bW5cbiAgICAgICAgICAgIGRheXMgPSB0aGlzLnBhZEJsYW5rVGlsZXMoZGF5cywgZmlyc3REYXksICdsZWZ0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGUgbGFzdCBkYXkgaXMgYmVmb3JlIFNhdHVyZGF5XG4gICAgICAgIGlmIChsYXN0RGF5IDwgU0FUVVJEQVkpIHtcbiAgICAgICAgICAgIC8vIFBhZCB3aXRoIGJsYW5rIHRpbGVzIHNvIHRoYXQgdGhlIGxhc3Qgd2VlaydzIGRheXMgYXJlIGluIHRoZSBjb3JyZWN0IHdlZWtkYXkgY29sdW1uXG4gICAgICAgICAgICBkYXlzID0gdGhpcy5wYWRCbGFua1RpbGVzKGRheXMsdGhpcy5XRUVLX0xFTkdUSCAtIChsYXN0RGF5ICsgMSksICdyaWdodCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2h1bmsoZGF5cyk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBPcmdhbml6ZSBieSBtb250aFxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gYWxsRGF5cyAtIEFuIGFycmF5IG9mIGFsbCBkYXlzXG4gICAgICogQHJldHVybiB7QXJyYXl9IGNvbGxlY3Rpb24gLSBkYXlzIG9yZ2FuaXplZCBpbnRvIHdlZWtzIGFuZCBtb250aHNcbiAgICAgKi9cbiAgICBvcmdhbml6ZU1vbnRocyhhbGxEYXlzKSB7XG4gICAgICAgIGNvbnN0IGNhbGVuZGFyID0gW107XG4gICAgICAgIGNvbnN0IFNBVFVSREFZID0gNjtcbiAgICAgICAgY29uc3QgU1VOREFZID0gMDtcbiAgICAgICAgbGV0IGNvbGxlY3Rpb24gPSBhbGxEYXlzO1xuICAgICAgICBsZXQgbW9udGg7XG4gICAgICAgIGxldCBkYXlPZk1vbnRoID0gbW9tZW50KGNvbGxlY3Rpb25bMF0uZGF0ZSkuZGF0ZSgpO1xuICAgICAgICBsZXQgZGF5c0luTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXlzSW5Nb250aCgpO1xuXG4gICAgICAgIC8vIFBhZCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBtb250aCB3aXRoIGFueSBtaXNzaW5nIGRheXNcbiAgICAgICAgLy8gSWYgdGhlIGZpcnN0IGRheSBpcyBub3QgdGhlIGZpcnN0IGRheSBvZiB0aGUgbW9udGhcbiAgICAgICAgaWYgKG1vbWVudChjb2xsZWN0aW9uWzBdLmRhdGUpLmRhdGUoKSA+IDApIHtcbiAgICAgICAgICAgIC8vIFB1bGwgdGhpcyBtb250aCdzIGRheXMgZnJvbSB0aGUgY29sbGVjdGlvblxuICAgICAgICAgICAgbW9udGggPSBjb2xsZWN0aW9uLnNsaWNlKDAsIChkYXlzSW5Nb250aCAtIChkYXlPZk1vbnRoIC0gMSkpKTtcblxuICAgICAgICAgICAgLy8gRmlsbCB0aGUgbWlzc2luZyBkYXlzIGZyb20gdGhlIG1vbnRoXG4gICAgICAgICAgICBjb25zdCBwYWQgPSB0aGlzLnBhZERheXNMZWZ0KG1vbnRoWzBdLmRhdGUsIChkYXlPZk1vbnRoIC0gMSkpO1xuXG4gICAgICAgICAgICAvLyBDb21iaW5lIHdpdGggdGhlIGV4aXN0aW5nIGFycmF5XG4gICAgICAgICAgICBjb2xsZWN0aW9uID0gcGFkLmNvbmNhdChjb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gU3BsaXQgaW50byBtb250aHNcbiAgICAgICAgLy8gQXMgbG9uZyBhcyB0aGVyZSBhcmUgZGF5cyBsZWZ0IGluIHRoZSBjb2xsZWN0aW9uXG4gICAgICAgIHdoaWxlIChjb2xsZWN0aW9uLmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBkYXkgb2YgdGhlIG1vbnRoIGZvciB0aGUgZmlyc3QgZGF0ZSBvZiB0aGUgY29sbGVjdGlvbiBlZy4gJzI0J1xuICAgICAgICAgICAgZGF5T2ZNb250aCA9IG1vbWVudChjb2xsZWN0aW9uWzBdLmRhdGUpLmRhdGUoKTtcblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGhvdyBtYW55IGRheXMgdGhlcmUgYXJlIHRoaXMgbW9udGggKHRvdGFsKVxuICAgICAgICAgICAgZGF5c0luTW9udGggPSBtb21lbnQoY29sbGVjdGlvblswXS5kYXRlKS5kYXlzSW5Nb250aCgpO1xuXG4gICAgICAgICAgICAvLyBQdWxsIHRoaXMgbW9udGgncyBkYXlzIGZyb20gdGhlIGNvbGxlY3Rpb25cbiAgICAgICAgICAgIG1vbnRoID0gY29sbGVjdGlvbi5zcGxpY2UoMCwgKGRheXNJbk1vbnRoIC0gKGRheU9mTW9udGggLSAxKSkpO1xuXG4gICAgICAgICAgICAvLyBIb3cgbWFueSB3ZWVrZGF5cyBhcmUgcHJpb3IgdG8gdGhlIGZpcnN0IGRheSBvZiB0aGlzIG1vbnRoP1xuICAgICAgICAgICAgY29uc3QgZmlyc3REYXkgPSBtb21lbnQobW9udGhbMF0uZGF0ZSkuZGF5KCk7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBmaXJzdCBkYXkgaXMgYWZ0ZXIgU3VuZGF5XG4gICAgICAgICAgICBpZiAoZmlyc3REYXkgPiBTVU5EQVkpIHtcbiAgICAgICAgICAgICAgICAvLyBQYWQgd2l0aCBibGFuayB0aWxlcyBzbyB0aGF0IHRoZSBmaXJzdCBkYXkgaXMgbGluZWQgdXAgaW4gdGhlIGNvcnJlY3QgY29sdW1uXG4gICAgICAgICAgICAgICAgbW9udGggPSB0aGlzLnBhZEJsYW5rVGlsZXMobW9udGgsIGZpcnN0RGF5LCAnbGVmdCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBIb3cgbWFueSB3ZWVrZGF5cyBhcmUgYWZ0ZXIgdGhlIGxhc3QgZGF5IG9mIHRoZSBtb250aD9cbiAgICAgICAgICAgIC8vIChyZW1lbWJlcjogd2Vla3MgYXJlIHplcm8tYmFzZWQpXG4gICAgICAgICAgICBjb25zdCBsYXN0RGF5ID0gbW9tZW50KG1vbnRoW21vbnRoLmxlbmd0aCAtIDFdLmRhdGUpLmRheSgpO1xuXG4gICAgICAgICAgICAvLyBJZiBibGFuayB0aWxlcyBhcmUgbmVlZGVkIGZvciB0aGUgbGFzdCB3ZWVrXG4gICAgICAgICAgICBpZiAobGFzdERheSA8IFNBVFVSREFZKSB7XG4gICAgICAgICAgICAgICAgLy8gUGFkIHdpdGggYmxhbmsgdGlsZXMgc28gdGhhdCB0aGUgZmlyc3QgZGF5IGlzIGxpbmVkIHVwIGluIHRoZSBjb3JyZWN0IGNvbHVtblxuICAgICAgICAgICAgICAgIG1vbnRoID0gdGhpcy5wYWRCbGFua1RpbGVzKG1vbnRoLCB0aGlzLldFRUtfTEVOR1RIIC0gKGxhc3REYXkgKyAxKSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE9yZ2FuaXplIGludG8gd2Vla3MgYW5kIGFkZCB0byB0aGUgY2FsZW5kYXIgYXJyYXlcbiAgICAgICAgICAgIGNhbGVuZGFyLnB1c2godGhpcy5jaHVuayhtb250aCkpO1xuXG4gICAgICAgIH1cblxuXG4gICAgICAgIHJldHVybiBjYWxlbmRhcjtcblxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQnVpbGQgYW4gYXJyYXkgb2YgZGF5c1xuICAgICAqXG4gICAgICogQHBhcmFtIHtJbnRlZ2VyfSBsaW1pdCAtIGhvdyBtYW55IGRheXMgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXJ0IC0gdGhlIHN0YXJ0aW5nIGRhdGVcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gZGF5c1xuICAgICAqL1xuICAgIGJ1aWxkRGF5cyhsaW1pdCwgc3RhcnQgPSBuZXcgRGF0ZSgpKSB7XG4gICAgICAgIGxldCBjb3VudGVyID0gMDtcbiAgICAgICAgY29uc3QgZGF5cyA9IFtdO1xuICAgICAgICBsZXQgZGF5O1xuXG4gICAgICAgIHdoaWxlIChjb3VudGVyIDwgbGltaXQpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZGF5XG4gICAgICAgICAgICBkYXkgPSBtb21lbnQoc3RhcnQpLmFkZChjb3VudGVyLCAnZGF5cycpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0byB0aGUgYXJyYXlcbiAgICAgICAgICAgIGRheXMucHVzaCh7XG4gICAgICAgICAgICAgICAgZGF0ZTogZGF5LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEluY3JlbWVudCB0aGUgY291bnRlclxuICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXIgKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRheXM7XG4gICAgfVxuXG5cbn1cblxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY2FsZW5kYXIuc2VydmljZS5qc1xuICoqLyIsImltcG9ydCB7IENhbGVuZGFyQ29udHJvbGxlciB9IGZyb20gJy4vY2FsZW5kYXIuY29udHJvbGxlcic7XG5pbXBvcnQgY2FsZW5kYXJUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlcy9jYWxlbmRhci5odG1sJztcbmltcG9ydCB5ZWFyVGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZXMveWVhci5odG1sJztcbmltcG9ydCBtb250aFRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGVzL21vbnRoLmh0bWwnO1xuaW1wb3J0IHdlZWtUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlcy93ZWVrLmh0bWwnO1xuaW1wb3J0IGRheVRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGVzL2RheS5odG1sJztcblxuZXhwb3J0IGZ1bmN0aW9uIGJjQ2FsZW5kYXJEaXJlY3RpdmUoXG4pIHtcbiAgICAnbmdJbmplY3QnO1xuXG4gICAgLy8gRGVmaW5lIHBvc3NpYmxlIHRlbXBsYXRlc1xuICAgIGNvbnN0IHRlbXBsYXRlcyA9IHtcbiAgICAgICAgeWVhcjogeWVhclRlbXBsYXRlLFxuICAgICAgICBtb250aDogbW9udGhUZW1wbGF0ZSxcbiAgICAgICAgd2Vlazogd2Vla1RlbXBsYXRlLFxuICAgICAgICBkYXk6IGRheVRlbXBsYXRlLFxuICAgIH07XG5cbiAgICBjb25zdCBkaXJlY3RpdmUgPSB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuICAgICAgICAgICAgYmNTdGFydERhdGU6ICdAPycsICAgICAgIC8vIGRhdGUgLSBkZWZhdWx0IHRvIHRvZGF5XG4gICAgICAgICAgICBiY0VuZERhdGU6ICdAPycsICAgICAgICAgLy8gZGF0ZSAtIGlmIG5vdCBwcmVzZW50LCB1c2UgY3JlYXRlIHVzaW5nIGJjRGF5c1xuICAgICAgICAgICAgYmNOZXN0aW5nRGVwdGg6ICdAPycsICAgIC8vIHN0cmluZyBbbW9udGh8d2Vla3xkYXldIC0gZGVmYXVsdHM6IG1vbnRoXG4gICAgICAgICAgICBiY0RheXM6ICdAPycsICAgICAgICAgICAgLy8gaW50ZWdlciAtIGRlZmF1bHQgdG8gMzAgKHVzZWQgdG8gY3JlYXRlIGJjRW5kRGF0ZSlcbiAgICAgICAgICAgIGJjRGF5VGl0bGVGb3JtYXQ6ICdAPycsICAvLyBzdHJpbmcgW3dvcmR8YWJicmV2aWF0aW9ufGxldHRlcl0gLSBkZWZhdWx0OiBhYmJyZXZpYXRpb25cbiAgICAgICAgICAgIGJjTW9udGhUaXRsZUZvcm1hdDogJ0A/JywvLyBzdHJpbmcgLSBhbnkgdmFsaWQgTW9tZW50IGRhdGUgZm9ybWF0IC0gZGVmYXVsdDogTU1NTVxuICAgICAgICAgICAgYmNEYXRlU2VsZWN0ZWQ6ICcmJywgICAgIC8vIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkYXRlIGlzIHNlbGVjdGVkICh0YXAvY2xpY2spXG4gICAgICAgICAgICBiY1Nob3dXZWVrZGF5czogJz0/JywgICAgLy8gZGV0ZXJtaW5lIGlmIHRoZSB3ZWVrZGF5cyBoZWFkZXIgc2hvdWxkIGJlIGNyZWF0ZWRcbiAgICAgICAgICAgIGJjU2hvd01vbnRoVGl0bGVzOiAnPT8nLCAvLyBkZXRlcm1pbmUgaWYgdGhlIG1vbnRoIHRpdGxlcyBzaG91bGQgYmUgdmlzaWJsZVxuICAgICAgICAgICAgYmNEYXlUZW1wbGF0ZTogJ0A/JywgICAgIC8vIG92ZXJ3cml0ZSB0aGUgZGVmYXVsdCAnZGF5JyB0ZW1wbGF0ZVxuICAgICAgICAgICAgYmNEYXRlRm9ybWF0OiAnQD8nLCAgICAgIC8vIGRlZmluZSBhIGN1c3RvbSBkYXRlIGZvcm1hdCBmb3IgdGhlIGRheVxuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBsaW5rRnVuY3Rpb24sXG4gICAgICAgIHRlbXBsYXRlVXJsOiBjYWxlbmRhclRlbXBsYXRlLFxuICAgICAgICBjb250cm9sbGVyOiBDYWxlbmRhckNvbnRyb2xsZXIsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuXG5cblxuICAgIC8qKlxuICAgICAqIExpbmtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsaW5rRnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCB2bSkge1xuXG4gICAgICAgIC8vIFNldCB0aGUgY29ycmVjdCB0ZW1wbGF0ZSBiYXNlZCBvbiB0aGUgZGVzaXJlZCBuZXN0aW5nIGRlcHRoXG4gICAgICAgIHZtLmdldFRlbXBsYXRlVXJsID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlc1t2bS5uZXN0aW5nRGVwdGhdO1xuICAgICAgICB9O1xuXG4gICAgfVxuXG5cblxufVxuXG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2NhbGVuZGFyLmRpcmVjdGl2ZS5qc1xuICoqLyIsImV4cG9ydCBjbGFzcyBDYWxlbmRhckNvbnRyb2xsZXIge1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgICR0ZW1wbGF0ZUNhY2hlLFxuICAgICAgICBiY0NhbGVuZGFyQ29uZmlnLCBiY0NhbGVuZGFyU2VydmljZVxuICAgICkge1xuICAgICAgICAnbmdJbmplY3QnO1xuXG4gICAgICAgIHRoaXMuJHRlbXBsYXRlQ2FjaGUgPSAkdGVtcGxhdGVDYWNoZTtcbiAgICAgICAgdGhpcy5iY0NhbGVuZGFyQ29uZmlnID0gYmNDYWxlbmRhckNvbmZpZztcbiAgICAgICAgdGhpcy5iY0NhbGVuZGFyU2VydmljZSA9IGJjQ2FsZW5kYXJTZXJ2aWNlO1xuXG5cbiAgICAgICAgdGhpcy5fYWN0aXZhdGUoKTtcblxuICAgIH1cblxuXG5cblxuICAgIF9hY3RpdmF0ZSgpIHtcbiAgICAgICAgLy8gRGVmaW5lIHRvZGF5J3MgZGF0ZVxuICAgICAgICB0aGlzLnRvZGF5ID0gbW9tZW50KG5ldyBEYXRlKCkpLnN0YXJ0T2YoJ2RheScpO1xuXG4gICAgICAgIC8vIERlZmluZSB0aGUgc3RhcnQgZGF0ZSBmb3IgdGhlIGNhbGVuZGFyXG4gICAgICAgIHRoaXMuc3RhcnREYXRlID0gdGhpcy5iY1N0YXJ0RGF0ZSB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcuc3RhcnREYXRlO1xuXG4gICAgICAgIC8vIElmIHRoZSBlbmQgZGF0ZSB3YXMgZGVmaW5lZFxuICAgICAgICBpZiAodGhpcy5iY0VuZERhdGUpIHtcblxuICAgICAgICAgICAgLy8gRGVmaW5lIGhvdyBtYW55IGRheXMgYXJlIG5lZWRlZCB1c2luZyB0aGUgZW5kIGRhdGVcbiAgICAgICAgICAgIHRoaXMuZGF5cyA9IHRoaXMuYmNDYWxlbmRhclNlcnZpY2UuZHVyYXRpb25JbkRheXModGhpcy5zdGFydERhdGUsIHRoaXMuYmNFbmREYXRlKTtcblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAvLyBEZWZpbmUgaG93IG1hbnkgZGF5cyBhcmUgbmVlZGVkIGZyb20gdGhlIGNvdW50IHBhc3NlZCBpbiBvciB0aGUgY29uZmlnXG4gICAgICAgICAgICB0aGlzLmRheXMgPSBwYXJzZUludCh0aGlzLmJjRGF5cyB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcuZGF5cywgMTApO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWZpbmUgaG93IGRlZXAgdG8gb3JnYW5pemUgdGhlIGNhbGVuZGFyXG4gICAgICAgIHRoaXMubmVzdGluZ0RlcHRoID0gdGhpcy5iY05lc3RpbmdEZXB0aCB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcubmVzdGluZ0RlcHRoO1xuXG4gICAgICAgIC8vIERlZmluZSB0aGUgd2Vla2RheSBoZWFkZXJzIGZvcm1hdFxuICAgICAgICB0aGlzLndlZWtkYXlzID0gdGhpcy5iY0RheVRpdGxlRm9ybWF0ID9cbiAgICAgICAgICAgIHRoaXMuYmNDYWxlbmRhckNvbmZpZy53ZWVrZGF5U3R5bGVbdGhpcy5iY0RheVRpdGxlRm9ybWF0XSA6XG4gICAgICAgICAgICB0aGlzLmJjQ2FsZW5kYXJDb25maWcud2Vla2RheVN0eWxlW3RoaXMuYmNDYWxlbmRhckNvbmZpZy5kYXlUaXRsZUZvcm1hdF07XG5cbiAgICAgICAgLy8gRGVmaW5lIHRoZSBmb3JtYXQgZm9yIHRoZSBtb250aCB0aXRsZVxuICAgICAgICB0aGlzLm1vbnRoVGl0bGVGb3JtYXQgPSB0aGlzLmJjTW9udGhUaXRsZUZvcm1hdCB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcubW9udGhUaXRsZUZvcm1hdDtcblxuICAgICAgICAvLyBEZWZpbmUgaWYgbW9udGggdGl0bGVzIHNob3VsZCBiZSB2aXNpYmxlXG4gICAgICAgIHRoaXMuc2hvd01vbnRoVGl0bGVzID0gdHlwZW9mKHRoaXMuYmNTaG93TW9udGhUaXRsZXMpID09PSAnYm9vbGVhbicgP1xuICAgICAgICAgICAgdGhpcy5iY1Nob3dNb250aFRpdGxlcyA6IHRoaXMuYmNDYWxlbmRhckNvbmZpZy5zaG93TW9udGhUaXRsZXM7XG5cbiAgICAgICAgLy8gSW5pdGlhbGx5IG5vIGRhdGUgaXMgc2VsZWN0ZWRcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSBudWxsO1xuXG4gICAgICAgIC8vIFNldCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgY2FsZW5kYXIgd2Vla2RheXMgaGVhZGVyc1xuICAgICAgICB0aGlzLnNob3dXZWVrZGF5cyA9IHR5cGVvZih0aGlzLmJjU2hvd1dlZWtkYXlzKSA9PT0gJ2Jvb2xlYW4nID9cbiAgICAgICAgICAgIHRoaXMuYmNTaG93V2Vla2RheXMgOiB0aGlzLmJjQ2FsZW5kYXJDb25maWcuc2hvd1dlZWtkYXlzO1xuXG4gICAgICAgIC8vIERlZmluZSB0aGUgdGVtcGxhdGUgZm9yIGFuIGluZGl2aWR1YWwgZGF5XG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGRlZmluZWQgYSB0ZW1wbGF0ZSBvbiB0aGUgZGlyZWN0aXZlXG4gICAgICAgIGlmICh0aGlzLmJjRGF5VGVtcGxhdGUpIHtcbiAgICAgICAgICAgIC8vIE5hbWUgdGhlIHRlbXBsYXRlIGxvY2F0aW9uXG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUxvY2F0aW9uID0gJ3VzZXJEYXlUZW1wbGF0ZS5odG1sJztcblxuICAgICAgICAgICAgLy8gUHV0IHRoZSB1c2VyIHRlbXBsYXRlIGludG8gdGhlIGNhY2hlXG4gICAgICAgICAgICB0aGlzLiR0ZW1wbGF0ZUNhY2hlLnB1dCh0ZW1wbGF0ZUxvY2F0aW9uLCB0aGlzLmJjRGF5VGVtcGxhdGUpO1xuXG4gICAgICAgICAgICAvLyBFeHBvc2UgdGhlIGxvY2F0aW9uIHRvIHRoZSBkaXJlY3RpdmVcbiAgICAgICAgICAgIHRoaXMuZGF5VGVtcGxhdGUgPSB0ZW1wbGF0ZUxvY2F0aW9uO1xuXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5iY0NhbGVuZGFyQ29uZmlnLnVzZXJEYXlUZW1wbGF0ZSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgZGVmaW5lZCBhIHRlbXBsYXRlIGluIHRoZSBwcm92aWRlclxuXG4gICAgICAgICAgICAvLyBOYW1lIHRoZSB0ZW1wbGF0ZSBsb2NhdGlvblxuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVMb2NhdGlvbiA9ICd1c2VyRGF5VGVtcGxhdGUuaHRtbCc7XG5cbiAgICAgICAgICAgIC8vIFB1dCB0aGUgdXNlciB0ZW1wbGF0ZSBpbnRvIHRoZSBjYWNoZVxuICAgICAgICAgICAgdGhpcy4kdGVtcGxhdGVDYWNoZS5wdXQodGVtcGxhdGVMb2NhdGlvbiwgdGhpcy5iY0NhbGVuZGFyQ29uZmlnLnVzZXJEYXlUZW1wbGF0ZSk7XG5cbiAgICAgICAgICAgIC8vIEV4cG9zZSB0aGUgbG9jYXRpb24gdG8gdGhlIGRpcmVjdGl2ZVxuICAgICAgICAgICAgdGhpcy5kYXlUZW1wbGF0ZSA9IHRlbXBsYXRlTG9jYXRpb247XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG5vIHRlbXBsYXRlIGZyb20gdGhlIHVzZXJcblxuICAgICAgICAgICAgLy8gRXhwb3NlIHRoZSBkZWZhdWx0IHRlbXBsYXRlIGxvY2F0aW9uIHRvIHRoZSBkaXJlY3RpdmVcbiAgICAgICAgICAgIHRoaXMuZGF5VGVtcGxhdGUgPSB0aGlzLmJjQ2FsZW5kYXJDb25maWcuZGF5VGVtcGxhdGU7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlZmluZSB0aGUgZGF0ZSBmb3JtYXQgZm9yIHRoZSBpbmRpdmlkdWFsIGRheVxuICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSB0aGlzLmJjRGF0ZUZvcm1hdCB8fCB0aGlzLmJjQ2FsZW5kYXJDb25maWcuZGF0ZUZvcm1hdDtcblxuICAgICAgICAvLyBCdWlsZCBhcnJheSBvZiBkYXlzXG4gICAgICAgIGNvbnN0IGRheXMgPSB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLmJ1aWxkRGF5cyh0aGlzLmRheXMsIHRoaXMuc3RhcnREYXRlKTtcblxuICAgICAgICAvLyBCdWlsZCB0aGUgY2FsZW5kYXIgSlNPTiBhbmQgZXhwb3NlIHRvIHRoZSBET01cbiAgICAgICAgdGhpcy5fYnVpbGRDYWxlbmRhcihkYXlzLCB0aGlzLm5lc3RpbmdEZXB0aCk7XG5cbiAgICB9XG5cblxuXG5cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHRvIHNlZSBpZiB0aGUgZGF5IGlzIHByaW9yIHRvIHRoZSBjdXJyZW50IGRhdGVcbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZGlzYWJsZSB0aGUgdW5zZWxlY3RhYmxlIGRheXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZVxuICAgICAqIEByZXR1cm4ge0Jvb2x9XG4gICAgICovXG4gICAgaXNCZWZvcmVUb2RheShkYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJjQ2FsZW5kYXJTZXJ2aWNlLmRhdGVJc0JlZm9yZVRvZGF5KGRhdGUpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBkYXkgbWF0Y2hlcyB0aGUgY3VycmVudCBkYXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RhdGV9IGRhdGVcbiAgICAgKiBAcmV0dXJuIHtCb29sfVxuICAgICAqL1xuICAgIGlzRGF5VG9kYXkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5pc0RheVRvZGF5KGRhdGUsIHRoaXMuc3RhcnREYXRlKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFNlbGVjdCBhIGRhdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXlcbiAgICAgKi9cbiAgICBzZWxlY3REYXRlKGRheSkge1xuICAgICAgICAvLyBTZXQgdGhlIHNlbGVjdGVkIGRheVxuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IGRheTtcblxuICAgICAgICAvLyBPbmx5IGNhbGwgdGhlIHBhc3NlZCBtZXRob2QgaWYgaXQgZXhpc3RzIGFuZCBhIHZhbGlkIGRhdGUgd2FzIGNob3NlblxuICAgICAgICBpZiAoZGF5LmRhdGUgJiYgdGhpcy5iY0RhdGVTZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5iY0RhdGVTZWxlY3RlZCh7XG4gICAgICAgICAgICAgICAgZGF0ZTogZGF5LmRhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogRm9ybWF0IGEgZGF0ZSB1c2luZyBtb21lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvcm1hdFxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gZm9ybWF0dGVkRGF0ZVxuICAgICAqL1xuICAgIGZvcm1hdERhdGUoZGF0ZSwgZm9ybWF0KSB7XG4gICAgICAgIGlmICghZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoZm9ybWF0KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEJ1aWxkIHRoZSBjYWxlbmRhciBKU09OXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkYXlzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRlcHRoXG4gICAgICogQHJldHVybiB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqL1xuICAgIF9idWlsZENhbGVuZGFyKGRheXMsIGRlcHRoKSB7XG5cbiAgICAgICAgLy8gQ2FsbCB0aGUgY29ycmVjdCBvcmdhbml6YXRpb24gbWV0aG9kIGJhc2VkIG9uIHRoZSBuZXN0aW5nIGRlcHRoXG4gICAgICAgIGlmIChkZXB0aCA9PT0gJ21vbnRoJykge1xuXG4gICAgICAgICAgICB0aGlzLmJjQ29sbGVjdGlvbiA9IHRoaXMuYmNDYWxlbmRhclNlcnZpY2Uub3JnYW5pemVNb250aHMoZGF5cyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChkZXB0aCA9PT0gJ3dlZWsnKSB7XG5cbiAgICAgICAgICAgIHRoaXMuYmNDb2xsZWN0aW9uID0gdGhpcy5iY0NhbGVuZGFyU2VydmljZS5vcmdhbml6ZVdlZWtzKGRheXMpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoZGVwdGggPT09ICdkYXknKSB7XG5cbiAgICAgICAgICAgIHRoaXMuYmNDb2xsZWN0aW9uID0gZGF5cztcblxuICAgICAgICB9XG5cbiAgICB9XG5cblxufVxuXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9jYWxlbmRhci5jb250cm9sbGVyLmpzXG4gKiovIiwidmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvY2FsZW5kYXIuaHRtbCc7XG52YXIgaHRtbCA9IFwiPHNlY3Rpb24gY2xhc3M9YmMtY2FsZW5kYXI+IDxzcGFuIGNsYXNzPWJjLWNhbGVuZGFyX193ZWVrZGF5cyBkYXRhLW5nLWlmPVxcXCJ2bS5zaG93V2Vla2RheXMgJiYgdm0ubmVzdGluZ0RlcHRoID09PSAnd2VlaydcXFwiPiA8c3BhbiBjbGFzcz1cXFwiYmMtY2FsZW5kYXJfX2RheSBiYy1jYWxlbmRhcl9fZGF5LS13ZWVrZGF5c1xcXCIgZGF0YS1uZy1yZXBlYXQ9XFxcImRheSBpbiB2bS53ZWVrZGF5cyB0cmFjayBieSAkaW5kZXhcXFwiPiA8c3Ryb25nIGNsYXNzPWJjLWNhbGVuZGFyX19kYXktdGl0bGU+IHt7IGRheSB9fSA8L3N0cm9uZz4gPC9zcGFuPiA8L3NwYW4+IDxiYy15ZWFyIGJjLWNvbGxlY3Rpb249dm0uYmNDb2xsZWN0aW9uIGRhdGEtbmctaWY9XFxcInZtLm5lc3RpbmdEZXB0aCA9PT0gJ3llYXInXFxcIj48L2JjLXllYXI+IDxiYy1tb250aCBiYy1jb2xsZWN0aW9uPXZtLmJjQ29sbGVjdGlvbiBkYXRhLW5nLWlmPVxcXCJ2bS5uZXN0aW5nRGVwdGggPT09ICdtb250aCdcXFwiPjwvYmMtbW9udGg+IDxiYy13ZWVrIGJjLWNvbGxlY3Rpb249dm0uYmNDb2xsZWN0aW9uIGRhdGEtbmctaWY9XFxcInZtLm5lc3RpbmdEZXB0aCA9PT0gJ3dlZWsnXFxcIj48L2JjLXdlZWs+IDxiYy1kYXkgYmMtY29sbGVjdGlvbj12bS5iY0NvbGxlY3Rpb24gZGF0YS1uZy1pZj1cXFwidm0ubmVzdGluZ0RlcHRoID09PSAnZGF5J1xcXCI+PC9iYy1kYXk+IDwvc2VjdGlvbj5cIjtcbndpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xubW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdGVtcGxhdGVzL2NhbGVuZGFyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA2XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsInZhciBwYXRoID0gJy9Vc2Vycy9iYy9Db2RlL29wZW4tc291cmNlL2FuZ3VsYXItanNvbi1jYWxlbmRhci9zcmMvdGVtcGxhdGVzL3llYXIuaHRtbCc7XG52YXIgaHRtbCA9IFwiPGRpdiBjbGFzcz1iYy1jYWxlbmRhcl9feWVhciBkYXRhLW5nLXJlcGVhdD1cXFwieWVhciBpbiB2bS5iY0NvbGxlY3Rpb24gdHJhY2sgYnkgJGluZGV4XFxcIj4gPGJjLW1vbnRoIGJjLWNvbGxlY3Rpb249eWVhciBiYy13ZWVrcy1oZWFkZXI9dm0ud2Vla2RheXNIZWFkZXI+PC9iYy1tb250aD4gPC9kaXY+XCI7XG53aW5kb3cuYW5ndWxhci5tb2R1bGUoJ25nJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbihjKSB7IGMucHV0KHBhdGgsIGh0bWwpIH1dKTtcbm1vZHVsZS5leHBvcnRzID0gcGF0aDtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL3RlbXBsYXRlcy95ZWFyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsInZhciBwYXRoID0gJy9Vc2Vycy9iYy9Db2RlL29wZW4tc291cmNlL2FuZ3VsYXItanNvbi1jYWxlbmRhci9zcmMvdGVtcGxhdGVzL21vbnRoLmh0bWwnO1xudmFyIGh0bWwgPSBcIjx0aW1lIGNsYXNzPWJjLWNhbGVuZGFyX19tb250aCBkYXRldGltZT1cXFwie3sgbW9udGhbMF1bbW9udGhbMF0ubGVuZ3RoIC0gMV0uZGF0ZSB8IGRhdGU6J3l5eXktTU0nIH19XFxcIiBkYXRhLW5nLXJlcGVhdD1cXFwibW9udGggaW4gdm0uYmNDb2xsZWN0aW9uIHRyYWNrIGJ5ICRpbmRleFxcXCI+IDxzcGFuIGNsYXNzPWJjLWNhbGVuZGFyX19tb250aC10aXRsZSBkYXRhLW5nLWJpbmQ9XFxcInZtLmZvcm1hdERhdGUobW9udGhbMF1bbW9udGhbMF0ubGVuZ3RoIC0gMV0uZGF0ZSwgdm0ubW9udGhUaXRsZUZvcm1hdClcXFwiIGRhdGEtbmctaWY9dm0uc2hvd01vbnRoVGl0bGVzPjwvc3Bhbj4gPHNwYW4gY2xhc3M9YmMtY2FsZW5kYXJfX3dlZWtkYXlzIGRhdGEtbmctaWY9dm0uc2hvd1dlZWtkYXlzPiA8c3BhbiBjbGFzcz1cXFwiYmMtY2FsZW5kYXJfX2RheSBiYy1jYWxlbmRhcl9fZGF5LS13ZWVrZGF5c1xcXCIgZGF0YS1uZy1yZXBlYXQ9XFxcImRheSBpbiB2bS53ZWVrZGF5cyB0cmFjayBieSAkaW5kZXhcXFwiPiA8c3Ryb25nIGNsYXNzPWJjLWNhbGVuZGFyX19kYXktdGl0bGU+IHt7IGRheSB9fSA8L3N0cm9uZz4gPC9zcGFuPiA8L3NwYW4+IDxiYy13ZWVrIGJjLWNvbGxlY3Rpb249bW9udGg+PC9iYy13ZWVrPiA8L3RpbWU+XCI7XG53aW5kb3cuYW5ndWxhci5tb2R1bGUoJ25nJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbihjKSB7IGMucHV0KHBhdGgsIGh0bWwpIH1dKTtcbm1vZHVsZS5leHBvcnRzID0gcGF0aDtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL3RlbXBsYXRlcy9tb250aC5odG1sXG4gKiogbW9kdWxlIGlkID0gOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJ2YXIgcGF0aCA9ICcvVXNlcnMvYmMvQ29kZS9vcGVuLXNvdXJjZS9hbmd1bGFyLWpzb24tY2FsZW5kYXIvc3JjL3RlbXBsYXRlcy93ZWVrLmh0bWwnO1xudmFyIGh0bWwgPSBcIjx0aW1lIGNsYXNzPWJjLWNhbGVuZGFyX193ZWVrIGRhdGV0aW1lPVxcXCJ7eyB3ZWVrW3dlZWsubGVuZ3RoIC0gMV0uZGF0ZSB8IGRhdGU6J3l5eXktd3cnIH19XFxcIiBkYXRhLW5nLXJlcGVhdD1cXFwid2VlayBpbiB2bS5iY0NvbGxlY3Rpb24gdHJhY2sgYnkgJGluZGV4XFxcIj4gPGJjLWRheSBiYy1jb2xsZWN0aW9uPXdlZWs+PC9iYy1kYXk+IDwvdGltZT5cIjtcbndpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xubW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdGVtcGxhdGVzL3dlZWsuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwidmFyIHBhdGggPSAnL1VzZXJzL2JjL0NvZGUvb3Blbi1zb3VyY2UvYW5ndWxhci1qc29uLWNhbGVuZGFyL3NyYy90ZW1wbGF0ZXMvZGF5Lmh0bWwnO1xudmFyIGh0bWwgPSBcIjxzcGFuIGNsYXNzPWJjLWNhbGVuZGFyX19kYXkgZGF0YS1uZy1jbGFzcz1cXFwieyAnYmMtY2FsZW5kYXJfX2RheS0tZGlzYWJsZWQnOiB2bS5pc0JlZm9yZVRvZGF5KGRheS5kYXRlKSxcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLXRvZGF5Jzogdm0uaXNEYXlUb2RheShkYXkuZGF0ZSksXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS1ldmVuJzogJGV2ZW4sXFxuICAgICAgICAgICAgICAgICAgICdiYy1jYWxlbmRhcl9fZGF5LS1vZGQnOiAkb2RkLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tcGFkJzogIWRheS5kYXRlLFxcbiAgICAgICAgICAgICAgICAgICAnYmMtY2FsZW5kYXJfX2RheS0tdmFsaWQnOiBkYXkuZGF0ZSxcXG4gICAgICAgICAgICAgICAgICAgJ2JjLWNhbGVuZGFyX19kYXktLXNlbGVjdGVkJzogZGF5LmRhdGUgPT09IHZtLnNlbGVjdGVkRGF0ZS5kYXRlIH1cXFwiIGRhdGEtbmctY2xpY2s9dm0uc2VsZWN0RGF0ZShkYXkpIGRhdGEtbmctcmVwZWF0PVxcXCJkYXkgaW4gdm0uYmNDb2xsZWN0aW9uIHRyYWNrIGJ5ICRpbmRleFxcXCIgdGl0bGU9ZGF5LmRhdGU+IDxuZy1pbmNsdWRlIHNyYz12bS5kYXlUZW1wbGF0ZT48L25nLWluY2x1ZGU+IDwvc3Bhbj5cIjtcbndpbmRvdy5hbmd1bGFyLm1vZHVsZSgnbmcnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKGMpIHsgYy5wdXQocGF0aCwgaHRtbCkgfV0pO1xubW9kdWxlLmV4cG9ydHMgPSBwYXRoO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdGVtcGxhdGVzL2RheS5odG1sXG4gKiogbW9kdWxlIGlkID0gMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwiaW1wb3J0IHllYXJUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlcy95ZWFyLmh0bWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gYmNZZWFyRGlyZWN0aXZlKFxuKSB7XG4gICAgJ25nSW5qZWN0JztcblxuICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG4gICAgICAgICAgICBiY0NvbGxlY3Rpb246ICc9J1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogeWVhclRlbXBsYXRlLFxuICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbiBZRUFSIGRpcmVjdGl2ZTogJywgdGhpcy5iY0NvbGxlY3Rpb24pO1xuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbn1cblxuXG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3llYXIuZGlyZWN0aXZlLmpzXG4gKiovIiwiaW1wb3J0IG1vbnRoVGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZXMvbW9udGguaHRtbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBiY01vbnRoRGlyZWN0aXZlKFxuKSB7XG4gICAgJ25nSW5qZWN0JztcblxuICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG4gICAgICAgICAgICBiY0NvbGxlY3Rpb246ICc9JyxcbiAgICAgICAgICAgIGJjV2Vla2RheXNIZWFkZXI6ICc9JyxcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6IG1vbnRoVGVtcGxhdGUsXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luIE1PTlRIIGRpcmVjdGl2ZTogJywgdGhpcy5iY0NvbGxlY3Rpb24pO1xuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbn1cblxuXG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21vbnRoLmRpcmVjdGl2ZS5qc1xuICoqLyIsImltcG9ydCB3ZWVrVGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZXMvd2Vlay5odG1sJztcblxuZXhwb3J0IGZ1bmN0aW9uIGJjV2Vla0RpcmVjdGl2ZShcbikge1xuICAgICduZ0luamVjdCc7XG5cbiAgICBjb25zdCBkaXJlY3RpdmUgPSB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xuICAgICAgICAgICAgYmNDb2xsZWN0aW9uOiAnPScsXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiB3ZWVrVGVtcGxhdGUsXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luIFdFRUsgZGlyZWN0aXZlOiAnLCB0aGlzLmJjQ29sbGVjdGlvbik7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxufVxuXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy93ZWVrLmRpcmVjdGl2ZS5qc1xuICoqLyIsImltcG9ydCBkYXlXcmFwcGVyVGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZXMvZGF5Lmh0bWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gYmNEYXlEaXJlY3RpdmUoXG4gICAgYmNDYWxlbmRhckNvbmZpZ1xuKSB7XG4gICAgJ25nSW5qZWN0JztcblxuICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XG4gICAgICAgICAgICBiY0NvbGxlY3Rpb246ICc9JyxcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6IGRheVdyYXBwZXJUZW1wbGF0ZSxcbiAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW4gREFZIGRpcmVjdGl2ZTogJywgdGhpcy5iY0NvbGxlY3Rpb24pO1xuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbn1cblxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZGF5LmRpcmVjdGl2ZS5qc1xuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=